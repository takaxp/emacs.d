<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Configurations for GNU Emacs</title>
<!-- 2015-06-05 Fri 00:53 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Takaaki Ishikawa" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Configurations for GNU Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. はじめに</a></li>
<li><a href="#orgheadline13">2. 基本設定</a>
<ul>
<li><a href="#orgheadline2">2.1. init.el のヘッダ</a></li>
<li><a href="#orgheadline3">2.2. cl を使う</a></li>
<li><a href="#orgheadline4">2.3. リストで関数を渡せる autoload-if-found を使う</a></li>
<li><a href="#orgheadline7">2.4. [eval-after-autoload-if-found.el] 遅延読み込み</a>
<ul>
<li><a href="#orgheadline5">2.4.1. マクロ版</a></li>
<li><a href="#orgheadline6">2.4.2. 関数版</a></li>
</ul>
</li>
<li><a href="#orgheadline8">2.5. 警告の抑制</a></li>
<li><a href="#orgheadline9">2.6. 起動時間の計測</a></li>
<li><a href="#orgheadline11">2.7. C-x C-c で容易にEmacsを終了させないように質問する</a>
<ul>
<li><a href="#orgheadline10">2.7.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline12">2.8. Messages 出力を封じるためのマクロ</a></li>
</ul>
</li>
<li><a href="#orgheadline31">3. コア設定</a>
<ul>
<li><a href="#orgheadline14">3.1. 言語／文字コード</a></li>
<li><a href="#orgheadline15">3.2. 日本語入力</a></li>
<li><a href="#orgheadline16">3.3. [ag.el] 検索</a></li>
<li><a href="#orgheadline17">3.4. 基本キーバインド</a></li>
<li><a href="#orgheadline18">3.5. ナローイングするか</a></li>
<li><a href="#orgheadline19">3.6. バッファの終わりでのnewlineを禁止する</a></li>
<li><a href="#orgheadline20">3.7. 常に最終行に一行追加する</a></li>
<li><a href="#orgheadline21">3.8. 長い文章を右端で常に折り返す</a></li>
<li><a href="#orgheadline22">3.9. バッファが外部から編集された場合に自動で再読み込みする</a></li>
<li><a href="#orgheadline23">3.10. [uniquify.el] 同じバッファ名が開かれた場合に区別する</a></li>
<li><a href="#orgheadline24">3.11. マウスで選択した領域を自動コピー</a></li>
<li><a href="#orgheadline27">3.12. パッケージ管理</a>
<ul>
<li><a href="#orgheadline25">3.12.1. Cask のセットアップ</a></li>
<li><a href="#orgheadline26">3.12.2. load-path を一箇所にして起動を高速化</a></li>
</ul>
</li>
<li><a href="#orgheadline28">3.13. インデント</a></li>
<li><a href="#orgheadline29">3.14. [aggressive-indent] 即時バッファ整形</a></li>
<li><a href="#orgheadline30">3.15. ファイルリンクを辿る時に確認のメッセージを出さない</a></li>
</ul>
</li>
<li><a href="#orgheadline45">4. カーソル移動</a>
<ul>
<li><a href="#orgheadline32">4.1. バッファ内のカーソル移動</a></li>
<li><a href="#orgheadline33">4.2. バッファ間のカーソル移動</a></li>
<li><a href="#orgheadline34">4.3. スクロールを制御</a></li>
<li><a href="#orgheadline35">4.4. スクロールで表示を重複させる行数</a></li>
<li><a href="#orgheadline37">4.5. [SmoothScroll.el] カーソル固定でスクロールする</a>
<ul>
<li><a href="#orgheadline36">4.5.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline38">4.6. [smooth-scroll.el] 滑らかなスクロール</a></li>
<li><a href="#orgheadline40">4.7. [point-undo.el] カーソル位置を簡単にたどる</a>
<ul>
<li><a href="#orgheadline39">4.7.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline42">4.8. [cycle-buffer.el] カレントバッファの表示切り替え</a>
<ul>
<li><a href="#orgheadline41">4.8.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline43">4.9. [bm.el] カーソル位置をブックマークして追う</a></li>
<li><a href="#orgheadline44">4.10. [centered-cursor-mode.el] カーソル位置を中央に固定</a></li>
</ul>
</li>
<li><a href="#orgheadline82">5. 編集サポート</a>
<ul>
<li><a href="#orgheadline46">5.1. 矩形編集／連番入力</a></li>
<li><a href="#orgheadline47">5.2. Yank時に装飾を取る</a></li>
<li><a href="#orgheadline48">5.3. ファイル保存時に時間を記録する</a></li>
<li><a href="#orgheadline49">5.4. 選択リージョンを使って検索</a></li>
<li><a href="#orgheadline50">5.5. ChangeLog モード</a></li>
<li><a href="#orgheadline51">5.6. テキストモード</a></li>
<li><a href="#orgheadline52">5.7. C/C++モード</a></li>
<li><a href="#orgheadline53">5.8. C#モード</a></li>
<li><a href="#orgheadline54">5.9. Infoモード</a></li>
<li><a href="#orgheadline55">5.10. Rモード</a></li>
<li><a href="#orgheadline56">5.11. nXMLモード</a></li>
<li><a href="#orgheadline57">5.12. yamlモード</a></li>
<li><a href="#orgheadline58">5.13. jsonモード</a></li>
<li><a href="#orgheadline59">5.14. javascriptモード</a></li>
<li><a href="#orgheadline60">5.15. csvモード</a></li>
<li><a href="#orgheadline62">5.16. スペルチェック</a>
<ul>
<li><a href="#orgheadline61">5.16.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline63">5.17. リアルタイムスペルチェック</a></li>
<li><a href="#orgheadline64">5.18. [latex-math-preview.el] TeX数式をプレビュー</a></li>
<li><a href="#orgheadline65">5.19. [po-mode.el] 翻訳ファイルの編集</a></li>
<li><a href="#orgheadline66">5.20. [word-count.el] リージョン内の文字をカウントする</a></li>
<li><a href="#orgheadline67">5.21. [yatex.el] YaTeXモード</a></li>
<li><a href="#orgheadline68">5.22. [wclock.el] 世界時計</a></li>
<li><a href="#orgheadline69">5.23. [yasnippet.el] Emacs用のテンプレートシステム</a></li>
<li><a href="#orgheadline71">5.24. [sdic.el] 英辞郎で英単語を調べる</a>
<ul>
<li><a href="#orgheadline70">5.24.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline74">5.25. MacOSのdictionary.appでCOBUILD5の辞書をひく</a>
<ul>
<li><a href="#orgheadline72">5.25.1. マイナーモード化</a></li>
<li><a href="#orgheadline73">5.25.2. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline76">5.26. [lookup.el] 辞書</a>
<ul>
<li><a href="#orgheadline75">5.26.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline77">5.27. [cacoo] Cacoo で描く</a></li>
<li><a href="#orgheadline78">5.28. [iedit] バッファ内の同じ文字列を一度に編集する</a></li>
<li><a href="#orgheadline79">5.29. [web-mode] HTML編集</a></li>
<li><a href="#orgheadline80">5.30. [zencoding-mode] HTML編集の高速化</a></li>
<li><a href="#orgheadline81">5.31. [emmet-mode] zencoding の後継</a></li>
</ul>
</li>
<li><a href="#orgheadline107">6. 表示サポート</a>
<ul>
<li><a href="#orgheadline83">6.1. モードラインのモード名を短くする</a></li>
<li><a href="#orgheadline84">6.2. モードラインのNarrowを短くする</a></li>
<li><a href="#orgheadline86">6.3. モードラインの色をカスタマイズする</a>
<ul>
<li><a href="#orgheadline85">6.3.1. 色セット例</a></li>
</ul>
</li>
<li><a href="#orgheadline87">6.4. visible-bell のカスタマイズ</a></li>
<li><a href="#orgheadline88">6.5. 常に <b>scratch</b> を表示して起動する</a></li>
<li><a href="#orgheadline89">6.6. バッテリー情報をモードラインに表示する</a></li>
<li><a href="#orgheadline90">6.7. スクロールバーを非表示にする</a></li>
<li><a href="#orgheadline91">6.8. ツールバーを非表示にする</a></li>
<li><a href="#orgheadline92">6.9. 起動時のスプラッシュ画面を表示しない</a></li>
<li><a href="#orgheadline93">6.10. カーソル行の行数をモードラインに表示する</a></li>
<li><a href="#orgheadline94">6.11. カーソル行の関数名をモードラインに表示する</a></li>
<li><a href="#orgheadline95">6.12. 時刻をモードラインに表示する</a></li>
<li><a href="#orgheadline96">6.13. 対応するカッコをハイライトする</a></li>
<li><a href="#orgheadline97">6.14. 全角スペースと行末タブ／半角スペースを強調表示する</a></li>
<li><a href="#orgheadline98">6.15. [migemo.el] ローマ字入力で日本語を検索する</a></li>
<li><a href="#orgheadline100">6.16. [anything.el] 何でも絞り込みインターフェイス</a>
<ul>
<li><a href="#orgheadline99">6.16.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline102">6.17. [helm.el] 続・何でも絞り込みインターフェイス</a>
<ul>
<li><a href="#orgheadline101">6.17.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline103">6.18. [stripe-buffer.el] テーブルの色をストライプにする</a></li>
<li><a href="#orgheadline104">6.19. [rainbow-delimiters] 対応するカッコに色を付ける</a></li>
<li><a href="#orgheadline105">6.20. [git-gutter-fringe] 編集差分をフレーム端で視覚化</a></li>
<li><a href="#orgheadline106">6.21. [zlc.el] find-file バッファを zsh ライクにする</a></li>
</ul>
</li>
<li><a href="#orgheadline111">7. メディアサポート</a>
<ul>
<li><a href="#orgheadline108">7.1. [bongo.el] Emacsのバッファで音楽ライブラリを管理する</a></li>
<li><a href="#orgheadline109">7.2. [GoogleMaps.el] GoogleMaps を Emacs 内で使う</a></li>
<li><a href="#orgheadline110">7.3. [org-google-weather.el] org-agenda に天気を表示する</a></li>
</ul>
</li>
<li><a href="#orgheadline126">8. 履歴／ファイル管理</a>
<ul>
<li><a href="#orgheadline112">8.1. Undoバッファを無限に取る</a></li>
<li><a href="#orgheadline113">8.2. [undo-tree] 編集履歴をわかりやすくたどる</a></li>
<li><a href="#orgheadline114">8.3. バッファ保存時にバックアップファイルを生成する</a></li>
<li><a href="#orgheadline115">8.4. バッファ保存時にバックアップを生成させない</a></li>
<li><a href="#orgheadline116">8.5. ミニバッファの履歴を保存しリストアする</a></li>
<li><a href="#orgheadline117">8.6. 履歴サイズを大きくする</a></li>
<li><a href="#orgheadline118">8.7. Emacs終了時に開いていたバッファを起動時に復元する</a></li>
<li><a href="#orgheadline119">8.8. 最近開いたファイルリストを保持</a></li>
<li><a href="#orgheadline120">8.9. 深夜にバッファを自動整理する</a></li>
<li><a href="#orgheadline121">8.10. [auto-save-buffers.el] 一定間隔でバッファを保存する</a></li>
<li><a href="#orgheadline122">8.11. [backup-dir.el] バックアップファイルを一箇所に集める</a></li>
<li><a href="#orgheadline123">8.12. [backup-each-save] クラッシュに備える</a></li>
<li><a href="#orgheadline124">8.13. [session.el] 様々な履歴を保存し復元に利用する</a></li>
<li><a href="#orgheadline125">8.14. [wakatime-mode.el] WakaTime を利用して作業記録する</a></li>
</ul>
</li>
<li><a href="#orgheadline136">9. 開発サポート</a>
<ul>
<li><a href="#orgheadline127">9.1. 便利キーバインド</a></li>
<li><a href="#orgheadline128">9.2. [gist.el] Gist インターフェイス</a></li>
<li><a href="#orgheadline129">9.3. [doxymacs.el] Doxygen のコメントを簡単に入力する</a></li>
<li><a href="#orgheadline130">9.4. [matlab.el] Matlab用の設定</a></li>
<li><a href="#orgheadline131">9.5. [flycheck.el] 構文エラー表示</a></li>
<li><a href="#orgheadline132">9.6. [auto-complete.el] 自動補完機能</a></li>
<li><a href="#orgheadline134">9.7. [auto-complete-clang.el] オムニ補完</a>
<ul>
<li><a href="#orgheadline133">9.7.1. 参考サイト</a></li>
</ul>
</li>
<li><a href="#orgheadline135">9.8. [hideshowvis.el] 関数の表示／非表示</a></li>
</ul>
</li>
<li><a href="#orgheadline168">10. Org Mode</a>
<ul>
<li><a href="#orgheadline137">10.1. 基本設定</a></li>
<li><a href="#orgheadline138">10.2. contribution を使う</a></li>
<li><a href="#orgheadline139">10.3. iCal との連携</a></li>
<li><a href="#orgheadline140">10.4. スピードコマンド</a></li>
<li><a href="#orgheadline141">10.5. Pomodoro</a></li>
<li><a href="#orgheadline142">10.6. face 関連</a></li>
<li><a href="#orgheadline143">10.7. <span class="todo nilTODO">TODO</span> キーワードのカスタマイズ</a></li>
<li><a href="#orgheadline144">10.8. ImageMagick を使って様々な画像をインライン表示する</a></li>
<li><a href="#orgheadline145">10.9. [org-agenda]</a></li>
<li><a href="#orgheadline146">10.10. [appt.el] アラーム設定</a></li>
<li><a href="#orgheadline147">10.11. [org-capture] 高速にメモを取る</a></li>
<li><a href="#orgheadline148">10.12. [org-refile]</a></li>
<li><a href="#orgheadline149">10.13. [org-babel] 基本設定</a></li>
<li><a href="#orgheadline150">10.14. [org-babel] ソースブロックの入力キーをカスタマイズ</a></li>
<li><a href="#orgheadline151">10.15. [MobileOrg] iOS との連携</a></li>
<li><a href="#orgheadline152">10.16. [org-tree-slide] Org でプレゼンテーション</a></li>
<li><a href="#orgheadline153">10.17. [org-tree-slide] クロックインとアウトを自動化する</a></li>
<li><a href="#orgheadline155">10.18. [org-tree-slide] 特定のツリーをプロポーショナルフォントで表示する</a>
<ul>
<li><a href="#orgheadline154">10.18.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline156">10.19. [org-fstree] ディレクトリ構造を読み取る</a></li>
<li><a href="#orgheadline157">10.20. [calfw-org] calfw に org の予定を表示する</a></li>
<li><a href="#orgheadline158">10.21. [org-export-generic] エクスポート機能を拡張する</a></li>
<li><a href="#orgheadline159">10.22. [org-odt] ODT形式に出力</a></li>
<li><a href="#orgheadline160">10.23. [org-crypt] ツリーを暗号化する</a></li>
<li><a href="#orgheadline161">10.24. [org-mac-link] 外部アプリから情報を取る</a></li>
<li><a href="#orgheadline162">10.25. [org-notify] 通知</a></li>
<li><a href="#orgheadline163">10.26. [org-grep] org ファイルを grep する</a></li>
<li><a href="#orgheadline164">10.27. <span class="todo nilREAD">READ</span> ME を常に org-mode で開く</a></li>
<li><a href="#orgheadline166">10.28. Growlnotify と org-mode でアラーム管理</a>
<ul>
<li><a href="#orgheadline165">10.28.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#orgheadline167">10.29. org-mode の latex エクスポート関数をオーバーライド</a></li>
</ul>
</li>
<li><a href="#orgheadline184">11. フォント／配色関連</a>
<ul>
<li><a href="#orgheadline169">11.1. 正規表現を見やすくする</a></li>
<li><a href="#orgheadline170">11.2. 設定ファイルを見やすくする</a></li>
<li><a href="#orgheadline171">11.3. カーソル行に色をつける</a></li>
<li><a href="#orgheadline172">11.4. カーソルの色</a></li>
<li><a href="#orgheadline173">11.5. カーソルを点滅させない</a></li>
<li><a href="#orgheadline174">11.6. カーソル位置のフォントを確認</a></li>
<li><a href="#orgheadline177">11.7. フォント設定</a>
<ul>
<li><a href="#orgheadline175">11.7.1. フォントのインストール方法</a></li>
<li><a href="#orgheadline176">11.7.2. フォントチェック用コード</a></li>
</ul>
</li>
<li><a href="#orgheadline178">11.8. 行間を制御する</a></li>
<li><a href="#orgheadline179">11.9. パッチをカラフルに表示する</a></li>
<li><a href="#orgheadline180">11.10. 背景を黒系色にする</a></li>
<li><a href="#orgheadline182">11.11. [rainbow-mode.el] 配色のリアルタイム確認</a>
<ul>
<li><a href="#orgheadline181">11.11.1. 色一覧</a></li>
</ul>
</li>
<li><a href="#orgheadline183">11.12. [volatile-highlights] コピペした領域を強調</a></li>
</ul>
</li>
<li><a href="#orgheadline190">12. フレーム／ウィンドウ制御</a>
<ul>
<li><a href="#orgheadline185">12.1. 起動時の設定</a></li>
<li><a href="#orgheadline186">12.2. [elscreen.el] Emacs バッファをタブ化</a></li>
<li><a href="#orgheadline187">12.3. [e2wm.el] 二画面表示</a></li>
<li><a href="#orgheadline188">12.4. [frame-ctr.el] キーボードでフレームの場所を移す</a></li>
<li><a href="#orgheadline189">12.5. [popwin.el] ポップアップウィンドウの制御</a></li>
</ul>
</li>
<li><a href="#orgheadline193">13. ユーティリティ関数</a>
<ul>
<li><a href="#orgheadline191">13.1. [pomodoro.el] ポモドーロの実践</a></li>
<li><a href="#orgheadline192">13.2. [utility.el] 自作してテスト中の便利関数群</a></li>
</ul>
</li>
<li><a href="#orgheadline195">14. お試し中</a>
<ul>
<li><a href="#orgheadline194">14.1. yascroll</a></li>
</ul>
</li>
<li><a href="#orgheadline196">15. provide</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> はじめに</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>この文章は，<a href="https://gist.github.com/1369417">org2dokuwiki.pl</a>を使って生成しています．<br  /></li>
<li><a href="https://github.com/takaxp/emacs.d/blob/master/init.el">init.el</a> 本体は，<a href="https://github.com/takaxp/emacs.d/">github</a> に公開しています．<br  /></li>
<li><a href="https://github.com/takaxp/emacs.d/blob/master/init.org">init.org</a> から <a href="https://github.com/takaxp/emacs.d/blob/master/init.el">init.el</a>，<a href="https://github.com/takaxp/emacs.d/raw/master/init.pdf">init.pdf</a>，<a href="https://github.com/takaxp/emacs.d/raw/master/init.odt">init.odt</a>，<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:init.el">wiki</a> を生成しています．<br  /></li>
<li>一部の関数定義を <a href="http://pastelwill.jp/wiki/doku.php?id=emacs:utility.el">utility.el</a> に分離しています．<br  /></li>
<li>コピペだけで動かなかった場合は，ページ最下部のコメント欄にご意見をどうぞ．<br  /></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13"><span class="section-number-2">2</span> 基本設定</h2>
<div class="outline-text-2" id="text-2">
<p>
この設定群を利用するために設定です．おそらく記述しておかないと動きません．<br  />
</p>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">2.1</span> init.el のヘッダ</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Configurations for Emacs</span>
<span style="color: #b22222;">;;;;                                       </span><span style="color: #b22222;">Takaaki ISHIKAWA  <a href="mailto:takaxp%40ieee.org">&lt;takaxp@ieee.org&gt;</a></span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Cite: http://www.mygooglest.com/fni/dot-emacs.html (GREAT!)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.2</span> cl を使う</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<a href="http://lisperblog.blogspot.com/2008/12/blog-post_18.html">http://lisperblog.blogspot.com/2008/12/blog-post_18.html</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">eval-when-compile</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cl-lib</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.3</span> リストで関数を渡せる autoload-if-found を使う</h3>
<div class="outline-text-3" id="text-2-3">
<p>
<a href="http://d.hatena.ne.jp/jimo1001/20090921/1253525484">http://d.hatena.ne.jp/jimo1001/20090921/1253525484</a><br  />
</p>

<p>
eval-after-load とのペアでマクロ化したバージョンもある（次章参照）．<br  />
</p>

<p>
<a href="http://e-arrows.sakura.ne.jp/2010/03/macros-in-emacs-el.html">http://e-arrows.sakura.ne.jp/2010/03/macros-in-emacs-el.html</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">autoload-if-found</span> (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type)
  <span style="color: #8b2252;">"set autoload iff. FILE has found."</span>
  (<span style="color: #a020f0;">if</span> (not (listp functions))
      (setq functions (list functions)))
  (and (locate-library file)
       (<span style="color: #a020f0;">progn</span>
         (<span style="color: #a020f0;">dolist</span> (function functions)
           (autoload function file docstring interactive type))
         t )))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">2.4</span> [eval-after-autoload-if-found.el] 遅延読み込み</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Twitterでぼやいていたら <a href="https://twitter.com/cvmat">@cvmat</a>さんが降臨して次のマクロを作ってくださいました．感謝感謝．<br  />
</p>

<p>
<a href="https://gist.github.com/3513287">https://gist.github.com/3513287</a><br  />
</p>

<p>
autoload-if-found で遅延読み込みすると，eval-after-load と組み合わせるので，どうしてもインデントが増えてしまう．<br  />
</p>

<p>
例えば，cycle-buffer を遅延読み込みしたい場合， <code>setq</code> で変数を書き換えするために随分とインデントが進んでいます．<br  />
</p>



<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t)
  (eval-after-load <span style="color: #8b2252;">"cycle-buffer"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq cycle-buffer-allow-visible t)
       (setq cycle-buffer-show-length 12)
       (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>)))))
</pre>
</div>

<p>
これを，次の eval-after-autoload-func.el を使うと，非常にシンプルになります．行数も桁数もスッキリです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(cycle-buffer cycle-buffer-backward) <span style="color: #b22222;">;; </span><span style="color: #b22222;">autoload &#12391;&#21453;&#24540;&#12373;&#12379;&#12427;&#38306;&#25968;</span>
 <span style="color: #8b2252;">"cycle-buffer"</span> nil t nil      <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#21453;&#24540;&#12373;&#12379;&#12383;&#38306;&#25968;&#12398;&#12467;&#12540;&#12523;&#12391;&#35501;&#12416;&#12497;&#12483;&#12465;&#12540;&#12472;&#25351;&#23450;</span>
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12497;&#12483;&#12465;&#12540;&#12472;&#35501;&#12415;&#36796;&#12415;&#24460;&#12398;&#35373;&#23450;</span>
   (setq cycle-buffer-allow-visible t)
   (setq cycle-buffer-show-length 12)
   (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>))))
</pre>
</div>

<p>
戻り値を判定して，グローバルなキーアサインもできます．存在しないパッケージの関数呼び出しを明示的に防ぐには有効です． <code>hook</code> も同様です．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t nil
       '((setq cycle-buffer-allow-visible t)
         (setq cycle-buffer-show-length 12)
         (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>))
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12461;&#12540;&#12450;&#12469;&#12452;&#12531;&#12399;&#12371;&#12385;&#12425;</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(define-key xxx-map (kbd "q") 'hoge)</span>
         ))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12464;&#12525;&#12540;&#12496;&#12523;&#12399;&#12371;&#12385;&#12425;</span>
  (global-set-key (kbd <span style="color: #8b2252;">"M-]"</span>) 'cycle-buffer)
  (global-set-key (kbd <span style="color: #8b2252;">"M-["</span>) 'cycle-buffer-backward)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12497;&#12483;&#12465;&#12540;&#12472;&#12395;&#32016;&#20184;&#12356;&#12383;&#12501;&#12483;&#12463;&#12399;&#12371;&#12385;&#12425;&#12408;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'xxx-hook 'hogehoge)</span>
  <span style="color: #b22222;">;;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12499;&#12523;&#12489;&#12452;&#12531;&#12391;&#12399;&#12394;&#12356;mode&#12398; auto-mode-alist &#35373;&#23450;&#12418;&#12371;&#12385;&#12425;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(push '("\\.hoge$" . hoge-mode) auto-mode-alist)</span>
  )
</pre>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">2.4.1</span> マクロ版</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
<a href="https://gist.github.com/3499459">https://gist.github.com/3499459</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">eval-after-autoload-if-found</span>
    (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type <span style="color: #228b22;">&amp;rest</span> after-body)
  <span style="color: #8b2252;">"Set up autoload and eval-after-load for FUNCTIONS iff. FILE has found."</span>
  `(<span style="color: #a020f0;">let*</span> ((functions ,functions)
          (docstring ,docstring)
          (interactive ,interactive)
          (type ,type)
          (file ,file))
     (<span style="color: #a020f0;">when</span> (locate-library file)
       (mapc (<span style="color: #a020f0;">lambda</span> (func)
               (autoload func file docstring interactive type))
             (<span style="color: #a020f0;">if</span> (listp functions)
                 functions
               (list functions)))
       ,@(<span style="color: #a020f0;">when</span> after-body
           `((eval-after-load file '(<span style="color: #a020f0;">progn</span> ,@after-body))))
       t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">2.4.2</span> 関数版</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
関数版にリスト <code>disabled-packages</code> を追加しました．これは，事前にリストに Lisp ファイル名を入れておくと，一切の設定をスキップするものです．=eval-after-atoload-if-found= を構成する前に次のような変数を設定しておきます．バイトコンパイルしていないファイルに書いて置けば，パッケージのON/OFFを簡単に制御できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq disabled-packages <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#36861;&#21152;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12418;&#12398;&#12399;&#65292;&#26377;&#21177;</span>
      '((<span style="color: #8b2252;">"org"</span> . t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#28961;&#21177;</span>
        (<span style="color: #8b2252;">"web-mode"</span> . nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#26377;&#21177;</span>
        (<span style="color: #8b2252;">"helm-config"</span> . t))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#28961;&#21177;</span>
</pre>
</div>

<p>
<a href="https://gist.github.com/3513287">https://gist.github.com/3513287</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">eval-after-autoload-if-found</span>
    (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type after-body)
  <span style="color: #8b2252;">"Set up autoload and eval-after-load for FUNCTIONS iff. FILE has found."</span>
  (<span style="color: #a020f0;">let</span> ((enabled t)
        (package nil))
    (<span style="color: #a020f0;">when</span> (boundp 'disabled-packages)
      (<span style="color: #a020f0;">dolist</span> (package disabled-packages)
        <span style="color: #b22222;">;;        </span><span style="color: #b22222;">(when (and (stringp package) (equal file package))</span>
        (<span style="color: #a020f0;">when</span> (and (stringp (car package)) (equal file (car package)))
          (<span style="color: #a020f0;">when</span> (cdr package)
            (setq enabled nil)))))
    (<span style="color: #a020f0;">when</span> enabled <span style="color: #b22222;">;; </span><span style="color: #b22222;">if disabled then return nil</span>
      (<span style="color: #a020f0;">when</span> (locate-library file)
        (mapc (<span style="color: #a020f0;">lambda</span> (func)
                (autoload func file docstring interactive type))
              (<span style="color: #a020f0;">if</span> (listp functions)
                  functions
                (list functions)))
        (<span style="color: #a020f0;">when</span> after-body
          (eval-after-load file `(<span style="color: #a020f0;">progn</span> ,@after-body)))
        t))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">eval-after-autoload-if-found</span>
    (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type after-body)
  <span style="color: #8b2252;">"Set up autoload and eval-after-load for FUNCTIONS iff. FILE has found."</span>
  (<span style="color: #a020f0;">let</span> ((enabled t)
        (package nil))
    (<span style="color: #a020f0;">when</span> (boundp 'disabled-packages)
      (<span style="color: #a020f0;">dolist</span> (package disabled-packages)
        (<span style="color: #a020f0;">when</span> (and (stringp package) (equal file package))
          (setq enabled nil))))
    (<span style="color: #a020f0;">when</span> enabled <span style="color: #b22222;">;; </span><span style="color: #b22222;">if disabled then return nil</span>
      (<span style="color: #a020f0;">when</span> (locate-library file)
        (mapc (<span style="color: #a020f0;">lambda</span> (func)
                (autoload func file docstring interactive type))
              (<span style="color: #a020f0;">if</span> (listp functions)
                  functions
                (list functions)))
        (<span style="color: #a020f0;">when</span> after-body
          (eval-after-load file `(<span style="color: #a020f0;">progn</span> ,@after-body)))
        t))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">2.5</span> 警告の抑制</h3>
<div class="outline-text-3" id="text-2-5">
<p>
起動時に警告が出てうっとうしい場合に使います．起動直後に呼ばれるように， <code>.emacs</code> の上の方に書いておくとよいと思います．<br  />
</p>

<p>
<a href="http://d.hatena.ne.jp/kitokitoki/20100425/p1">http://d.hatena.ne.jp/kitokitoki/20100425/p1</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq byte-compile-warnings
      '(free-vars unresolved callargs redefine obsolete noruntime
                  cl-functions interactive-only make-local))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">2.6</span> 起動時間の計測</h3>
<div class="outline-text-3" id="text-2-6">
<p>
<code>emacs-init-time</code> を実行すると，Emacsの起動にかかった時間が表示されます．個人的にはミリ秒表示が好きなので，手を加えます．元ネタは<a href="http://d.hatena.ne.jp/sugyan/20120120/1327037494">すぎゃーんメモ</a>からです．感謝．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook
          (<span style="color: #a020f0;">lambda</span> ()
            (message <span style="color: #8b2252;">"--- Emacs booting time: %.0f [msec]"</span>
                     (* 1000
                        (float-time (time-subtract
                                     after-init-time
                                     before-init-time))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">2.7</span> C-x C-c で容易にEmacsを終了させないように質問する</h3>
<div class="outline-text-3" id="text-2-7">
<p>
<code>y-or-n-p</code> を指定するだけです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq confirm-kill-emacs 'y-or-n-p)
</pre>
</div>

<p>
以前は， <code>C-x C-c</code> を以下の関数に割り当てて，任意の質問文で入力を求めていました．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Cite: http://flex.ee.uec.ac.jp/texi/emacs-jp/emacs-jp_12.html</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Cite: http://d.hatena.ne.jp/Ubuntu/20090417/1239934416</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">A simple solution is (setq confirm-kill-emacs 'y-or-n-p).</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">confirm-save-buffers-kill-emacs</span> (<span style="color: #228b22;">&amp;optional</span> arg)
  <span style="color: #8b2252;">"Show yes or no when you try to kill Emacs"</span>
  (interactive <span style="color: #8b2252;">"P"</span>)
  (<span style="color: #a020f0;">cond</span> (arg (save-buffers-kill-emacs))
        (t
         (<span style="color: #a020f0;">when</span> (yes-or-no-p <span style="color: #8b2252;">"Are you sure to quit Emacs now? "</span>)
           (save-buffers-kill-emacs)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">2.7.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-2-7-1">
<p>
Show yes or no when you try to kill Emacs<br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-x C-c"</span>) 'confirm-save-buffers-kill-emacs)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">2.8</span> Messages 出力を封じるためのマクロ</h3>
<div class="outline-text-3" id="text-2-8">
<p>
<code>shut-up.el</code> というマクロがあり，現在はそちらを使っています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">hoge</span> ()
  (interactive)
  (<span style="color: #a020f0;">let</span> ((message-log-max nil))
    (shut-up (recentf-save-list))))
</pre>
</div>

<p>
（参考）<a href="http://qiita.com/itiut@github/items/d917eafd6ab255629346">Emacs - エコーエリアや <b>Messages</b> バッファにメッセージを表示させたくない - Qiita</a><br  />
</p>

<p>
非常に強力です．自分は， <code>recentf-save-list</code> を <code>find-file-hook</code> にぶら下げていますが，そのままだと <code>org-agenda</code> の初回実行時にたくさんのメッセージが出てしまうところ，このマクロを介すだけで抑制可能です． <code>message-log-max</code> で制御できるのがすごい．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">with-suppressed-message</span> (<span style="color: #228b22;">&amp;rest</span> body)
  <span style="color: #8b2252;">"Suppress new messages temporarily in the echo area and the `</span><span style="color: #8b2252;">*Messages*</span><span style="color: #8b2252;">' buffer while BODY is evaluated."</span>
  (<span style="color: #a020f0;">declare</span> (indent 0))
  (<span style="color: #a020f0;">let</span> ((message-log-max nil))
    `(<span style="color: #a020f0;">with-temp-message</span> (or (current-message) <span style="color: #8b2252;">""</span>) ,@body)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline31" class="outline-2">
<h2 id="orgheadline31"><span class="section-number-2">3</span> コア設定</h2>
<div class="outline-text-2" id="text-3">
<p>
Emacs を操作して文書編集する上で欠かせない設定です．<br  />
</p>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">3.1</span> 言語／文字コード</h3>
<div class="outline-text-3" id="text-3-1">
<p>
徹底的にUTF-8に合わせます．<br  />
</p>

<p>
<code>save-buffer-coding-system</code> を設定すると， <code>buffer-file-coding-system</code> の値を無視して，指定した <code>save-buffer-coding-system</code> の値でバッファを保存する．つまり， <code>buffer-file-coding-system</code> に統一するなら設定不要．<br  />
</p>

<p>
<code>set-default-coding-systems</code> か <code>prefer-coding-system</code> を設定すると，同時に <code>file-name-coding-system=，=set-terminal-coding-system=，=set-keyboard-coding-system</code> も同時に設定される．=prefer-coding-system= は，文字コード自動判定の最上位判定項目を設定する．<br  />
</p>

<p>
<code>set-buffer-file-coding-system</code> は，Xとのデータやりとりを設定する．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8-unix)
(set-language-environment <span style="color: #8b2252;">"Japanese"</span>)
(set-locale-environment <span style="color: #8b2252;">"en_US.UTF-8"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">"ja_JP.UTF-8"</span>
(set-default-coding-systems 'utf-8-unix)
(set-selection-coding-system 'utf-8-unix)
(set-buffer-file-coding-system 'utf-8-unix)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-clipboard-coding-system 'utf-8) <span style="color: #b22222;">; </span><span style="color: #b22222;">included by set-selection-coding-system</span>
(set-keyboard-coding-system 'utf-8) <span style="color: #b22222;">; </span><span style="color: #b22222;">configured by prefer-coding-system</span>
(set-terminal-coding-system 'utf-8) <span style="color: #b22222;">; </span><span style="color: #b22222;">configured by prefer-coding-system</span>
(setq buffer-file-coding-system 'utf-8) <span style="color: #b22222;">; </span><span style="color: #b22222;">utf-8-unix</span>
(setq save-buffer-coding-system 'utf-8-unix) <span style="color: #b22222;">; </span><span style="color: #b22222;">nil</span>
(set-buffer-process-coding-system 'utf-8 'utf-8)
(setq process-coding-system-alist
      (cons '(<span style="color: #8b2252;">"grep"</span> utf-8 . utf-8) process-coding-system-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15"><span class="section-number-3">3.2</span> 日本語入力</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Emacs23用にインラインパッチを適用している場合に使います．<br  />
Lion でも使える自分用にカスタマイズした <a href="https://gist.github.com/1532344">inline-patch</a> を使っています．<br  />
</p>

<p>
Emacs24用には，Mavericks対応した<a href="https://gist.github.com/takaxp/9658281">パッチ</a>を使っています．<br  />
</p>

<p>
Emacs24.5用は<a href="https://gist.github.com/takaxp/1d91107b311b63b57529">こちら</a>．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (fboundp 'mac-add-key-passed-to-system)
  (setq default-input-method <span style="color: #8b2252;">"MacOSX"</span>)
  (mac-add-key-passed-to-system 'shift))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">3.3</span> [ag.el] 検索</h3>
<div class="outline-text-3" id="text-3-3">
<p>
検索には <code>The Silver Searcher</code> を使います．あらかじめインストールしておく必要があります．MacPorts の場合，the_silver_searcher の名称で頒布されています． <code>exec-path</code> に <code>/opt/local/bin</code> が含まれていることを確認してください．<br  />
</p>

<pre class="example">
the_silver_searcher @0.18.1 (textproc)
    A code-searching tool similar to ack, but faster.
</pre>

<p>
カスタマイズした関数を <code>C-M-f</code> にぶら下げています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(my:ag) <span style="color: #8b2252;">"ag"</span> nil t nil
       '((setq ag-highlight-search t)
         (setq ag-reuse-buffers t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">nil=&#21029;&#12454;&#12451;&#12531;&#12489;&#12454;&#12364;&#38283;&#12367;</span>
         (setq ag-reuse-window t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">nil=&#32080;&#26524;&#12434;&#36984;&#25246;&#26178;&#12395;&#21029;&#12454;&#12451;&#12531;&#12489;&#12454;&#12395;&#32080;&#26524;&#12434;&#20986;&#12377;</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">q &#12391;&#12454;&#12451;&#12531;&#12489;&#12454;&#12434;&#25244;&#12369;&#12427;</span>
         (define-key ag-mode-map (kbd <span style="color: #8b2252;">"q"</span>) 'delete-window)

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:ag</span> ()
           (interactive)
           (call-interactively 'ag)
           (switch-to-buffer-other-frame <span style="color: #8b2252;">"*ag search*"</span>))))

  (global-set-key (kbd <span style="color: #8b2252;">"C-M-f"</span>) 'my:ag))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">3.4</span> 基本キーバインド</h3>
<div class="outline-text-3" id="text-3-4">
<p>
次の機能にキーバインドを設定する．<br  />
</p>

<ul class="org-ul">
<li>Cmd+V でペースト（Mac用）<br  /></li>
<li>Cmd と Option を逆にする（Mac用）<br  /></li>
<li>削除<br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eq window-system 'ns)
  (global-set-key (kbd <span style="color: #8b2252;">"M-v"</span>) 'yank)
  (setq ns-command-modifier 'meta)
  (setq ns-alternate-modifier 'super)
  (global-set-key [ns-drag-file] 'ns-find-file) <span style="color: #b22222;">; </span><span style="color: #b22222;">D&amp;D for Emacs23</span>
  (setq ns-pop-up-frames nil)) <span style="color: #b22222;">; </span><span style="color: #b22222;">D&amp;D for Emacs23</span>
(global-set-key [delete] 'delete-char)
(global-set-key [kp-delete] 'delete-char)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">3.5</span> ナローイングするか</h3>
<div class="outline-text-3" id="text-3-5">
<p>
ナローイングを有効にする．デフォルトは，ナローイングを知らないユーザが「データが消えた！」と勘違いしないように，無効になっている．<br  />
</p>

<p>
Org でナローイングを使う場合は，特に設定しなくてもよい．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(put 'narrow-to-region 'disabled nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">3.6</span> バッファの終わりでのnewlineを禁止する</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid adding a new line at the end of buffer</span>
(setq next-line-add-newlines nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">3.7</span> 常に最終行に一行追加する</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Limit the final word to a line break code (automatically correct)</span>
(setq require-final-newline t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21"><span class="section-number-3">3.8</span> 長い文章を右端で常に折り返す</h3>
<div class="outline-text-3" id="text-3-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq truncate-lines nil)
(setq truncate-partial-width-windows nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22"><span class="section-number-3">3.9</span> バッファが外部から編集された場合に自動で再読み込みする</h3>
<div class="outline-text-3" id="text-3-9">
<p>
<code>auto-save-buffers</code> を使っていれば，バッファは常に保存された状態になるため，revert が即座に反映される．適宜バックアップツールと組み合わせないと不安な場合もあるかも．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-auto-revert-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23"><span class="section-number-3">3.10</span> [uniquify.el] 同じバッファ名が開かれた場合に区別する</h3>
<div class="outline-text-3" id="text-3-10">
<p>
ビルトインの <code>uniquify</code> を使います．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq uniquify-buffer-name-style 'post-forward-angle-brackets)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24"><span class="section-number-3">3.11</span> マウスで選択した領域を自動コピー</h3>
<div class="outline-text-3" id="text-3-11">
<p>
マウスで選択すると，勝手にペーストボードにデータが流れます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-drag-copy-region t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27"><span class="section-number-3">3.12</span> パッケージ管理</h3>
<div class="outline-text-3" id="text-3-12">
<p>
<a href="https://github.com/cask/cask">Cask</a>+Palletの環境を採用しました．それまでは，特定のディレクトリに必要な elisp をダウンロードしておいたり，git から取り寄せて，それらをload-pathに設定するスクリプトを準備するなど，個人的なルールで運用してきましたが，希望の機能をCaskが提供しているので，Emacs24.4になるタイミングで移行しました．<br  />
</p>

<p>
ただし，頒布元が危ういようなファイルはやはり個人で管理しておきたいので，Caskで管理する対象は，MEPLA経由で入手可能なメンテナンスが行き届いたパッケージに限定しています．また，普通の使い方（casl.elを読み込んで初期化）をしていると，起動時に少し時間を要するので，所定のディレクトリにCaskで取り寄せたすべてのファイルをコピーして，そのディレクトリだけをload-pathで指定するという使い方もしています．今のところ大きな問題は生じていません．<br  />
</p>
</div>

<div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">3.12.1</span> Cask のセットアップ</h4>
<div class="outline-text-4" id="text-3-12-1">
<p>
以下は自分用のメモです．<br  />
</p>

<ol class="org-ol">
<li>curl -fsSkL <a href="https://raw.github.com/cask/cask/master/go">https://raw.github.com/cask/cask/master/go</a> | python<br  /></li>
<li>~/.cask/bin に PATH を通す (see .zshenv, export PATH="${HOME}/.cask/bin:{$PATH}")<br  /></li>
<li>cask upgrade<br  /></li>
<li>cd ~/.emacs.d<br  /></li>
<li>cask init            ;; ~/.emacs.d/Cask が存在しない場合だけ実行<br  /></li>
<li>cask install<br  /></li>
</ol>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">3.12.2</span> load-path を一箇所にして起動を高速化</h4>
<div class="outline-text-4" id="text-3-12-2">
<p>
Caskを使うと，個々のパッケージが独立にload-pathに設定されます．これにより依存関係がスッキリするわけですが，数が増えると起動時間が遅くなります．重いです．自分の例では，800[ms]のオーバーヘッドでした．これを避けるには，load-pathを一箇所に集約することが効きます．オーバーヘッドは約100[ms]まで集約できました．場合によっては依存関係に問題が生じる可能性がありますが，今のところは問題になっていません．<br  />
</p>

<ol class="org-ol">
<li><code>~/.emacs.d/.cask/package</code> なるフォルダを作る<br  /></li>
<li><code>~/.emacs.d/.cask/24.4.1/elpa/*/*</code> と <code>~/.emacs.d/.cask/24.4.1/elpa/*/lisp/*</code> をすべて上記フォルダにコピー<br  /></li>
<li>~/.emacs で，~/.emacs.d/.cask/package を load-path に設定し，Caskは読み込まない<br  /></li>
</ol>

<p>
<code>M-x lis-packges</code> を使って新しいパッケージをインストールする時だけ，以下のフラグを nil に書き換えてEmacsを起動します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">if</span> t
    (load-path-setter '(<span style="color: #8b2252;">"~/.emacs.d/.cask/package"</span>) 'load-path)
  (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cask</span> <span style="color: #8b2252;">"~/.cask/cask.el"</span> t) (cask-initialize)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">800[ms]</span>
  (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">pallet</span> nil t) (pallet-mode t)))
</pre>
</div>

<p>
Cask で新しいパッケージを導入したり，既存のパッケージを更新したら，その都度，package ディレクトリにコピーします．手動でやると面倒なので，次のようなスクリプトで対処します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/bin/</span><span style="color: #a020f0;">sh</span>
<span style="color: #a0522d;">CASKPATH</span>=/Users/taka/.emacs.d/.cask
<span style="color: #a0522d;">VERSION</span>=24.5.1
<span style="color: #a0522d;">SUBDIR</span>=package
<span style="color: #a020f0;">if</span> [ -d <span style="color: #8b2252;">"$CASKPATH/$SUBDIR"</span> ]; <span style="color: #a020f0;">then</span>
    <span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"--- Remove $CASKPATH/$SUBDIR"</span>
    rm -rf $<span style="color: #a0522d;">CASKPATH</span>/$<span style="color: #a0522d;">SUBDIR</span>
<span style="color: #a020f0;">fi</span>
mkdir -p $<span style="color: #a0522d;">CASKPATH</span>/$<span style="color: #a0522d;">SUBDIR</span>

<span style="color: #483d8b;">cd</span> ~/.emacs.d
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"--- Cask install"</span>
cask install

<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"--- Cask update"</span>
cask update

<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"--- Copying elisp files"</span>
/bin/cp -rf /Users/taka/.emacs.d/.cask/$<span style="color: #a0522d;">VERSION</span>/elpa/*/* $<span style="color: #a0522d;">CASKPATH</span>/$<span style="color: #a0522d;">SUBDIR</span>
<span style="color: #483d8b;">cd</span> $<span style="color: #a0522d;">CASKPATH</span>/$<span style="color: #a0522d;">SUBDIR</span>

<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"--- Done"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28"><span class="section-number-3">3.13</span> インデント</h3>
<div class="outline-text-3" id="text-3-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default tab-width 2)
(setq-default indent-tabs-mode nil)
(setq indent-line-function 'insert-tab)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">'(lambda()</span>
<span style="color: #b22222;">;;              </span><span style="color: #b22222;">(setq indent-line-function 'insert-tab)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29"><span class="section-number-3">3.14</span> [aggressive-indent] 即時バッファ整形</h3>
<div class="outline-text-3" id="text-3-14">
<p>
特定のメジャーモードで，とにかく整形しまくります．MELPAから入手できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(aggressive-indent-mode) <span style="color: #8b2252;">"aggressive-indent"</span> nil t nil
       '())
  (add-hook 'emacs-lisp-mode-hook 'aggressive-indent-mode)
  (add-hook 'lisp-mode-hook 'aggressive-indent-mode)
  (add-hook 'perl-mode-hook 'aggressive-indent-mode)
  (add-hook 'c-mode-common-hook 'aggressive-indent-mode)
  (add-hook 'nxml-mode-hook 'aggressive-indent-mode)
  (add-hook 'web-mode-hook 'aggressive-indent-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30"><span class="section-number-3">3.15</span> ファイルリンクを辿る時に確認のメッセージを出さない</h3>
<div class="outline-text-3" id="text-3-15">
<p>
そのまま辿ってファイルオープンします．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq vc-follow-symlinks t)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">autorevert.el &#12398;&#35501;&#12415;&#36796;&#12415;&#12364;&#24517;&#35201;</span>
(setq auto-revert-check-vc-info t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-2">
<h2 id="orgheadline45"><span class="section-number-2">4</span> カーソル移動</h2>
<div class="outline-text-2" id="text-4">
<p>
カーソルの移動は，次のポリシーに従っています．デフォルトではC-v/M-v で上下移動になっているが，M-v は windows のペーストに対応するので混乱を招くので使っていません．ページスクロールは標準の <code>cua-base.el</code> に記載されています．<br  />
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">行移動</td>
<td class="org-left">C-n/C-p</td>
</tr>

<tr>
<td class="org-left">ページ移動（スクロール）</td>
<td class="org-left">M-n/M-p</td>
</tr>

<tr>
<td class="org-left">ウィンドウ移動</td>
<td class="org-left">C-M-n/C-M-p</td>
</tr>

<tr>
<td class="org-left">バッファ切り替え</td>
<td class="org-left">M-]/M-[</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32"><span class="section-number-3">4.1</span> バッファ内のカーソル移動</h3>
<div class="outline-text-3" id="text-4-1">
<p>
先頭に移動，最終行に移動，ページ単位の進む，ページ単位の戻る，行数を指定して移動<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-M-t"</span>) 'beginning-of-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-b"</span>) 'end-of-buffer)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Backward page scrolling instead of M-v</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-p"</span>) 'scroll-down)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Frontward page scrolling instead of C-v</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-n"</span>) 'scroll-up)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move cursor to a specific line</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c g"</span>) 'goto-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33"><span class="section-number-3">4.2</span> バッファ間のカーソル移動</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<code>C-c o</code> の代わりに，ウィンドウの移動をワンアクションで行う．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-M-p"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (other-window -1)))
(global-set-key (kbd <span style="color: #8b2252;">"C-M-n"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (other-window 1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-3">
<h3 id="orgheadline34"><span class="section-number-3">4.3</span> スクロールを制御</h3>
<div class="outline-text-3" id="text-4-3">
<p>
一行づつスクロールさせます．デフォルトではバッファの端でスクロールすると，半画面移動します．また，上下の端にカーソルがどのくらい近づいたらスクロールとみなすかも指定できます．<br  />
</p>

<p>
<a href="http://marigold.sakura.ne.jp/devel/emacs/scroll/index.html">http://marigold.sakura.ne.jp/devel/emacs/scroll/index.html</a><br  />
</p>

<p>
非ASCII文字を扱っているときに一行づつスクロールしない場合は，scroll-conservatively の値を1ではなく大きい数字にすると直るかもしれません．<br  />
</p>

<p>
<a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a><br  />
</p>

<p>
scroll-margin を指定すると，カーソルがウィンドウの端から離れた状態でスクロールされます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll window on a line-by-line basis</span>
(setq scroll-conservatively 1000)
(setq scroll-step 1)
(setq scroll-margin 0) <span style="color: #b22222;">; </span><span style="color: #b22222;">default=0</span>
</pre>
</div>

<p>
スクロール時のジャンプが気になる場合は次のパッケージを使うとよいです．<br  />
</p>

<p>
<a href="http://adamspiers.org/computing/elisp/smooth-scrolling.el">http://adamspiers.org/computing/elisp/smooth-scrolling.el</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">smooth-scrolling</span> nil t)
  (setq smooth-scroll-margin 1))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(smooth-scrolling) <span style="color: #8b2252;">"smooth-scrolling"</span> nil t)
  (eval-after-load <span style="color: #8b2252;">"smooth-scrolling"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq smooth-scroll-margin 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35"><span class="section-number-3">4.4</span> スクロールで表示を重複させる行数</h3>
<div class="outline-text-3" id="text-4-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll window on a page-by-pabe basis with N line overlapping</span>
(setq next-screen-context-lines 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline37" class="outline-3">
<h3 id="orgheadline37"><span class="section-number-3">4.5</span> [SmoothScroll.el] カーソル固定でスクロールする</h3>
<div class="outline-text-3" id="text-4-5">
<p>
<a href="https://raw.github.com/takaxp/EmacsScripts/master/SmoothScroll.el">https://raw.github.com/takaxp/EmacsScripts/master/SmoothScroll.el</a><br  />
<a href="https://github.com/pglotov/EmacsScripts/blob/master/SmoothScroll.el">https://github.com/pglotov/EmacsScripts/blob/master/SmoothScroll.el</a><br  />
</p>

<p>
カーソル位置と行を固定してバッファを背景スクロールできます．<br  />
</p>

<p>
オリジナルのままだとコンパイル時に警告がでるので， <code>line-move-visual</code> で書き換えています．残念ながら最近は使っていません．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(scroll-one-up scroll-one-down) <span style="color: #8b2252;">"smoothscroll"</span> nil t)
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload-if-found
 '(scroll-one-up scroll-one-down) <span style="color: #8b2252;">"smoothscroll"</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36"><span class="section-number-4">4.5.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"s-&lt;up&gt;"</span>) 'scroll-one-down)
(global-set-key (kbd <span style="color: #8b2252;">"s-&lt;down&gt;"</span>) 'scroll-one-up)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-3">
<h3 id="orgheadline38"><span class="section-number-3">4.6</span> [smooth-scroll.el] 滑らかなスクロール</h3>
<div class="outline-text-3" id="text-4-6">
<p>
良い感じです．スススっとスクロールします．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(smooth-scroll) <span style="color: #8b2252;">"smooth-scroll"</span> nil t nil
 '((smooth-scroll-mode t)
   (setq smooth-scroll/vscroll-step-size 6)
   (setq smooth-scroll/hscroll-step-size 6)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-3">
<h3 id="orgheadline40"><span class="section-number-3">4.7</span> [point-undo.el] カーソル位置を簡単にたどる</h3>
<div class="outline-text-3" id="text-4-7">
<p>
autoload や autoload-if-found で定義すると，使いたい時に履歴が取れていないのでよろしくないです．起動時に有効化します． bm.el で明示的にマーカーを残して履歴をたどる方が気に入っているので，最近は point-undo を使っていません．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">point-undo</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">4.7.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
シングルキーを割り当てておくと使いやすいです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">[point-undo.el] Move the cursor to the previous position</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f7&gt;"</span>) 'point-undo)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">[point-undo.el] Redo of point-undo</span>
(global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f7&gt;"</span>) 'point-redo)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline42" class="outline-3">
<h3 id="orgheadline42"><span class="section-number-3">4.8</span> [cycle-buffer.el] カレントバッファの表示切り替え</h3>
<div class="outline-text-3" id="text-4-8">
<p>
<a href="http://www.emacswiki.org/emacs/download/cycle-buffer.el">http://www.emacswiki.org/emacs/download/cycle-buffer.el</a><br  />
</p>

<p>
Cycle-buffer を使うと，バッファの履歴をスライドショーのようにたどれます．ミニバッファに前後の履歴が表示されるので，何回キーを押せばいいかの目安になります．それを超える場合には，おとなしくバッファリストを使います．直近数件のバッファをたどるのに便利です．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t nil
 '((setq cycle-buffer-allow-visible t)
   (setq cycle-buffer-show-length 12)
   (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">4.8.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"M-]"</span>) 'cycle-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"M-["</span>) 'cycle-buffer-backward)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">4.9</span> [bm.el] カーソル位置をブックマークして追う</h3>
<div class="outline-text-3" id="text-4-9">
<p>
<a href="https://github.com/joodland/bm">bm.el</a>は，カーソル位置をブックマークしておくためのツールです． <code>point-undo</code> と比較して，ユーザが明示的に位置を保存でき，見た目にも使いやすいです．以下の例では， <code>org-mode</code> のツリー内にブックマークがある時にも，上手い具合に表示ができるように調整してあります．カーソル移動は，順方向（ <code>bm-next</code> ）にだけ使っています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(bm-toggle my:bm-next bm-buffer-save bm-buffer-restore
                   bm-buffer-save-all bm-repository-save
                   bm-repository-load) <span style="color: #8b2252;">"bm"</span> nil t nil
                   '((setq-default bm-buffer-persistence t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">t</span>
                     (setq bm-repository-file <span style="color: #8b2252;">"~/Dropbox/emacs.d/.bookmark"</span>)
                     <span style="color: #b22222;">;; </span><span style="color: #b22222;">autoload &#12392;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12391;&#12399;&#28961;&#24847;&#21619;</span>
                     <span style="color: #b22222;">;;</span><span style="color: #b22222;">&#65288;after-init-hook &#12434;&#21033;&#29992;&#12379;&#12424;&#65289;</span>
                     <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq bm-restore-repository-on-load t)</span>
                     (setq bm-persistent-face 'bm-face)
                     (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:bm-toggle</span> ()
                       <span style="color: #8b2252;">"bm-toggle with updating history"</span>
                       (interactive)
                       (bm-toggle)
                       (bm-save))

                     (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:bm-next</span> ()
                       <span style="color: #8b2252;">"bm-next with org-mode"</span>
                       (interactive)
                       (bm-next)
                       (<span style="color: #a020f0;">when</span> (and (equal major-mode 'org-mode)
                                  (not (org-before-first-heading-p)))
                         (widen)
                         (org-overview)
                         (org-reveal)
                         (org-cycle-hide-drawers 'all)
                         (org-show-entry)
                         (show-children)
                         (org-show-siblings)))))

  (add-hook 'after-init-hook 'bm-repository-load)
  (add-hook 'find-file-hook 'bm-buffer-restore)
  (add-hook 'after-revert-hook 'bm-buffer-restore)
  (add-hook 'kill-buffer-hook 'bm-buffer-save)
  (add-hook 'after-save-hook 'bm-buffer-save)
  (add-hook 'vc-before-checkin-hook 'bm-buffer-save)
  (add-hook 'kill-emacs-hook 'bm-save)

  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f10&gt;"</span>) 'my:bm-toggle)
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;C-f10&gt;"</span>) 'my:bm-next))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline44" class="outline-3">
<h3 id="orgheadline44"><span class="section-number-3">4.10</span> [centered-cursor-mode.el] カーソル位置を中央に固定</h3>
<div class="outline-text-3" id="text-4-10">
<p>
<code>isearch-mode</code> の時だけ有効にしています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(centered-cursor-mode) <span style="color: #8b2252;">"centered-cursor-mode"</span> nil t nil
       '())
  (add-hook 'isearch-mode-hook
            '(<span style="color: #a020f0;">lambda</span> () (interactive) (centered-cursor-mode 1)))
  (add-hook 'isearch-mode-end-hook
            '(<span style="color: #a020f0;">lambda</span> () (interactive) (centered-cursor-mode -1))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline82" class="outline-2">
<h2 id="orgheadline82"><span class="section-number-2">5</span> 編集サポート</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46"><span class="section-number-3">5.1</span> 矩形編集／連番入力</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Built-in の cua-base.el（CUA-mode）を使う．矩形選択は，領域選択後 <code>cua-toggle-rectangle-mark</code> でもできるが， 24.4 からは， <code>C-x SPC</code> を押下すると矩形モードに入り直感的に矩形選択ができるようになっています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cua-base</span>)
(cua-mode 1)
(setq cua-enable-cua-keys nil)
</pre>
</div>

<p>
矩形選択した後に， <code>M-n</code> を押すと，連番をふれる．開始値，増加値を入力してから，hoge%03d.pgm などとすれば，hoge001，hoge002，，，と入力される．これと，org-mode の表機能（ <code>C-c |</code> で選択部分を簡単に表にできる）を組み合わせれば，連番で数値をふったテーブルを容易に作れる．<br  />
</p>

<p>
なお，標準の rect.el に以下の機能が実装されている．<br  />
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">矩形切り取り</td>
<td class="org-left">C-x r k</td>
</tr>

<tr>
<td class="org-left">矩形削除</td>
<td class="org-left">C-x r d</td>
</tr>

<tr>
<td class="org-left">矩形貼り付け</td>
<td class="org-left">C-x r y</td>
</tr>

<tr>
<td class="org-left">矩形先頭に文字を挿入</td>
<td class="org-left">C-x r t</td>
</tr>

<tr>
<td class="org-left">矩形を空白に変換する</td>
<td class="org-left">C-x r c</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline47" class="outline-3">
<h3 id="orgheadline47"><span class="section-number-3">5.2</span> Yank時に装飾を取る</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq yank-excluded-properties t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline48" class="outline-3">
<h3 id="orgheadline48"><span class="section-number-3">5.3</span> ファイル保存時に時間を記録する</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Built-in の time-stamp.el を使う．<br  />
</p>

<p>
バッファの保存時にタイムスタンプを記録する．以下の設定では，バッファの先頭から10行以内に，"Last Update: " があると，"Last Update: 2011-12-31@12:00"のようにタイムスタンプが記録される．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">org-tre-slide &#12364;&#26377;&#21177;&#12394;&#12425;&#12479;&#12452;&#12512;&#12473;&#12479;&#12531;&#12503;&#12434;&#26356;&#26032;&#12375;&#12394;&#12356;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#65288;Undo&#31684;&#22258;&#12364;&#38480;&#23450;&#12373;&#12428;&#12390;&#12375;&#12414;&#12358;&#12383;&#12417;&#65289;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">#+UPDATE &#29992;</span>
(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(update-stamp) <span style="color: #8b2252;">"update-stamp"</span> nil t nil
       '((setq update-stamp-start <span style="color: #8b2252;">"UPDATE:[ \t]*"</span>)
         (setq update-stamp-format <span style="color: #8b2252;">"%02H:%02M:%02S"</span>)
         (setq update-stamp-end <span style="color: #8b2252;">"$"</span>)
         (setq update-stamp-line-limit 10))) <span style="color: #b22222;">; </span><span style="color: #b22222;">def=8</span>

  (add-hook 'before-save-hook
            '(<span style="color: #a020f0;">lambda</span> ()
               (<span style="color: #a020f0;">if</span> (boundp 'org-tree-slide-mode)
                   (<span style="color: #a020f0;">unless</span> org-tree-slide-mode) (update-stamp))
               (update-stamp))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">#+DATE &#29992;</span>
(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(time-stamp) <span style="color: #8b2252;">"time-stamp"</span> nil t nil
       '((setq time-stamp-start <span style="color: #8b2252;">"DATE:[ \t]*"</span>)
         (setq time-stamp-format <span style="color: #8b2252;">"%04y-%02m-%02d"</span>)
         (setq time-stamp-end <span style="color: #8b2252;">"$"</span>)
         (setq time-stamp-line-limit 10) <span style="color: #b22222;">; </span><span style="color: #b22222;">def=8</span>
         ))

  (add-hook 'before-save-hook
            '(<span style="color: #a020f0;">lambda</span> ()
               (<span style="color: #a020f0;">if</span> (boundp 'org-tree-slide-mode)
                   (<span style="color: #a020f0;">unless</span> org-tree-slide-mode) (time-stamp))
               (time-stamp))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'before-save-hook 'time-stamp)
(eval-after-load <span style="color: #8b2252;">"time-stamp"</span>
  '(<span style="color: #a020f0;">progn</span>
     (setq time-stamp-start <span style="color: #8b2252;">"Last Update: "</span>)
     (setq time-stamp-format <span style="color: #8b2252;">"%04y-%02m-%02d@%02H:%02M"</span>)
     (setq time-stamp-end <span style="color: #8b2252;">"$"</span>)
     (setq time-stamp-line-limit 10))) <span style="color: #b22222;">; </span><span style="color: #b22222;">def=8</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49"><span class="section-number-3">5.4</span> 選択リージョンを使って検索</h3>
<div class="outline-text-3" id="text-5-4">
<p>
検索語をミニバッファに入力するのが面倒なので，リージョンをそのまま検索語として利用します．<br  />
</p>

<p>
<a href="http://dev.ariel-networks.com/articles/emacs/part5/">http://dev.ariel-networks.com/articles/emacs/part5/</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defadvice</span> <span style="color: #0000ff;">isearch-mode</span>
    (around isearch-mode-default-string
            (forward <span style="color: #228b22;">&amp;optional</span> regexp op-fun recursive-edit word-p) activate)
  (<span style="color: #a020f0;">if</span> (and transient-mark-mode mark-active (not (eq (mark) (point))))
      (<span style="color: #a020f0;">progn</span>
        (isearch-update-ring (buffer-substring-no-properties (mark) (point)))
        (deactivate-mark)
        ad-do-it
        (<span style="color: #a020f0;">if</span> (not forward)
            (isearch-repeat-backward)
          (goto-char (mark))
          (isearch-repeat-forward)))
    ad-do-it))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline50" class="outline-3">
<h3 id="orgheadline50"><span class="section-number-3">5.5</span> ChangeLog モード</h3>
<div class="outline-text-3" id="text-5-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name <span style="color: #8b2252;">"Your NAME"</span>)
(setq user-mail-address <span style="color: #8b2252;">"your@address.com"</span>)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'change-log-mode-hook
          '(<span style="color: #a020f0;">lambda</span>()
             (setq tab-width 4)
             (setq left-margin 4)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline51" class="outline-3">
<h3 id="orgheadline51"><span class="section-number-3">5.6</span> テキストモード</h3>
<div class="outline-text-3" id="text-5-6">
<p>
<a href="http://d.hatena.ne.jp/NeoCat/20080211">http://d.hatena.ne.jp/NeoCat/20080211</a><br  />
</p>

<p>
とは言っても，Org-modeを知ってから <code>.txt</code> もテキストモードで開かなくなったので，ほぼ無意味な設定となりました．しかも， <code>nxml-mode</code> で <code>TAB</code> が効かなくなる現象が起きているので，以下の設定はしない方がよさげ．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook
          '(<span style="color: #a020f0;">lambda</span>()
             (setq tab-width 4)
             (setq indent-line-function 'tab-to-tab-stop)             
             (setq tab-stop-list
                   '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60
                       64 68 72 76 80))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline52" class="outline-3">
<h3 id="orgheadline52"><span class="section-number-3">5.7</span> C/C++モード</h3>
<div class="outline-text-3" id="text-5-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(push '(<span style="color: #8b2252;">"\\.h$"</span> . c++-mode) auto-mode-alist)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline53" class="outline-3">
<h3 id="orgheadline53"><span class="section-number-3">5.8</span> C#モード</h3>
<div class="outline-text-3" id="text-5-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(csharp-mode) <span style="color: #8b2252;">"csharp-mode"</span> <span style="color: #8b2252;">"Major mode for editing C# mode."</span> t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.cs$"</span> . csharp-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54"><span class="section-number-3">5.9</span> Infoモード</h3>
<div class="outline-text-3" id="text-5-9">
<p>
Org-mode の日本語翻訳済みinfoを読むための設定．<a href="https://github.com/org-mode-doc-ja/org-ja">翻訳プロジェクト</a>で頒布しています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(info org-info-ja) <span style="color: #8b2252;">"info"</span> nil t nil
 '((add-to-list 'Info-additional-directory-list
                (expand-file-name <span style="color: #8b2252;">"~/devel/mygit/org-ja/work/"</span>))
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-info-ja</span> (<span style="color: #228b22;">&amp;optional</span> node)
     <span style="color: #8b2252;">"(Japanese) Read documentation for Org-mode in the info system.</span>
<span style="color: #8b2252;">    With optional NODE, go directly to that node."</span>
     (interactive)
     (info (format <span style="color: #8b2252;">"(org-ja)%s"</span> (or node <span style="color: #8b2252;">""</span>))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline55" class="outline-3">
<h3 id="orgheadline55"><span class="section-number-3">5.10</span> Rモード</h3>
<div class="outline-text-3" id="text-5-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(R-mode R) <span style="color: #8b2252;">"ess-site"</span> <span style="color: #8b2252;">"Emacs Speaks Statistics mode"</span> t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.[rR]$"</span> . R-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline56" class="outline-3">
<h3 id="orgheadline56"><span class="section-number-3">5.11</span> nXMLモード</h3>
<div class="outline-text-3" id="text-5-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'nxml-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (define-key nxml-mode-map <span style="color: #8b2252;">"\r"</span> 'newline-and-indent)
             (setq auto-fill-mode -1)
             (setq nxml-slash-auto-complete-flag t)
             (setq tab-width 1)
             (setq nxml-child-indent 1)
             (setq indent-tabs-mode t)
             (setq nxml-attribute-indent 0)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline57" class="outline-3">
<h3 id="orgheadline57"><span class="section-number-3">5.12</span> yamlモード</h3>
<div class="outline-text-3" id="text-5-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(yaml-mode) <span style="color: #8b2252;">"yaml-mode"</span> nil t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.yml$"</span> . yaml-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline58" class="outline-3">
<h3 id="orgheadline58"><span class="section-number-3">5.13</span> jsonモード</h3>
<div class="outline-text-3" id="text-5-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(json-mode) <span style="color: #8b2252;">"json-mode"</span> nil t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.json$"</span> . json-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline59" class="outline-3">
<h3 id="orgheadline59"><span class="section-number-3">5.14</span> javascriptモード</h3>
<div class="outline-text-3" id="text-5-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(js2-mode) <span style="color: #8b2252;">"js2-mode"</span> nil t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.js$"</span> . js2-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline60" class="outline-3">
<h3 id="orgheadline60"><span class="section-number-3">5.15</span> csvモード</h3>
<div class="outline-text-3" id="text-5-15">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(csv-mode) <span style="color: #8b2252;">"csv-mode"</span> nil t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.csv$"</span> . csv-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline62" class="outline-3">
<h3 id="orgheadline62"><span class="section-number-3">5.16</span> スペルチェック</h3>
<div class="outline-text-3" id="text-5-16">
<p>
Built-in の ispell を使う．チェックエンジンは，aspell を利用する．<br  />
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">'ns</td>
<td class="org-left">sudo port install aspell aspell-dict-en</td>
</tr>

<tr>
<td class="org-left">'x32</td>
<td class="org-left">installer.exe and aspell-en from <a href="http://aspell.net/win32/">http://aspell.net/win32/</a></td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Use aspell for spell checking instead of ispell.</span>
(<span style="color: #a020f0;">when</span> (executable-find <span style="color: #8b2252;">"aspell"</span>)
  (eval-after-autoload-if-found
   '(ispell-region) <span style="color: #8b2252;">"ispell"</span> nil t nil
   '((setq-default ispell-program-name <span style="color: #8b2252;">"aspell"</span>)
     (<span style="color: #a020f0;">when</span> (eq window-system 'w32)
       (setq-default ispell-program-name
                     <span style="color: #8b2252;">"C:/Program Files/Aspell/bin/aspell.exe"</span>))
     <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq ispell-grep-command "grep")</span>
     <span style="color: #b22222;">;; </span><span style="color: #b22222;">for English and Japanese mixed</span>

     (add-to-list 'ispell-skip-region-alist '(<span style="color: #8b2252;">"[</span><span style="color: #8b2252;">^</span><span style="color: #8b2252;">\000-\377]"</span>))
     (setq ispell-dictionarry <span style="color: #8b2252;">"english"</span>)
     (setq ispell-personal-dictionary <span style="color: #8b2252;">"~/.emacs.d/.aspell.en.pws"</span>)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">This will also avoid an IM-OFF issue for flyspell-mode.</span>
     <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq ispell-aspell-supports-utf8 t)</span>
     <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq ispell-encoding8-command t)</span>
     (setq ispell-local-dictionary-alist
           '((nil <span style="color: #8b2252;">"[a-zA-Z]"</span> <span style="color: #8b2252;">"[</span><span style="color: #8b2252;">^</span><span style="color: #8b2252;">a-zA-Z]"</span> <span style="color: #8b2252;">"'"</span> t
                  (<span style="color: #8b2252;">"-d"</span> <span style="color: #8b2252;">"en"</span> <span style="color: #8b2252;">"--encoding=utf-8"</span>) nil utf-8))))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline61" class="outline-4">
<h4 id="orgheadline61"><span class="section-number-4">5.16.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-16-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Spell checking within a specified region</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c 0"</span>) 'ispell-region)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline63" class="outline-3">
<h3 id="orgheadline63"><span class="section-number-3">5.17</span> リアルタイムスペルチェック</h3>
<div class="outline-text-3" id="text-5-17">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/FlySpell">flyspell.el</a> を使います．<br  />
</p>

<p>
重いので現在は使っていません．<br  />
</p>

<p>
<a href="http://www.morishima.net/~naoto/fragments/archives/2005/12/20/flyspell/">http://www.morishima.net/~naoto/fragments/archives/2005/12/20/flyspell/</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">dolist</span>
    (hook
     '(text-mode-hook change-log-mode-hook c++-mode-hook
                      latex-mode-hook org-mode-hook))
  (add-hook hook (<span style="color: #a020f0;">lambda</span> () (flyspell-mode 1))))

(add-hook 'c++-mode-hook
          (<span style="color: #a020f0;">lambda</span> () (flyspell-prog-mode)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Auto complete &#12392;&#12398;&#34909;&#31361;&#12434;&#22238;&#36991;</span>
(ac-flyspell-workaround)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline64" class="outline-3">
<h3 id="orgheadline64"><span class="section-number-3">5.18</span> [latex-math-preview.el] TeX数式をプレビュー</h3>
<div class="outline-text-3" id="text-5-18">
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/latex-math-preview.el">http://www.emacswiki.org/emacs/latex-math-preview.el</a><br  /></li>
<li><a href="http://transitive.info/software/latex-math-preview/">http://transitive.info/software/latex-math-preview/</a><br  /></li>
</ul>

<p>
以下の設定では， 数式で <code>&lt;f7&gt;</code> を押すとプレビューが走り，さらに <code>&lt;f7&gt;</code> を押すとプレビューウィンドウを閉じるように動作します．通常，=q= でプレビューを閉じられます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found       
       '(latex-math-preview-expression
         latex-math-preview-insert-symbol
         latex-math-preview-save-image-file
         latex-math-preview-beamer-frame)
       <span style="color: #8b2252;">"latex-math-preview"</span> nil t nil
       '((define-key latex-math-preview-expression-mode-map (kbd <span style="color: #8b2252;">"&lt;f7&gt;"</span>)
           'latex-math-preview-delete-buffer)))
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f7&gt;"</span>) 'latex-math-preview-expression))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline65" class="outline-3">
<h3 id="orgheadline65"><span class="section-number-3">5.19</span> [po-mode.el] 翻訳ファイルの編集</h3>
<div class="outline-text-3" id="text-5-19">
<p>
<a href="http://www.emacswiki.org/emacs/PoMode">http://www.emacswiki.org/emacs/PoMode</a><br  />
<a href="http://www.emacswiki.org/emacs/po-mode+.el">http://www.emacswiki.org/emacs/po-mode+.el</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;</span><span style="color: #b22222;">(autoload 'po-mode "po-mode+" nil nil)</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(autoload 'po-mode "po-mode" nil t)</span>
(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(po-mode) <span style="color: #8b2252;">"po-mode"</span> nil t nil
       '())
  (push '(<span style="color: #8b2252;">"\\.po[tx]?\\'</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">\\.po\\$"</span> . po-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline66" class="outline-3">
<h3 id="orgheadline66"><span class="section-number-3">5.20</span> [word-count.el] リージョン内の文字をカウントする</h3>
<div class="outline-text-3" id="text-5-20">
<p>
有効な頒布元に変更があった．<a href="http://www.emacswiki.org/emacs/WordCount">word-count.el</a> から新しい頒布元にたどりつける．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(word-count-mode) <span style="color: #8b2252;">"word-count"</span> <span style="color: #8b2252;">"Minor mode to count words."</span> t nil
       '())
  (global-set-key (kbd <span style="color: #8b2252;">"M-+"</span>) 'word-count-mode))
</pre>
</div>

<p>
と思ったら，ビルドインの simple.el に十分な機能なのがあった．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"M-="</span>) 'count-words)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline67" class="outline-3">
<h3 id="orgheadline67"><span class="section-number-3">5.21</span> [yatex.el] YaTeXモード</h3>
<div class="outline-text-3" id="text-5-21">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(yatex-mode) <span style="color: #8b2252;">"yatex"</span> <span style="color: #8b2252;">"Yet Another LaTeX mode"</span> t nil
       '((setq YaTeX-kanji-code 4))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">1=Shift JIS, 2=JIS, 3=EUC, 4=UTF-8</span>
  (push '(<span style="color: #8b2252;">"\\.tex$"</span> . yatex-mode) auto-mode-alist)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable auto line break</span>
  (add-hook 'yatex-mode-hook
            '(<span style="color: #a020f0;">lambda</span> ()
               (setq auto-fill-function nil))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline68" class="outline-3">
<h3 id="orgheadline68"><span class="section-number-3">5.22</span> [wclock.el] 世界時計</h3>
<div class="outline-text-3" id="text-5-22">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs">http://pastelwill.jp/wiki/doku.php?id=emacs</a><br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 'wclock <span style="color: #8b2252;">"wclock"</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline69" class="outline-3">
<h3 id="orgheadline69"><span class="section-number-3">5.23</span> [yasnippet.el] Emacs用のテンプレートシステム</h3>
<div class="outline-text-3" id="text-5-23">
<p>
<a href="https://github.com/capitaomorte/yasnippet">https://github.com/capitaomorte/yasnippet</a><br  />
</p>

<ul class="org-ul">
<li><a href="http://yasnippet-doc-jp.googlecode.com/svn/trunk/doc-jp/index.html">http://yasnippet-doc-jp.googlecode.com/svn/trunk/doc-jp/index.html</a><br  /></li>
<li><a href="http://d.hatena.ne.jp/IMAKADO/20080401/1206715770">http://d.hatena.ne.jp/IMAKADO/20080401/1206715770</a><br  /></li>
<li><a href="http://coderepos.org/share/browser/config/yasnippet">http://coderepos.org/share/browser/config/yasnippet</a><br  /></li>
<li><a href="https://github.com/RickMoynihan/yasnippet-org-mode">https://github.com/RickMoynihan/yasnippet-org-mode</a><br  /></li>
</ul>

<p>
<a href="http://orgmode.org/manual/Conflicts.html">Org-modeとの衝突を避ける</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(yas-global-mode yas-minor-mode)
       <span style="color: #8b2252;">"yasnippet"</span> nil t nil
       '((setq yas-verbosity 2)
         (setq yas-snippet-dirs
               (list <span style="color: #8b2252;">"~/Dropbox/emacs.d/yas-dict"</span>
                     'yas-installed-snippets-dir)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">for Cask</span>
         (custom-set-variables '(yas-trigger-key [tab]))
         (yas-global-mode 1)
         ))

  (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'c-mode-common-hook 'org-mode-hook))
    (add-hook hook 'yas-minor-mode)))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(yas-minir-mode yas-expand yas-org-very-safe-expand) <span style="color: #8b2252;">"yasnippet"</span> nil t nil
 '((setq yas-verbosity 2)
   (setq yas-snippet-dirs
         (list <span style="color: #8b2252;">"~/Dropbox/emacs.d/yas-dict"</span>
               'yas-installed-snippets-dir))
   (custom-set-variables '(yas-trigger-key [tab]))
   (yas-global-mode 1)

   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">yas-org-very-safe-expand</span> ()
     (<span style="color: #a020f0;">let</span> ((yas-fallback-behavior 'return-nil)) (yas-expand)))))

(<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'c-mode-common-hook))
  <span style="color: #b22222;">;;                       </span><span style="color: #b22222;">'emacs-lisp-mode-hook))</span>
  (add-hook hook 'yas-minor-mode))

(add-hook 'org-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (yas-minor-mode)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-cycle (&lt;TAB&gt;) &#12392;&#12398;&#34909;&#31361;&#12434;&#36991;&#12369;&#12427;</span>
             (setq yas-trigger-symbol [tab])
             (add-to-list 'org-tab-first-hook 'yas-org-very-safe-expand)
             (define-key yas-keymap [tab] 'yas-next-field)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline71" class="outline-3">
<h3 id="orgheadline71"><span class="section-number-3">5.24</span> [sdic.el] 英辞郎で英単語を調べる</h3>
<div class="outline-text-3" id="text-5-24">
<p>
<a href="http://www.namazu.org/~tsuchiya/sdic/index.html">http://www.namazu.org/~tsuchiya/sdic/index.html</a><br  />
</p>

<p>
Emacs から辞書を使う．lookup を使う方法もあるが，Emacsから使うのは英辞郎に限定．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(sdic-describe-word sdic-describe-word-at-point)
       <span style="color: #8b2252;">"sdic"</span> nil t)
  (eval-after-load <span style="color: #8b2252;">"sdic"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq sdic-face-color <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3333FF;">#3333FF</span><span style="color: #8b2252;">"</span>)
       (setq sdic-default-coding-system 'utf-8)
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (English =&gt; Japanese)</span>
       (setq sdic-eiwa-dictionary-list
             '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/EIJI-128.sdic"</span>)))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (Japanese =&gt; English)</span>
       (setq sdic-waei-dictionary-list
             '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/WAEI-128.sdic"</span>))))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(sdic-describe-word sdic-describe-word-at-point) <span style="color: #8b2252;">"sdic"</span> nil t nil
 '((setq sdic-face-color <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3333FF;">#3333FF</span><span style="color: #8b2252;">"</span>)
   (setq sdic-default-coding-system 'utf-8)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (English =&gt; Japanese)</span>
   (setq sdic-eiwa-dictionary-list
         '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/EIJI-128.sdic"</span>)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (Japanese =&gt; English)</span>
   (setq sdic-waei-dictionary-list
         '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/WAEI-128.sdic"</span>)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline70" class="outline-4">
<h4 id="orgheadline70"><span class="section-number-4">5.24.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-24-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12540;&#12477;&#12523;&#12398;&#20301;&#32622;&#12398;&#33521;&#21336;&#35486;&#12398;&#24847;&#21619;&#12434;&#35519;&#12409;&#12427;</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-M-w"</span>) 'sdic-describe-word-at-point)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12511;&#12491;&#12496;&#12483;&#12501;&#12449;&#12395;&#33521;&#21336;&#35486;&#12434;&#20837;&#12428;&#12390;&#33521;&#36766;&#37070;&#12434;&#20351;&#12358;</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c w"</span>) 'sdic-describe-word)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline74" class="outline-3">
<h3 id="orgheadline74"><span class="section-number-3">5.25</span> MacOSのdictionary.appでCOBUILD5の辞書をひく</h3>
<div class="outline-text-3" id="text-5-25">
<p>
OS標準の辞書アプリ（dictionary.app）を経由して，バッファにCOBUILD5のデータを流し込むことができます．<br  />
</p>

<ul class="org-ul">
<li><a href="http://sakito.jp/mac/dictionary.html#emacs">辞書(Dictionary).appを使い倒そう</a><br  /></li>
</ul>

<p>
以下の関数を準備します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">dictionary</span> ()
  <span style="color: #8b2252;">"dictionary.app"</span>
  (interactive)

  (<span style="color: #a020f0;">let</span> ((editable (not buffer-read-only))
        (pt (<span style="color: #a020f0;">save-excursion</span> (mouse-set-point last-nonmenu-event)))
        beg end)

    (<span style="color: #a020f0;">if</span> (and mark-active
             (&lt;= (region-beginning) pt) (&lt;= pt (region-end)) )
        (setq beg (region-beginning)
              end (region-end))
      (<span style="color: #a020f0;">save-excursion</span>
        (goto-char pt)
        (setq end (<span style="color: #a020f0;">progn</span> (forward-word) (point)))
        (setq beg (<span style="color: #a020f0;">progn</span> (backward-word) (point)))
        ))

    (<span style="color: #a020f0;">let</span> ((word (buffer-substring-no-properties beg end))
          <span style="color: #b22222;">;;            </span><span style="color: #b22222;">(win (selected-window))</span>
          (tmpbuf <span style="color: #8b2252;">" * dict-process*"</span>))
      (pop-to-buffer tmpbuf)
      (erase-buffer)
      (insert <span style="color: #8b2252;">"Query: "</span> word <span style="color: #8b2252;">"\n\n"</span>)
      (start-process <span style="color: #8b2252;">"dict-process"</span> tmpbuf <span style="color: #8b2252;">"dict.py"</span> word)
      (goto-char 0)
      <span style="color: #b22222;">;;        </span><span style="color: #b22222;">(select-window win)</span>
      )))
</pre>
</div>

<p>
これでカーソル以下の単語の情報が別ウィンドウに出ます．チェックし終わったら <code>C-x 1</code> (delete-other-windows) で表示を閉じます． <code>q</code> で閉じられるようにしたり，ツールチップで表示したりもできるはずです．<br  />
</p>

<p>
マスタカさんのナイスソリューションをまだ試していないので，こちらの方がエレガントかもしれません．<br  />
</p>

<ul class="org-ul">
<li><a href="http://masutaka.net/chalow/2011-05-18-1.html">Emacs で Mac の辞書を sdic っぽく使う </a><br  /></li>
<li><a href="http://masutaka.net/chalow/2012-09-17-1.html">EmacsからMacの辞書をお手軽に使う</a><br  /></li>
</ul>

<p>
なお，COBUILD5の辞書データをdictionary.appで引けるようにするには以下の操作が必要です．<br  />
</p>

<ul class="org-ul">
<li><a href="http://safx-dev.blogspot.jp/2012/02/collins-cobuld-5dictionaryapp.html">Collins COBULD 5をDictionary.appで利用できるようにする</a><br  /></li>
</ul>

<p>
私の場合は，できあがった辞書を <code>/Library/Dictionaries/</code> 以下に置いています．その状態で dictionary.app の設定で辞書の優先順位を変えることで，常にCOBUILD5の情報を引っ張り出せます．<br  />
</p>
</div>

<div id="outline-container-orgheadline72" class="outline-4">
<h4 id="orgheadline72"><span class="section-number-4">5.25.1</span> マイナーモード化</h4>
<div class="outline-text-4" id="text-5-25-1">
<p>
<code>q</code> で閉じたくなったのでマイナーモードを作りました．これまで通り， <code>C-M-w</code> でカーソル下の単語を調べてポップアップで表示．カーソルはその新しいバッファに移しておき， <code>q</code> で閉じられます．新しいバッファ内で別な単語を <code>C-M-w</code> で調べると，同じバッファに結果を再描画します．<br  />
</p>

<p>
マイナーモード化した elisp は，<a href="https://gist.github.com/takaxp/9786376">gist</a>で公開しています．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline73" class="outline-4">
<h4 id="orgheadline73"><span class="section-number-4">5.25.2</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-25-2">
<p>
マイナーモード化した dict-app を使う場合は以下のようにします．sdic を使っている人は，sdic 用の設定と衝突しないように気をつけます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(dict-app-search) <span style="color: #8b2252;">"dict-app"</span> nil t nil
       '())
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12540;&#12477;&#12523;&#12398;&#20301;&#32622;&#12398;&#33521;&#21336;&#35486;&#12398;&#24847;&#21619;&#12434;&#35519;&#12409;&#12427;  </span>
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-w"</span>) 'dict-app-search))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline76" class="outline-3">
<h3 id="orgheadline76"><span class="section-number-3">5.26</span> [lookup.el] 辞書</h3>
<div class="outline-text-3" id="text-5-26">
<p>
最近使っていません．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">.lookup/cache.el</span>
(setq lookup-init-directory <span style="color: #8b2252;">"~/env/dot_files/.lookup"</span>)

(autoload 'lookup <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-region <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-word <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-select-dictionaries <span style="color: #8b2252;">"lookup"</span> nil t)

(setq lookup-search-modules
      '((<span style="color: #8b2252;">"default"</span>
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/cobuild"</span> <span style="color: #483d8b;">:priority</span> t)
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/wordbank"</span> <span style="color: #483d8b;">:priority</span> t)
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/ldoce4"</span> <span style="color: #483d8b;">:priority</span> t)
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/bank"</span> <span style="color: #483d8b;">:priority</span> t)
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/colloc"</span> <span style="color: #483d8b;">:priority</span> t)
         (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/activ"</span> <span style="color: #483d8b;">:priority</span> t))))

(setq lookup-agent-attributes
      '((<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5"</span>
         (dictionaries <span style="color: #8b2252;">"cobuild"</span> <span style="color: #8b2252;">"wordbank"</span>))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4"</span>
         (dictionaries <span style="color: #8b2252;">"ldoce4"</span> <span style="color: #8b2252;">"bank"</span> <span style="color: #8b2252;">"colloc"</span> <span style="color: #8b2252;">"activ"</span>))))

(setq lookup-dictionary-attributes
      '((<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/cobuild"</span>
         (title . <span style="color: #8b2252;">"COBUILD 5th Edition"</span>)
         (methods exact prefix))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/wordbank"</span>
         (title . <span style="color: #8b2252;">"Wordbank"</span>)
         (methods))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/ldoce4"</span>
         (title . <span style="color: #8b2252;">"Longman 4th Edition"</span>)
         (methods exact prefix))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/bank"</span>
         (title . <span style="color: #8b2252;">"LDOCE4 Examples and Phrases"</span>)
         (methods exact prefix menu))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/colloc"</span>
         (title . <span style="color: #8b2252;">"LDOCE4 Collocation"</span>)
         (methods exact prefix))
        (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/activ"</span>
         (title . <span style="color: #8b2252;">"Longman Activator"</span>)
         (methods exact prefix menu))))

(setq lookup-default-dictionary-options
      '((<span style="color: #483d8b;">:stemmer</span> .  stem-english)))
(setq lookup-use-kakasi nil)

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">lookup for dictionary (require EB Library, eblook, and lookup.el)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">package download: http://sourceforge.net/projects/lookup</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://lookup.sourceforge.net/docs/ja/index.shtml#Top</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.bookshelf.jp/texi/lookup/lookup-guide.html#SEC_Top</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(load "lookup-autoloads") ; for 1.99</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup "lookup" nil t)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-region "lookup" nil t)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-word "lookup" nil t)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-select-dictionaries "lookup" nil t)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Search Agents</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">ndeb option requries "eblook" command</span>
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">Use expand-file-name!</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq lookup-search-agents `((ndeb ,(concat homedir "/Dropbox/Dic/COBUILD5"))</span>
                                        <span style="color: #b22222;">;                            </span><span style="color: #b22222;">(ndeb ,(concat homedir "/Dropbox/Dic/LDOCE4"))))</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq lookup-use-bitmap nil)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq ndeb-program-name "/usr/bin/eblook")</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(when (eq window-system 'ns)</span>
                                        <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-program-name "/opt/local/bin/eblook")</span>
                                        <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-program-arguments '("-q" "-e" "euc-jp"))</span>
                                        <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-process-coding-system 'utf-8)) ; utf-8-hfs</span>
</pre>
</div>
</div>
<div id="outline-container-orgheadline75" class="outline-4">
<h4 id="orgheadline75"><span class="section-number-4">5.26.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-26-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"&lt;f6&gt;"</span>) 'lookup-word)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline77" class="outline-3">
<h3 id="orgheadline77"><span class="section-number-3">5.27</span> [cacoo] Cacoo で描く</h3>
<div class="outline-text-3" id="text-5-27">
<p>
画像をリサイズしてバッファに表示する用途にも使える．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'toggle-cacoo-minor-mode <span style="color: #8b2252;">"cacoo"</span> nil t)
  (global-set-key (kbd <span style="color: #8b2252;">"M--"</span>) 'toggle-cacoo-minor-mode)
  (eval-after-load <span style="color: #8b2252;">"cacoo"</span>
    '(<span style="color: #a020f0;">progn</span>
       (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cacoo-plugins</span>))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(toggle-cacoo-minor-mode) <span style="color: #8b2252;">"cacoo"</span> nil t nil
       '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cacoo-plugins</span>)))

  (global-set-key (kbd <span style="color: #8b2252;">"M--"</span>) 'toggle-cacoo-minor-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline78" class="outline-3">
<h3 id="orgheadline78"><span class="section-number-3">5.28</span> [iedit] バッファ内の同じ文字列を一度に編集する</h3>
<div class="outline-text-3" id="text-5-28">
<p>
<a href="http://emacswiki.org/emacs/iedit.el">iedit.el</a> を使うと，バッファ内の同じ文字列を一度に編集することができる．部分重複のない変数名を置き換えるときに有用な場合がある．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">iedit</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline79" class="outline-3">
<h3 id="orgheadline79"><span class="section-number-3">5.29</span> [web-mode] HTML編集</h3>
<div class="outline-text-3" id="text-5-29">
<p>
HTML編集をするなら <a href="http://web-mode.org/">web-mode</a> がお勧めです．古いHTMLモードを使っている方は，移行時期です．以下の <code>my:web-indent-fold</code> では， タブキーを打つたびにタグでくくられた領域を展開／非表示して整形します．Org-mode っぽい動作になりますが，操作の度にバッファに変更が加わったと判断されるので好みが分かれると思います．自動保存を有効にしているとそれほど気になりません．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(web-mode) <span style="color: #8b2252;">"web-mode"</span> <span style="color: #8b2252;">"web-mode"</span> t nil
       '((<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:web-indent-fold</span> ()
           (interactive)
           (web-mode-fold-or-unfold)
           (web-mode-buffer-indent)
           (indent-for-tab-command))

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">indent</span>
         (setq web-mode-markup-indent-offset 1)

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#33394;&#12398;&#35373;&#23450;</span>
         (custom-set-faces
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">custom-set-faces was added by Custom.</span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">If you edit it by hand, you could mess it up, so be careful.</span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">Your init file should contain only one such instance.</span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">If there is more than one, they won't work right.</span>
          '(default ((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #202020;">#202020</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-comment-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #D9333F;">#D9333F</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-css-at-rule-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FF7F00;">#FF7F00</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-css-pseudo-class-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FF7F00;">#FF7F00</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-css-rule-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #A0D8EF;">#A0D8EF</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-doctype-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #82AE46;">#82AE46</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-html-attr-name-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #C97586;">#C97586</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-html-attr-value-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #82AE46;">#82AE46</span><span style="color: #8b2252;">"</span>))))
          '(web-mode-html-tag-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#</span><span style="color: #ffffff; background-color: #4682ae;">#4682ae</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold))))
          '(web-mode-server-comment-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #D9333F;">#D9333F</span><span style="color: #8b2252;">"</span>)))))
         (define-key web-mode-map (kbd <span style="color: #8b2252;">"&lt;tab&gt;"</span>) 'my:web-indent-fold)))


  <span style="color: #b22222;">;; </span><span style="color: #b22222;">web-mode &#12391;&#38283;&#12367;&#12501;&#12449;&#12452;&#12523;&#12398;&#25313;&#24373;&#23376;&#12434;&#25351;&#23450;</span>
  (setq auto-mode-alist
        (append '((<span style="color: #8b2252;">"\\.phtml\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.tpl\\.php\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.jsp\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.as[cp]x\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.erb\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.mustache\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.djhtml\\'"</span> . web-mode)
                  (<span style="color: #8b2252;">"\\.html?\\'"</span> . web-mode))
                auto-mode-alist)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline80" class="outline-3">
<h3 id="orgheadline80"><span class="section-number-3">5.30</span> [zencoding-mode] HTML編集の高速化</h3>
<div class="outline-text-3" id="text-5-30">
<p>
zencoding でタグ打ちを効率化します．<br  />
</p>

<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/ZenCoding">http://www.emacswiki.org/emacs/ZenCoding</a><br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'sgml-mode-hook 'zencoding-mode)
(add-hook 'html-mode-hook 'zencoding-mode)
(add-hook 'web-mode-hook 'zencoding-mode)
(eval-after-autoload-if-found
 '(zencoding-mode zencoding-expand-line) <span style="color: #8b2252;">"zencoding-mode"</span> <span style="color: #8b2252;">"Zen-coding"</span> t nil
 '((define-key zencoding-mode-keymap (kbd <span style="color: #8b2252;">"M-&lt;return&gt;"</span>) 'zencoding-expand-line)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline81" class="outline-3">
<h3 id="orgheadline81"><span class="section-number-3">5.31</span> [emmet-mode] zencoding の後継</h3>
<div class="outline-text-3" id="text-5-31">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(emmet-mode) <span style="color: #8b2252;">"emmet-mode"</span> nil t nil
       '((setq emmet-indentation 2)
         (setq emmet-move-cursor-between-quotes t)))
  (push '(<span style="color: #8b2252;">"\\.xml\\'"</span> . nxml-mode) auto-mode-alist)
  (push '(<span style="color: #8b2252;">"\\.rdf\\'"</span> . nxml-mode) auto-mode-alist)
  (add-hook 'sgml-mode-hook 'emmet-mode)
  (add-hook 'nxml-mode-hook 'emmet-mode)
  (add-hook 'css-mode-hook 'emmet-mode)
  (add-hook 'html-mode-hook 'emmet-mode)
  (add-hook 'web-mode-hook 'emmet-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline107" class="outline-2">
<h2 id="orgheadline107"><span class="section-number-2">6</span> 表示サポート</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-orgheadline83" class="outline-3">
<h3 id="orgheadline83"><span class="section-number-3">6.1</span> モードラインのモード名を短くする</h3>
<div class="outline-text-3" id="text-6-1">
<p>
以前は自作したパッケージを使っていましたが，不具合も多く，調べると <code>diminish.el</code> という素晴らしいパッケージがあったので移行しました．これはマイナーモードの短縮表示なので，メジャーモードは個別にフックで <code>mode-name</code> を書き換えて対応します． <code>use-package.el</code> を使っていると依存関係から自動的にインストールされます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">mode-name-abbrev</span> nil t)
</pre>
</div>

<p>
<code>diminish.el</code> を使えば，短縮名に書き換えることも，存在自体を消してしまうこともできます．helm だけ行儀が悪いので，後段での設定時に diminish を呼ぶようにしています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">diminish</span> nil t)
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"isearch"</span> (diminish 'isearch-mode))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"smooth-scroll"</span> (diminish 'smooth-scroll-mode))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"whitespace"</span> (diminish 'global-whitespace-mode))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"centered-cursor-mode"</span>
    (diminish 'centered-cursor-mode))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"volatile-highlights"</span>
    (diminish 'volatile-highlights-mode))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"aggressive-indent"</span>
    (diminish 'aggressive-indent-mode <span style="color: #8b2252;">" Ai"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"emmet-mode"</span> (diminish 'emmet-mode <span style="color: #8b2252;">" e"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"abbrev"</span> (diminish 'abbrev-mode <span style="color: #8b2252;">" a"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"yasnippet"</span> (diminish 'yas-minor-mode <span style="color: #8b2252;">" y"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"doxymacs"</span> (diminish 'doxymacs-mode <span style="color: #8b2252;">" d"</span>))
  (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"rainbow-mode"</span> (diminish 'rainbow-mode))
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(with-eval-after-load "helm" (diminish 'helm-mode " H"))</span>
  )
</pre>
</div>

<p>
メジャーモードは，単純に各モードの <code>hook</code> で対処します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'c-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"C"</span>)))
(add-hook 'c++-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"C++"</span>)))
(add-hook 'csharp-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"C#"</span>)))
(add-hook 'emacs-lisp-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"el"</span>)))
(add-hook 'perl-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"pl"</span>)))
(add-hook 'web-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"W"</span>)))
(add-hook 'lisp-interaction-mode-hook '(<span style="color: #a020f0;">lambda</span> () (setq mode-name <span style="color: #8b2252;">"Lisp"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline84" class="outline-3">
<h3 id="orgheadline84"><span class="section-number-3">6.2</span> モードラインのNarrowを短くする</h3>
<div class="outline-text-3" id="text-6-2">
<p>
標準では「Narrow」と表示されますが，「N」に短縮します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:narrow-display</span> <span style="color: #8b2252;">" N"</span>)
(setq mode-line-modes
      (mapcar (<span style="color: #a020f0;">lambda</span> (entry)
                (<span style="color: #a020f0;">if</span> (and (stringp entry)
                         (string= entry <span style="color: #8b2252;">"%n"</span>))
                    '(<span style="color: #483d8b;">:eval</span> (<span style="color: #a020f0;">if</span> (and (= 1 (point-min))
                                     (= (1+ (buffer-size)) (point-max))) <span style="color: #8b2252;">""</span>
                              my:narrow-display)) entry))
              mode-line-modes))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline86" class="outline-3">
<h3 id="orgheadline86"><span class="section-number-3">6.3</span> モードラインの色をカスタマイズする</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-face-attribute 'mode-line nil <span style="color: #483d8b;">:overline</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #203e6f;">#203e6f</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:box</span> nil)
(set-face-foreground 'mode-line <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #203e6f;">#203e6f</span><span style="color: #8b2252;">"</span>)
(set-face-background 'mode-line <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #b2cefb;">#b2cefb</span><span style="color: #8b2252;">"</span>)
(set-face-attribute 'mode-line-inactive nil <span style="color: #483d8b;">:overline</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #94bbf9;">#94bbf9</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:box</span> nil)
(set-face-foreground 'mode-line-inactive  <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #94bbf9;">#94bbf9</span><span style="color: #8b2252;">"</span>)
(set-face-background 'mode-line-inactive <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #d8e6fd;">#d8e6fd</span><span style="color: #8b2252;">"</span>)
</pre>
</div>
</div>

<div id="outline-container-orgheadline85" class="outline-4">
<h4 id="orgheadline85"><span class="section-number-4">6.3.1</span> 色セット例</h4>
<div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li>青／白<br  /></li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">background</td>
<td class="org-left">foreground</td>
<td class="org-left">overline</td>
</tr>

<tr>
<td class="org-left">active</td>
<td class="org-left">558BE2</td>
<td class="org-left">FFFFFF</td>
<td class="org-left">566f99</td>
</tr>

<tr>
<td class="org-left">inactive</td>
<td class="org-left">94bbf9</td>
<td class="org-left">EFEFEF</td>
<td class="org-left">a4bfea</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>青<br  /></li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">background</td>
<td class="org-left">foreground</td>
<td class="org-left">overline</td>
</tr>

<tr>
<td class="org-left">active</td>
<td class="org-left">b2cefb</td>
<td class="org-left">203e6f</td>
<td class="org-left">203e6f</td>
</tr>

<tr>
<td class="org-left">inactive</td>
<td class="org-left">94bbf9</td>
<td class="org-left">94bbf9</td>
<td class="org-left">94bbf9</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>緑<br  /></li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">background</td>
<td class="org-left">foreground</td>
<td class="org-left">overline</td>
</tr>

<tr>
<td class="org-left">active</td>
<td class="org-left">b1fbd6</td>
<td class="org-left">206f47</td>
<td class="org-left">206f47</td>
</tr>

<tr>
<td class="org-left">inactive</td>
<td class="org-left">95f9c7</td>
<td class="org-left">95f9c7</td>
<td class="org-left">95f9c7</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-orgheadline87" class="outline-3">
<h3 id="orgheadline87"><span class="section-number-3">6.4</span> visible-bell のカスタマイズ</h3>
<div class="outline-text-3" id="text-6-4">
<p>
<a href="http://www.emacswiki.org/emacs/MilesBader">http://www.emacswiki.org/emacs/MilesBader</a> を参考にカスタマイズしていました．現在は後継パッケージ（<a href="http://www.emacswiki.org/emacs/echo-bell.el%EF%BC%89%E3%81%8C%E3%81%82%E3%82%8A%EF%BC%8CMELPA%E3%81%8B%E3%82%89%E5%8F%96%E3%82%8C%E3%81%BE%E3%81%99">http://www.emacswiki.org/emacs/echo-bell.el%EF%BC%89%E3%81%8C%E3%81%82%E3%82%8A%EF%BC%8CMELPA%E3%81%8B%E3%82%89%E5%8F%96%E3%82%8C%E3%81%BE%E3%81%99</a>．<br  />
</p>

<p>
visibl-bell を使うと，操作ミスで発生するビープ音を，視覚的な表示に入れ替えられます．ただ，デフォルトではバッファ中央に黒い四角が表示されて少々鬱陶しいので，ミニバッファの点滅に変更します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(echo-area-bell) <span style="color: #8b2252;">"echo-area-bell"</span> nil t nil
 '((setq visible-bell t)
   (setq ring-bell-function 'echo-area-bell)))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12497;&#12483;&#12465;&#12540;&#12472;&#65288;echo-bell&#65289;&#12398;&#22580;&#21512;</span>
(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">echo-bell</span> nil t)
  (echo-bell-mode 1)
  (setq echo-bell-string <span style="color: #8b2252;">""</span>)
  (setq echo-bell-background <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FF7D7D;">#FF7D7D</span><span style="color: #8b2252;">"</span>)
  (setq echo-bell-delay 0.1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline88" class="outline-3">
<h3 id="orgheadline88"><span class="section-number-3">6.5</span> 常に <b>scratch</b> を表示して起動する</h3>
<div class="outline-text-3" id="text-6-5">
<p>
<code>session.el</code> や <code>desktop.el</code> を使っていても，いつも <code>*scratch*</code> バッファを表示する．そうじゃないと安心できない人向け．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Start Emacs with scratch buffer even though it call session.el/desktop.el</span>
(add-hook 'emacs-startup-hook '(<span style="color: #a020f0;">lambda</span> () (switch-to-buffer <span style="color: #8b2252;">"*scratch*"</span>)))
</pre>
</div>

<p>
もしくは，以下でもOKかも．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq initial-buffer-choice t)
</pre>
</div>

<p>
さらに，使われるメジャーモードと表示する文字列も制御できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq initial-major-mode 'text-mode)
(setq initial-scratch-message
      (concat <span style="color: #8b2252;">"                                                              "</span>
              (format-time-string <span style="color: #8b2252;">"%Y-%m-%d (%a.)"</span>) <span style="color: #8b2252;">"\n"</span>
              <span style="color: #8b2252;">"-----------------------------------------------------"</span>
              <span style="color: #8b2252;">"--------------------------\n"</span>))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">buffer</span> nil t)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-s"</span>)
                '(<span style="color: #a020f0;">lambda</span> () (interactive) (switch-to-buffer <span style="color: #8b2252;">"*scratch*"</span>)))
(setq initial-scratch-message nil)
(setq initial-major-mode 'buffer-mode)
(set-face-attribute 'header-line nil <span style="color: #483d8b;">:overline</span> nil <span style="color: #483d8b;">:underline</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #203e6f;">#203e6f</span><span style="color: #8b2252;">"</span>)
(set-face-foreground 'header-line <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #203e6f;">#203e6f</span><span style="color: #8b2252;">"</span>)
(set-face-background 'header-line <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #d8e6fd;">#d8e6fd</span><span style="color: #8b2252;">"</span>)
(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:header-clock</span> 
  (setq header-line-format
        (concat
         <span style="color: #8b2252;">"  Buffers                                                       "</span>
         (format-time-string <span style="color: #8b2252;">"%Y-%m-%d (%a.)"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline89" class="outline-3">
<h3 id="orgheadline89"><span class="section-number-3">6.6</span> バッテリー情報をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show battery information on the mode line.</span>
(display-battery-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline90" class="outline-3">
<h3 id="orgheadline90"><span class="section-number-3">6.7</span> スクロールバーを非表示にする</h3>
<div class="outline-text-3" id="text-6-7">
<p>
スクロールバーを非表示にするには，nil を指定します．<br  />
右側に表示したい場合は，'right とします．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show scroll bar or not</span>
(set-scroll-bar-mode nil) <span style="color: #b22222;">; </span><span style="color: #b22222;">'right</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline91" class="outline-3">
<h3 id="orgheadline91"><span class="section-number-3">6.8</span> ツールバーを非表示にする</h3>
<div class="outline-text-3" id="text-6-8">
<p>
ツールバーは使わないので非表示にします．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable to show the tool bar.</span>
(tool-bar-mode 0)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline92" class="outline-3">
<h3 id="orgheadline92"><span class="section-number-3">6.9</span> 起動時のスプラッシュ画面を表示しない</h3>
<div class="outline-text-3" id="text-6-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable to show the splash window at startup</span>
(setq inhibit-startup-screen t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline93" class="outline-3">
<h3 id="orgheadline93"><span class="section-number-3">6.10</span> カーソル行の行数をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show line number in the mode line.</span>
(line-number-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline94" class="outline-3">
<h3 id="orgheadline94"><span class="section-number-3">6.11</span> カーソル行の関数名をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-11">
<ul class="org-ul">
<li>emacs24.3 で重く感じるので外している．<br  /></li>
</ul>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show function name in the mode line.</span>
(which-function-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline95" class="outline-3">
<h3 id="orgheadline95"><span class="section-number-3">6.12</span> 時刻をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show clock in in the mode line</span>
(setq display-time-format <span style="color: #8b2252;">"%H:%M"</span>)
(setq display-time-default-load-average nil)
(display-time-mode t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline96" class="outline-3">
<h3 id="orgheadline96"><span class="section-number-3">6.13</span> 対応するカッコをハイライトする</h3>
<div class="outline-text-3" id="text-6-13">
<p>
Built-in の paren.el が利用できる．拡張版として <a href="http://www.emacswiki.org/emacs/mic-paren.el">mic-paren.el</a> があり，現在はこれを利用している．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(paren-activate) <span style="color: #8b2252;">"mic-paren"</span> nil t nil
       '((setq paren-sexp-mode nil)
         (set-face-foreground 'paren-face-match <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Deep </span><span style="color: #ffffff; background-color: #0000ff;">blue</span><span style="color: #b22222;">: </span><span style="color: #ffffff; background-color: #6666CC;">#6666CC</span><span style="color: #b22222;">, </span><span style="color: #000000; background-color: #ffa500;">orange</span><span style="color: #b22222;">: </span><span style="color: #000000; background-color: #FFCC66;">#FFCC66</span>
         (set-face-background 'paren-face-match <span style="color: #8b2252;">"66CC66"</span>)))

  (paren-activate))
</pre>
</div>

<p>
paren.el の場合は以下の設定．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq show-paren-delay 0)
(show-paren-mode t)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq show-paren-style 'expression) ; &#12459;&#12483;&#12467;&#20869;&#12418;&#24375;&#35519;</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(set-face-background 'show-paren-match-face "</span><span style="color: #000000; background-color: #5DA4ff;">#5DA4ff</span><span style="color: #b22222;">") ; &#12459;&#12540;&#12477;&#12523;&#12424;&#12426;&#28611;&#12356;&#38738;</span>
(set-face-background 'show-paren-match-face <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #a634ff;">#a634ff</span><span style="color: #8b2252;">"</span>)
(set-face-foreground 'show-paren-match-face <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span>)
(set-face-underline-p 'show-paren-match-face nil)
(setq show-paren-style 'parenthesis)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline97" class="outline-3">
<h3 id="orgheadline97"><span class="section-number-3">6.14</span> 全角スペースと行末タブ／半角スペースを強調表示する</h3>
<div class="outline-text-3" id="text-6-14">
<p>
<a href="http://ubulog.blogspot.jp/2007/09/emacs_09.html">http://ubulog.blogspot.jp/2007/09/emacs_09.html</a><br  />
</p>

<p>
英語で原稿を書く時に全角スペースが入っているを苦労するので，強調表示して編集中でも気づくようにします．また，行末のタブや半角スペースも無駄なので，入り込まないように強調しています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12473;&#12506;&#12540;&#12473;</span>
(<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my:face-b-1</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #bebebe;">gray</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:bold</span> t <span style="color: #483d8b;">:underline</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #ff0000;">red</span><span style="color: #8b2252;">"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12502;&#12384;&#12369;&#12398;&#34892;</span>
(<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my:face-b-2</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #ffa500;">orange</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:bold</span> t <span style="color: #483d8b;">:underline</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #ff0000;">red</span><span style="color: #8b2252;">"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#21322;&#35282;&#12473;&#12506;&#12540;&#12473;</span>
(<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my:face-b-3</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #ffa500;">orange</span><span style="color: #8b2252;">"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:face-b-1</span> 'my:face-b-1)
(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:face-b-2</span> 'my:face-b-2)
(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:face-b-3</span> 'my:face-b-3)
(<span style="color: #a020f0;">defadvice</span> <span style="color: #0000ff;">font-lock-mode</span> (before my:font-lock-mode ())
  (font-lock-add-keywords
   major-mode
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">"[\t]+$" &#34892;&#26411;&#12398;&#12479;&#12502;</span>
   '((<span style="color: #8b2252;">"</span><span style="color: #8b2252; background-color: #bebebe; font-weight: bold; text-decoration: underline;">&#12288;</span><span style="color: #8b2252;">"</span> 0 my:face-b-1 append)
     <span style="color: #b22222;">;;       </span><span style="color: #b22222;">("[ ]+$" 0 my:face-b-3 append)</span>
     (<span style="color: #8b2252;">"[\t]+$"</span> 0 my:face-b-2 append))))
(ad-enable-advice 'font-lock-mode 'before 'my:font-lock-mode)
(ad-activate 'font-lock-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline98" class="outline-3">
<h3 id="orgheadline98"><span class="section-number-3">6.15</span> [migemo.el] ローマ字入力で日本語を検索する</h3>
<div class="outline-text-3" id="text-6-15">
<p>
<a href="http://0xcc.net/migemo/#download">http://0xcc.net/migemo/#download</a><br  />
</p>

<p>
以下は，<a href="http://www.kaoriya.net/software/cmigemo">cmigemo</a> を使う設定です．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span>
    (eval-after-autoload-if-found
     '(migemo-init) <span style="color: #8b2252;">"migemo"</span> nil t nil
     '((setq completion-ignore-case t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">case-independent</span>
       (setq migemo-command <span style="color: #8b2252;">"cmigemo"</span>)
       (setq migemo-options '(<span style="color: #8b2252;">"-q"</span> <span style="color: #8b2252;">"--emacs"</span> <span style="color: #8b2252;">"-i"</span> <span style="color: #8b2252;">"\a"</span>))
       (setq migemo-dictionary <span style="color: #8b2252;">"/usr/local/share/migemo/utf-8/migemo-dict"</span>)
       (setq migemo-user-dictionary nil)
       (setq migemo-regex-dictionary nil)
       (setq migemo-use-pattern-alist t)
       (setq migemo-use-frequent-pattern-alist t)
       (setq migemo-pattern-alist-length 1024)
       (setq migemo-coding-system 'utf-8-unix)))

  (<span style="color: #a020f0;">when</span> (executable-find <span style="color: #8b2252;">"cmigemo"</span>)
    (add-hook 'isearch-mode-hook 'migemo-init)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline100" class="outline-3">
<h3 id="orgheadline100"><span class="section-number-3">6.16</span> [anything.el] 何でも絞り込みインターフェイス</h3>
<div class="outline-text-3" id="text-6-16">
<p>
<a href="http://svn.coderepos.org/share/lang/elisp/anything-c-moccur/trunk/anything-c-moccur.el">http://svn.coderepos.org/share/lang/elisp/anything-c-moccur/trunk/anything-c-moccur.el</a><br  />
<a href="http://d.hatena.ne.jp/IMAKADO/20080724/1216882563">http://d.hatena.ne.jp/IMAKADO/20080724/1216882563</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">     (<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
            '(anything-other-buffer anything-complete anything-M-x
                                    anything-c-moccur-occur-by-moccur)
            <span style="color: #8b2252;">"anything-startup"</span> nil t nil
            '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">anything-c-moccur</span> nil t)
              <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq moccur-split-word t)</span>
              <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq anything-c-locate-options `("locate" "-w"))</span>

              <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x install-elisp-from-emacswiki recentf-ext.el</span>
              <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.emacswiki.org/cgi-bin/wiki/download/recentf-ext.el</span>
              <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(autoload-if-found 'recentf-ext "recentf-ext" nil t)</span>
<span style="color: #b22222;">;;              </span><span style="color: #b22222;">(require 'recentf-ext nil t)</span>

              (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">migemo</span> nil t)
                (setq moccur-use-migemo t))
              <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x anything-grep-by-name</span>
              (setq anything-grep-alist
                    '((<span style="color: #8b2252;">"Org-files"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/"</span>))
                      (<span style="color: #8b2252;">".emacs.d"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.el"</span> <span style="color: #8b2252;">"~/.emacs.d/"</span>))
                      (<span style="color: #8b2252;">"ChangeLog"</span> (<span style="color: #8b2252;">"egrep -Hin %s ChangeLog"</span> <span style="color: #8b2252;">"~/"</span>))))))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">("Spotlight" ("mdfind %s -onlyin ~/Dropbox/Documents/Library/" ""))))</span>

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything</span> ()
         (interactive)
         (anything-other-buffer
          '(anything-c-source-recentf
            anything-c-source-file-name-history
            anything-c-source-buffers
            anything-c-source-emacs-commands
            anything-c-source-locate)
          <span style="color: #8b2252;">" *my:anything*"</span>))

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything-buffer</span> ()
         (interactive)
         (anything-other-buffer
          '(anything-c-source-buffers)
          <span style="color: #8b2252;">" *my:anthing-buffer*"</span>))
  
       (<span style="color: #a020f0;">when</span> (eq window-system 'ns)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything-spotlight</span> ()
           <span style="color: #8b2252;">"Spotlight search with anything.el"</span>
           (interactive)
           (anything-other-buffer
            '(anything-c-source-mac-spotlight)
            <span style="color: #8b2252;">" *anything-spotlight*"</span>)))

       (setq anything-candidate-number-limit 50) <span style="color: #b22222;">; </span><span style="color: #b22222;">50</span>
       (setq anything-input-idle-delay 0.1)      <span style="color: #b22222;">; </span><span style="color: #b22222;">0.1</span>
       (setq anything-idle-delay 0.5)            <span style="color: #b22222;">; </span><span style="color: #b22222;">0.5</span>
       (setq anything-quick-update nil))        <span style="color: #b22222;">; </span><span style="color: #b22222;">nil</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">     (<span style="color: #a020f0;">when</span> (autoload-if-found
            '(anything-other-buffer anything-complete
                                    anything-M-x anything-c-moccur-occur-by-moccur)
            <span style="color: #8b2252;">"anything-startup"</span> nil t)

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything</span> ()
         (interactive)
         (anything-other-buffer
          '(anything-c-source-recentf
            anything-c-source-file-name-history
            anything-c-source-buffers
            anything-c-source-emacs-commands
            anything-c-source-locate)
          <span style="color: #8b2252;">" *my:anything*"</span>))

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything-buffer</span> ()
         (interactive)
         (anything-other-buffer
          '(anything-c-source-buffers)
          <span style="color: #8b2252;">" *my:anthing-buffer*"</span>))

       (<span style="color: #a020f0;">when</span> (eq window-system 'ns)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:anything-spotlight</span> ()
           <span style="color: #8b2252;">"Spotlight search with anything.el"</span>
           (interactive)
           (anything-other-buffer
            '(anything-c-source-mac-spotlight)
            <span style="color: #8b2252;">" *anything-spotlight*"</span>)))

       (eval-after-load <span style="color: #8b2252;">"anything-startup"</span>
         '(<span style="color: #a020f0;">progn</span>

            (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">anything-c-moccur</span> nil t)
            <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq moccur-split-word t)</span>
            <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq anything-c-locate-options `("locate" "-w"))</span>

            <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x install-elisp-from-emacswiki recentf-ext.el</span>
            <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.emacswiki.org/cgi-bin/wiki/download/recentf-ext.el</span>
            <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(autoload-if-found 'recentf-ext "recentf-ext" nil t)</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(require 'recentf-ext nil t)</span>

            (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">migemo</span> nil t)
              (setq moccur-use-migemo t))

            <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x anything-grep-by-name</span>
            (setq anything-grep-alist
                  '((<span style="color: #8b2252;">"Org-files"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/"</span>))
                    (<span style="color: #8b2252;">".emacs.d"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.el"</span> <span style="color: #8b2252;">"~/.emacs.d/"</span>))
                    (<span style="color: #8b2252;">"ChangeLog"</span> (<span style="color: #8b2252;">"egrep -Hin %s ChangeLog"</span> <span style="color: #8b2252;">"~/"</span>))))
            <span style="color: #b22222;">;; </span><span style="color: #b22222;">("Spotlight" ("mdfind %s -onlyin ~/Dropbox/Documents/Library/" ""))))</span>

            (setq anything-candidate-number-limit 50) <span style="color: #b22222;">; </span><span style="color: #b22222;">50</span>
            (setq anything-input-idle-delay 0.1)      <span style="color: #b22222;">; </span><span style="color: #b22222;">0.1</span>
            (setq anything-idle-delay 0.5)            <span style="color: #b22222;">; </span><span style="color: #b22222;">0.5</span>
            (setq anything-quick-update nil))))       <span style="color: #b22222;">; </span><span style="color: #b22222;">nil</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline99" class="outline-4">
<h4 id="orgheadline99"><span class="section-number-4">6.16.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-6-16-1">
<p>
普通に anything-startup を呼んでいる場合には，anything-M-xを設定する必要はない．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show ibuffer powered by anything</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(with-eval-after-load "anything-startup"</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-x"</span>) 'anything-M-x)
(global-set-key (kbd <span style="color: #8b2252;">"C-c o"</span>) 'anything-c-moccur-occur-by-moccur)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-r"</span>) 'my:anything)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-s"</span>) 'my:anything-spotlight)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-b"</span>) 'my:anything-buffer)
<span style="color: #b22222;">;;</span><span style="color: #b22222;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline102" class="outline-3">
<h3 id="orgheadline102"><span class="section-number-3">6.17</span> [helm.el] 続・何でも絞り込みインターフェイス</h3>
<div class="outline-text-3" id="text-6-17">
<div class="org-src-container">

<pre class="src src-emacs-lisp">     (eval-after-autoload-if-found
      '(helm-M-x helm-locate helm-recentf helm-buffers-list helm-occur helm-swoop)
      <span style="color: #8b2252;">"helm-config"</span> nil t nil
      '((helm-mode 1)
        (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">diminish</span> nil t)
          (diminish 'helm-mode <span style="color: #8b2252;">" H"</span>))
        (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">helm-swoop</span> nil t)
          (set-face-attribute
           'helm-swoop-target-line-face nil <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFEDDC;">#FFEDDC</span><span style="color: #8b2252;">"</span>)
          (set-face-attribute
           'helm-swoop-target-word-face nil <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF5443;">#FF5443</span><span style="color: #8b2252;">"</span>))
        (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">helm-google</span> nil t)
          (setq helm-google-tld <span style="color: #8b2252;">"co.jp"</span>))
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">(require 'recentf-ext nil t)</span>
        <span style="color: #b22222;">;; </span><span style="color: #b22222;">helm-find-files &#12434;&#21628;&#12400;&#12379;&#12394;&#12356;</span>
        (add-to-list 'helm-completing-read-handlers-alist '(find-file . nil))
        <span style="color: #b22222;">;; </span><span style="color: #b22222;">helm-mode-ag &#12434;&#21628;&#12400;&#12379;&#12394;&#12356;</span>
        (add-to-list 'helm-completing-read-handlers-alist '(ag . nil))
        <span style="color: #b22222;">;; </span><span style="color: #b22222;">helm-mode-org-set-tags &#12434;&#21628;&#12400;&#12379;&#12394;&#12356;</span>
        (add-to-list 'helm-completing-read-handlers-alist '(org-set-tags . nil))
        (setq helm-display-source-at-screen-top nil)
            <span style="color: #b22222;">;;;         </span><span style="color: #b22222;">(setq helm-display-header-line nil)</span>
        <span style="color: #b22222;">;; </span><span style="color: #b22222;">helm-autoresize-mode &#12434;&#26377;&#21177;&#12395;&#12375;&#12388;&#12388; 30% &#12395;&#22266;&#23450;</span>
        (helm-autoresize-mode 1)
        (setq helm-autoresize-max-height 30)
        (setq helm-autoresize-min-height 30)         
        (set-face-attribute 'helm-source-header nil
                            <span style="color: #483d8b;">:height</span> 1.0 <span style="color: #483d8b;">:family</span> <span style="color: #8b2252;">"Verdana"</span> <span style="color: #483d8b;">:weight</span> 'normal
                            <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #666666;">#666666</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #DADADA;">#DADADA</span><span style="color: #8b2252;">"</span>)
        (<span style="color: #a020f0;">when</span> (eq window-system 'ns)
          (setq helm-locate-command <span style="color: #8b2252;">"mdfind -name %s %s"</span>)
          )

        <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12371;&#12398;&#20462;&#27491;&#12364;&#24517;&#35201;</span>
        (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">helm-migemo</span> nil t)
          (eval-after-load <span style="color: #8b2252;">"helm-migemo"</span>
            '(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">helm-compile-source--candidates-in-buffer</span> (source)
               (<span style="color: #a020f0;">helm-aif</span> (assoc 'candidates-in-buffer source)
                   (append source
                           `((candidates
                              . ,(or (cdr it)
                                     (<span style="color: #a020f0;">lambda</span> ()
                                       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Do not use `</span><span style="color: #b22222;">source</span><span style="color: #b22222;">' because other plugins</span>
                                       <span style="color: #b22222;">;; </span><span style="color: #b22222;">(such as helm-migemo) may change it</span>
                                       (helm-candidates-in-buffer
                                        (helm-get-current-source)))))
                             (volatile) (match identity)))
                 source))))
        ))
</pre>
</div>
</div>

<div id="outline-container-orgheadline101" class="outline-4">
<h4 id="orgheadline101"><span class="section-number-4">6.17.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-6-17-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(helm-M-x helm-locate helm-recentf helm-buffers-list
                  helm-occur helm-swoop)
       <span style="color: #8b2252;">"helm-config"</span> nil t nil
       '())
  (global-set-key (kbd <span style="color: #8b2252;">"C-c f f"</span>) 'helm-locate)
  (global-set-key (kbd <span style="color: #8b2252;">"C-x C-b"</span>) 'helm-buffers-list)
  (global-set-key (kbd <span style="color: #8b2252;">"M-s"</span>) 'helm-swoop)
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-r"</span>) 'helm-recentf)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c o"</span>) 'helm-occur)
  (global-set-key (kbd <span style="color: #8b2252;">"M-x"</span>) 'helm-M-x)
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline103" class="outline-3">
<h3 id="orgheadline103"><span class="section-number-3">6.18</span> [stripe-buffer.el] テーブルの色をストライプにする</h3>
<div class="outline-text-3" id="text-6-18">
<p>
<a href="https://github.com/sabof/stripe-buffer/blob/master/stripe-buffer.el">stripe-buffer.el</a>を使います．重くツリーが多いOrgバッファだと激重になる可能性があります．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(
                                        <span style="color: #b22222;">;         </span><span style="color: #b22222;">(require 'org-install)</span>
   (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">stripe-buffer</span> nil t)
   (add-hook 'org-mode-hook 'turn-on-stripe-table-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline104" class="outline-3">
<h3 id="orgheadline104"><span class="section-number-3">6.19</span> [rainbow-delimiters] 対応するカッコに色を付ける</h3>
<div class="outline-text-3" id="text-6-19">
<p>
複数のカッコが重なる言語では，カッコの対応関係がひと目で理解し難い場合があります． <code>rainbow-delimiters</code> を使うと，対応するカッコを七色に色付けして見やすくできます．デフォルトだと色がパステル調で薄いので，パラメータを追加して調整します．<br  />
</p>

<p>
<code>org-block</code> 内でうまく動かないようなので，本格導入は様子見中です．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"rainbow-delimiters"</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">https://yoo2080.wordpress.com/2013/12/21/small-rainbow-delimiters-tutorial/</span>
  (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cl-lib</span>)
  (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">color</span>)
  (<span style="color: #a020f0;">cl-loop</span>
   for index from 1 to rainbow-delimiters-max-face-count
   do
   (<span style="color: #a020f0;">let</span> ((face (intern (format <span style="color: #8b2252;">"rainbow-delimiters-depth-%d-face"</span> index))))
     (cl-callf color-saturate-name (face-foreground face) 50))))

(add-hook 'prog-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (<span style="color: #a020f0;">unless</span> (equal (buffer-name) <span style="color: #8b2252;">"*scratch*"</span>)
               (rainbow-delimiters-mode))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline105" class="outline-3">
<h3 id="orgheadline105"><span class="section-number-3">6.20</span> [git-gutter-fringe] 編集差分をフレーム端で視覚化</h3>
<div class="outline-text-3" id="text-6-20">
<p>
git-gutter-fringe を使えば，フレーム幅の変化を気にしなくて済みます．とりあえず， <code>org-mode</code> を初回起動するときに紐づけています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(git-gutter-mode) <span style="color: #8b2252;">"git-gutter-fringe"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
       '((setq git-gutter:lighter <span style="color: #8b2252;">""</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">"!"</span>
         (fringe-helper-define 'git-gutter-fr:modified nil
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">"+"</span>
         (fringe-helper-define 'git-gutter-fr:added nil
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">".XXXXXX."</span>
           <span style="color: #8b2252;">".XXXXXX."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"...XX..."</span>
           <span style="color: #8b2252;">"........"</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">"-"</span>
         (fringe-helper-define 'git-gutter-fr:deleted nil
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">".XXXXXX."</span>
           <span style="color: #8b2252;">".XXXXXX."</span>
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"........"</span>
           <span style="color: #8b2252;">"........"</span>)
         (setq git-gutter-fr:side 'right-fringe)
         (set-face-foreground 'git-gutter-fr:added    <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF2600;">#FF2600</span><span style="color: #8b2252;">"</span>)
         (set-face-foreground 'git-gutter-fr:modified <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #ffa500;">orange</span><span style="color: #8b2252;">"</span>)
         (set-face-foreground 'git-gutter-fr:deleted  <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #3cb371;">medium sea green</span><span style="color: #8b2252;">"</span>)))

  (add-hook 'emacs-lisp-mode-hook 'git-gutter-mode)
  (add-hook 'lisp-mode-hook 'git-gutter-mode)
  (add-hook 'perl-mode-hook 'git-gutter-mode)
  (add-hook 'c-mode-common-hook 'git-gutter-mode)
  (add-hook 'nxml-mode-hook 'git-gutter-mode)
  (add-hook 'web-mode-hook 'git-gutter-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline106" class="outline-3">
<h3 id="orgheadline106"><span class="section-number-3">6.21</span> [zlc.el] find-file バッファを zsh ライクにする</h3>
<div class="outline-text-3" id="text-6-21">
<p>
ファイル選択を zsh ライクに変更できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">zlc</span> nil t)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://d.hatena.ne.jp/mooz/20101003/p1</span>
  (zlc-mode 1)
  (set-face-attribute 'zlc-selected-completion-face nil
                      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #000000;">#000000</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #9DFFD2;">#9DFFD2</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:bold</span> t)
  (setq zlc-select-completion-immediately t)
  (<span style="color: #a020f0;">let</span> ((map minibuffer-local-map))
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">like menu select</span>
    (define-key map (kbd <span style="color: #8b2252;">"&lt;down&gt;"</span>) 'zlc-select-next-vertical)
    (define-key map (kbd <span style="color: #8b2252;">"&lt;up&gt;"</span>) 'zlc-select-previous-vertical)
    (define-key map (kbd <span style="color: #8b2252;">"&lt;left&gt;"</span>) 'zlc-select-next)
    (define-key map (kbd <span style="color: #8b2252;">"&lt;right&gt;"</span>) 'zlc-select-previous)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">reset selection</span>
    (define-key map (kbd <span style="color: #8b2252;">"C-c"</span>) 'zlc-reset)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline111" class="outline-2">
<h2 id="orgheadline111"><span class="section-number-2">7</span> メディアサポート</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgheadline108" class="outline-3">
<h3 id="orgheadline108"><span class="section-number-3">7.1</span> [bongo.el] Emacsのバッファで音楽ライブラリを管理する</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs">iTunes の代わりに Emacs を使う</a><br  />
</p>

<p>
autoload を設定すると， <code>*.bango-playlist</code> や <code>*.bongo-library</code> から起動できないので，明示的に require している．なお，bongo-mplayer を使う場合，bongo を先にrequireするとうまく動作しない（bongo.el の最後で，bongo-mplayer が provide されているからだと思われる）．<br  />
</p>

<p>
以下の設定では，autoload で使いつつ，=M-x init-bongo= でプレイリストを読み込んでいる．これならば，Emacs起動時は軽量で，かつ，プレイリストの訪問で Bongo を開始できる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;  </span><span style="color: #b22222;">(require 'bongo)</span>
(<span style="color: #a020f0;">when</span> (autoload-if-found 'bongo <span style="color: #8b2252;">"bongo-mplayer"</span> nil t)
  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-bongo</span> ()
    (interactive)
    (bongo)
    (find-file <span style="color: #8b2252;">"~/Desktop/next/Tidy/hoge.bongo-playlist"</span>))
  (eval-after-load <span style="color: #8b2252;">"bongo-mplayer"</span>
    '(<span style="color: #a020f0;">progn</span>
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Volume control</span>
                                        <span style="color: #b22222;">;         </span><span style="color: #b22222;">(require volume.el nil t)</span>
       (setq bongo-mplayer-extra-arguments '(<span style="color: #8b2252;">"-volume"</span> <span style="color: #8b2252;">"1"</span>))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid error when editing bongo buffers</span>
       (setq yank-excluded-properties nil)
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Use mplayer</span>
       (setq bongo-enabled-backends '(mplayer)))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(bongo) <span style="color: #8b2252;">"bongo-mplayer"</span> nil t nil
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">Volume control</span>
   <span style="color: #b22222;">;;         </span><span style="color: #b22222;">(require volume.el nil t)</span>
   (setq bongo-mplayer-extra-arguments '(<span style="color: #8b2252;">"-volume"</span> <span style="color: #8b2252;">"1"</span>))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid error when editing bongo buffers</span>
   (setq yank-excluded-properties nil)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Use mplayer</span>
   (setq bongo-enabled-backends '(mplayer))

   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-bongo</span> ()
     (interactive)
     (bongo)
     (find-file <span style="color: #8b2252;">"~/Desktop/next/Tidy/hoge.bongo-playlist"</span>))))
</pre>
</div>

<p>
org-player.el を使えば，org-mode のバッファから Bongo を操作できる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 'org-mode <span style="color: #8b2252;">"org-player"</span> nil t)
</pre>
</div>

<p>
音量コントロールには，<a href="https://github.com/dbrock/volume-el">volume.el</a>が必要です．設定がうまくいかないので保留中<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'volume <span style="color: #8b2252;">"volume"</span> <span style="color: #8b2252;">"Tweak your sound card volume."</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline109" class="outline-3">
<h3 id="orgheadline109"><span class="section-number-3">7.2</span> [GoogleMaps.el] GoogleMaps を Emacs 内で使う</h3>
<div class="outline-text-3" id="text-7-2">
<p>
<a href="http://julien.danjou.info/software/google-maps.el">http://julien.danjou.info/software/google-maps.el</a><br  />
</p>

<p>
<code>M-x gogole-maps</code> で起動します．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(google-maps) <span style="color: #8b2252;">"google-maps"</span> nil t nil
 '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-location-google-maps</span> nil t)))
</pre>
</div>

<p>
<code>+/-</code> でズーム， <code>矢印</code> で移動， <code>q</code> で終了します．また， <code>w</code> でURLを取得してコピー， <code>t</code> で地図の種別を変更できます．<br  />
</p>

<p>
Org-mode を使っている場合には， <code>C-c M-L</code> で表示されるプロンプトで検索すると，プロパティにそのキーワードが記録されます．後から <code>C-c M-l</code> すれば，いつでも地図を表示できるようになります．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline110" class="outline-3">
<h3 id="orgheadline110"><span class="section-number-3">7.3</span> [org-google-weather.el] org-agenda に天気を表示する</h3>
<div class="outline-text-3" id="text-7-3">
<p>
残念ながら Google API が変更になり動かなくなったそうです．<br  />
</p>

<p>
<a href="http://julien.danjou.info/software/google-weather.el">http://julien.danjou.info/software/google-weather.el</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">google-weather</span> nil t)
(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-google-weather</span> nil t)
  '(org-google-weather-use-google-icons t))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline126" class="outline-2">
<h2 id="orgheadline126"><span class="section-number-2">8</span> 履歴／ファイル管理</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-orgheadline112" class="outline-3">
<h3 id="orgheadline112"><span class="section-number-3">8.1</span> Undoバッファを無限に取る</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq undo-outer-limit nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline113" class="outline-3">
<h3 id="orgheadline113"><span class="section-number-3">8.2</span> [undo-tree] 編集履歴をわかりやすくたどる</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Undoのツリーが表示され，履歴をたどれます． <code>C-x u</code> と <code>q</code> に対して，フレームサイズの変更を紐付けています．また， <code>auto-save-buffers</code> が org-files をどんどん保存して記録してしまうので，ツリーを選んでいる時に auto-save-buffers が発動するのを別途抑制しています．加えて， <code>org-tree-slide</code> でナローイングしていると，タイムスタンプが記録される時に履歴が辿れなくなるので， <code>org-tree-slide</code> が有効の時は，タイムスタンプを押させないように別途制限を加えています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(my:undo-tree-visualize) <span style="color: #8b2252;">"undo-tree"</span> nil t nil
       '((global-undo-tree-mode)
         (setq undo-tree-mode-lighter nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12514;&#12540;&#12489;&#12521;&#12452;&#12531;&#38936;&#22495;&#12434;&#31680;&#32004;</span>
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:undo-tree-visualizer-quit</span> ()
           (interactive)
           (undo-tree-visualizer-quit)
           (delete-window)
           (set-frame-width (selected-frame) 80))
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:undo-tree-visualize</span> ()
           (interactive)
           (set-frame-width (selected-frame) 163)
           (undo-tree-visualize))

         (define-key undo-tree-visualizer-mode-map (kbd <span style="color: #8b2252;">"q"</span>)
           'my:undo-tree-visualizer-quit)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">undo-tree-map &#12395;&#12418;&#24517;&#35201;</span>
         (define-key undo-tree-map (kbd <span style="color: #8b2252;">"C-x u"</span>)
           'my:undo-tree-visualize)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-x u"</span>) 'my:undo-tree-visualize))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline114" class="outline-3">
<h3 id="orgheadline114"><span class="section-number-3">8.3</span> バッファ保存時にバックアップファイルを生成する</h3>
<div class="outline-text-3" id="text-8-3">
<p>
バッファが保存されるとき，必ずバックアップを生成する．<br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Backup the buffer whenever the buffer is saved</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-s"</span>)
                '(<span style="color: #a020f0;">lambda</span> () (interactive) (save-buffer 16)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline115" class="outline-3">
<h3 id="orgheadline115"><span class="section-number-3">8.4</span> バッファ保存時にバックアップを生成させない</h3>
<div class="outline-text-3" id="text-8-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">*.~</span>
(setq make-backup-files nil)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">.#*</span>
(setq auto-save-default nil)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">auto-save-list</span>
(setq auto-save-list-file-prefix nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline116" class="outline-3">
<h3 id="orgheadline116"><span class="section-number-3">8.5</span> ミニバッファの履歴を保存しリストアする</h3>
<div class="outline-text-3" id="text-8-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(savehist-mode) <span style="color: #8b2252;">"savehist"</span> nil t nil
       '((setq savehist-file <span style="color: #8b2252;">"~/Dropbox/emacs.d/.history"</span>)))
  (savehist-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline117" class="outline-3">
<h3 id="orgheadline117"><span class="section-number-3">8.6</span> 履歴サイズを大きくする</h3>
<div class="outline-text-3" id="text-8-6">
<p>
tで無限大に指定する．<br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq history-length 1000)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline118" class="outline-3">
<h3 id="orgheadline118"><span class="section-number-3">8.7</span> Emacs終了時に開いていたバッファを起動時に復元する</h3>
<div class="outline-text-3" id="text-8-7">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/DeskTop">desktop.el</a> を使う．<br  />
</p>

<p>
org バッファを CONTENT view で大量に開いていると，再起動が非常に遅くなるので利用を中止した．代替手段として，session.el と recentf の組み合わせがある．最近利用したファイルとそのカーソル位置が保持されるため，最後に訪問していたファイルを比較的簡単に復元できる．頻繁に復元するバッファには，別途キーバインドを割り当てておけば問題ない．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(desktop-save desktop-clear desktop-load-default desktop-remove)
 <span style="color: #8b2252;">"desktop"</span> nil t nil
 '((desktop-save-mode 1)
   (setq desktop-files-not-to-save <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">^/tmp</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/var</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/ssh:</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline119" class="outline-3">
<h3 id="orgheadline119"><span class="section-number-3">8.8</span> 最近開いたファイルリストを保持</h3>
<div class="outline-text-3" id="text-8-8">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/RecentFiles">recentf.el</a> を使う．<br  />
</p>

<p>
<a href="http://d.hatena.ne.jp/tomoya/20110217/1297928222">http://d.hatena.ne.jp/tomoya/20110217/1297928222</a><br  />
</p>

<p>
session.el でも履歴管理できるが，anything のソースとして使っているので併用している．<br  />
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．<br  />
</p>

<p>
recentf-auto-cleanup を ='mode= などにすると起動時にファイルのクリーニングが行われるてしまうので，='never= で回避し，アイドルタイマーなどで対応する．これだけで50[ms]ほど起動を高速化できる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">     (<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
            '(rencetf-mode recentf-save-list-without-msg) <span style="color: #8b2252;">"recentf"</span> nil t nil
            '((<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">recentf-save-list-without-msg</span> ()
                (interactive)
                (<span style="color: #a020f0;">let</span> ((message-log-max nil))
                  (<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">shut-up</span> nil t)
                      (shut-up (recentf-save-list))
                    (recentf-save-list)))
                (message <span style="color: #8b2252;">""</span>))
              (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">recentf-cleanup-without-msg</span> ()
                (interactive)
                (<span style="color: #a020f0;">let</span> ((message-log-max nil))
                  (<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">shut-up</span> nil t)
                      (shut-up (recentf-cleanup))
                    (recentf-cleanup)))
                  (message <span style="color: #8b2252;">""</span>))
              (add-hook 'focus-out-hook 'recentf-save-list-without-msg)
              (add-hook 'focus-out-hook 'recentf-cleanup-without-msg)

              (setq recentf-max-saved-items 2000)
              (setq recentf-save-file
                    (expand-file-name <span style="color: #8b2252;">"~/.emacs.d/recentf"</span>))
              (setq recentf-auto-cleanup 'never)
              (setq recentf-exclude
                    '(<span style="color: #8b2252;">".recentf"</span> <span style="color: #8b2252;">"^/tmp\\.*"</span> <span style="color: #8b2252;">"^/private\\.*"</span> <span style="color: #8b2252;">"^/var/folders\\.*"</span> <span style="color: #8b2252;">"/TAGS$"</span>))))
       (add-hook 'after-init-hook 'recentf-mode)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline120" class="outline-3">
<h3 id="orgheadline120"><span class="section-number-3">8.9</span> 深夜にバッファを自動整理する</h3>
<div class="outline-text-3" id="text-8-9">
<p>
<a href="http://www.emacswiki.org/emacs-zh/CleanBufferList">http://www.emacswiki.org/emacs-zh/CleanBufferList</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">midnight</span> nil t)
  (setq clean-buffer-list-buffer-names
        (append clean-buffer-list-kill-buffer-names
                '(<span style="color: #8b2252;">"note.txt"</span>)))
  (setq clean-buffer-list-delay-general 1)
  (setq clean-buffer-list-delay-special 10))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline121" class="outline-3">
<h3 id="orgheadline121"><span class="section-number-3">8.10</span> [auto-save-buffers.el] 一定間隔でバッファを保存する</h3>
<div class="outline-text-3" id="text-8-10">
<p>
<a href="http://0xcc.net/misc/auto-save/">http://0xcc.net/misc/auto-save/</a><br  />
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．同じ機能で比較的新しいパッケージに， <code>real-auto-save</code> があります．ただ，私の場合は，以下のようなモードごとの制御がうまくできなかったので移行していません．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-save-buffers</span> nil t)
           (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">shut-up</span> nil t))
  (run-with-idle-timer 1.6 t
                       '(<span style="color: #a020f0;">lambda</span> ()
                          (<span style="color: #a020f0;">when</span> (and (not (equal major-mode
                                                 'undo-tree-visualizer-mode))
                                     (not (equal major-mode 'diff-mode)))
                            (shut-up (auto-save-buffers))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline122" class="outline-3">
<h3 id="orgheadline122"><span class="section-number-3">8.11</span> [backup-dir.el] バックアップファイルを一箇所に集める</h3>
<div class="outline-text-3" id="text-8-11">
<p>
<code>backup-each-save</code> を使うようになりました．<br  />
</p>

<p>
<a href="http://www.emacswiki.org/emacs/BackupDirectory">http://www.emacswiki.org/emacs/BackupDirectory</a><br  />
<a href="http://www.northbound-train.com/emacs-hosted/backup-dir.el">http://www.northbound-train.com/emacs-hosted/backup-dir.el</a><br  />
<a href="http://www.northbound-train.com/emacs.html">http://www.northbound-train.com/emacs.html</a><br  />
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(make-variable-buffer-local 'backup-inhibited)
(setq backup-files-store-dir <span style="color: #8b2252;">"~/.emacs.d/backup"</span>)
(<span style="color: #a020f0;">unless</span> (file-directory-p backup-files-store-dir) 
  (message <span style="color: #8b2252;">"!!! %s does not exist. !!!"</span> backup-files-store-dir)
  (sleep-for 1))
(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">backup-dir</span> nil t)
  (<span style="color: #a020f0;">when</span> (file-directory-p backup-files-store-dir)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">backup path</span>
    (setq bkup-backup-directory-info '((t <span style="color: #8b2252;">"~/.emacs.d/backup"</span> ok-create)))
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">for tramp</span>
    (setq tramp-bkup-backup-directory-info bkup-backup-directory-info)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">generation properties</span>
    (setq delete-old-versions t
          kept-old-versions 0
          kept-new-versions 5
          version-control t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline123" class="outline-3">
<h3 id="orgheadline123"><span class="section-number-3">8.12</span> [backup-each-save] クラッシュに備える</h3>
<div class="outline-text-3" id="text-8-12">
<p>
直近のファイルを常にバックアップします． <code>backup-dir.el</code> でも良いですが，バックアップの目的が，バッファ編集中に <code>emacs</code> が落ちる時の保険ならば， <code>backup-each-save</code> の方が適切な場合があります．以下の例では，すべてのファイルを保存の度に保存しつつ， <code>emacs</code> 終了時に7日前までのバックアップファイルをすべて削除するようにしています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">backup-each-save</span> nil t)
  (setq backup-each-save-mirror-location <span style="color: #8b2252;">"~/.emacs.d/backup"</span>)
  (setq backup-each-save-time-format <span style="color: #8b2252;">"%y-%m-%d_%M:%S"</span>)
  (setq backup-each-save-size-limit 1048576)
  (add-hook 'after-save-hook
            '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal (buffer-name) <span style="color: #8b2252;">"recentf"</span>)
                          (backup-each-save)))))

(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(recursive-delete-backup-files delete-backup-files)
       <span style="color: #8b2252;">"utility"</span> nil t nil
       '())
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">backup-each-save &#12364;&#20316;&#12427;&#12501;&#12449;&#12452;&#12523;&#12398;&#12358;&#12385;&#26465;&#20214;&#12395;&#12354;&#12358;&#12418;&#12398;&#12434;&#32066;&#20102;&#26178;&#12395;&#21066;&#38500;</span>
  (add-hook 'kill-emacs-hook '(<span style="color: #a020f0;">lambda</span> () (recursive-delete-backup-files 7))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline124" class="outline-3">
<h3 id="orgheadline124"><span class="section-number-3">8.13</span> [session.el] 様々な履歴を保存し復元に利用する</h3>
<div class="outline-text-3" id="text-8-13">
<p>
<a href="http://emacs-session.sourceforge.net/">http://emacs-session.sourceforge.net/</a><br  />
</p>

<ul class="org-ul">
<li>入力履歴の保持（検索語，表示したバッファ履歴）<br  /></li>
<li>保存時のカーソル位置の保持<br  /></li>
<li>キルリングの保持<br  /></li>
<li>変更が加えられたファイル履歴の保持<br  /></li>
</ul>

<p>
M-x session-save-session<br  />
</p>

<p>
session-undo-check を指定していると，保存時ではなくバッファを閉じるときの状態を保持する．<br  />
</p>

<p>
Org-mode と併用する場合は，my:org-reveal-session-jump の設定が必須．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       'session-initialize <span style="color: #8b2252;">"session"</span> nil t nil
       '((add-to-list 'session-globals-exclude 'org-mark-ring)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Change save point of session.el</span>
         (setq session-save-file
               (expand-file-name <span style="color: #8b2252;">"~/Dropbox/emacs.d/.session"</span>))
         (setq session-initialize '(de-saveplace session keys menus places)
               session-globals-include '((kill-ring 100)
                                         (session-file-alist 100 t)
                                         (file-name-history 200)
                                         search-ring regexp-search-ring))
         (setq session-undo-check -1)))

  (add-hook 'after-init-hook 'session-initialize))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">FIXME</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq session-set-file-name-exclude-regexp</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">"^/private/\\.\\*"))</span>
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">"[/\\]\\.overview\\|[/\\]\\.session\\|News[/\\]\\|^/private\\.*\\|^/var/folders\\.*"))</span>
</pre>
</div>

<p>
次はテスト中．orgバッファを開いたらカーソル位置をorg-revealしたいが，time-stampなどと組み合わせたり，org-tree-slideと組み合わせていると，うまくいかない．バッファを表示した時に org-reveal (C-c C-r) を打つのをサボりたいだけなのだが．．．<br  />
</p>

<p>
<a href="http://www.emacswiki.org/emacs/EmacsSession">http://www.emacswiki.org/emacs/EmacsSession</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'session-initialize <span style="color: #8b2252;">"session"</span> nil t)
  (add-hook 'after-init-hook 'session-initialize)
  (eval-after-load <span style="color: #8b2252;">"session"</span>
    '(<span style="color: #a020f0;">progn</span>
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">For Org-mode</span>
       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:maybe-reveal</span> ()
         (interactive)
         (<span style="color: #a020f0;">when</span> (and (or (memq major-mode '(org-mode outline-mode))
                        (and (boundp 'outline-minor-mominor-de)
                             outline-minor-mode))
                    (outline-invisible-p))
           (<span style="color: #a020f0;">if</span> (eq major-mode 'org-mode)
               (org-reveal)
             (show-subtree))))

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:org-reveal-session-jump</span> ()
         (message <span style="color: #8b2252;">"call!"</span>)
         (<span style="color: #a020f0;">when</span> (and (eq major-mode 'org-mode)
                    (outline-invisible-p))
           (org-reveal)))

       <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-x C-/</span>
       (add-hook 'session-after-jump-to-last-change-hook
                 'my:maybe-reveal))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline125" class="outline-3">
<h3 id="orgheadline125"><span class="section-number-3">8.14</span> [wakatime-mode.el] WakaTime を利用して作業記録する</h3>
<div class="outline-text-3" id="text-8-14">
<ol class="org-ol">
<li><a href="https://www.wakati.me/">https://www.wakati.me/</a>（API発行とログGUI表示）<br  /></li>
<li><a href="https://github.com/wakatime/wakatime">https://github.com/wakatime/wakatime</a>（ログ記録用スクリプト）<br  /></li>
<li><a href="https://github.com/nyuhuhuu/wakatime-mode">https://github.com/nyuhuhuu/wakatime-mode</a>（Emacs用プラグイン）<br  /></li>
</ol>

<p>
利用開始前に，ログ表示サイトでルールをカスタマイズしておくとよい．例えば，拡張子が <code>.org</code> なファイルの場合，言語設定を <code>Text</code> にする，という具合に．すると，グラフ表示がわかりやすくなる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">wakatime-mode</span> nil t)
    (setq wakatime-api-key <span style="color: #8b2252;">"&lt;insert your own api key&gt;"</span>)
    (setq wakatime-cli-path <span style="color: #8b2252;">"/Users/taka/Dropbox/emacs.d/bin/wakatime-cli.py"</span>)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12377;&#12409;&#12390;&#12398;&#12496;&#12483;&#12501;&#12449;&#12391;&#35370;&#21839;&#26178;&#12395;&#35352;&#37682;&#12434;&#38283;&#22987;</span>
<span style="color: #b22222;">;    </span><span style="color: #b22222;">(global-wakatime-mode)</span>
    )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline136" class="outline-2">
<h2 id="orgheadline136"><span class="section-number-2">9</span> 開発サポート</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-orgheadline127" class="outline-3">
<h3 id="orgheadline127"><span class="section-number-3">9.1</span> 便利キーバインド</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-;"</span>) 'comment-dwim) <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-; is the defualt</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c c"</span>) 'compile)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline128" class="outline-3">
<h3 id="orgheadline128"><span class="section-number-3">9.2</span> [gist.el] Gist インターフェイス</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found '(gist) <span style="color: #8b2252;">"gist"</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline129" class="outline-3">
<h3 id="orgheadline129"><span class="section-number-3">9.3</span> [doxymacs.el] Doxygen のコメントを簡単に入力する</h3>
<div class="outline-text-3" id="text-9-3">
<p>
<a href="http://doxymacs.sourceforge.net/">http://doxymacs.sourceforge.net/</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       'doxymacs-mode <span style="color: #8b2252;">"doxymacs"</span> nil t nil
       '((setq doxymacs-doxygen-style <span style="color: #8b2252;">"JavaDoc"</span>)
         (add-hook 'font-lock-mode-hook
                   '(<span style="color: #a020f0;">lambda</span> () (interactive)
                      (<span style="color: #a020f0;">when</span> (or (eq major-mode 'c-mode)
                                (eq major-mode 'c++-mode))
                        (doxymacs-font-lock))))
         (define-key doxymacs-mode-map (kbd <span style="color: #8b2252;">"C-c C-s"</span>) 'ff-find-other-file)))
  (add-hook 'c-mode-common-hook 'doxymacs-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline130" class="outline-3">
<h3 id="orgheadline130"><span class="section-number-3">9.4</span> [matlab.el] Matlab用の設定</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (&gt; emacs-major-version 23))
  (eval-after-autoload-if-found
   '(matlab-mode matlab-shell) <span style="color: #8b2252;">"matlab"</span> <span style="color: #8b2252;">"Enter Matlab mode."</span> t nil
   '())
  (push '(<span style="color: #8b2252;">"\\.m$"</span> . matlab-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline131" class="outline-3">
<h3 id="orgheadline131"><span class="section-number-3">9.5</span> [flycheck.el] 構文エラー表示</h3>
<div class="outline-text-3" id="text-9-5">
<p>
auto-complete より前に hook設定しておくと余計なエラーが出ないようです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(flychek-mode) <span style="color: #8b2252;">"flycheck"</span> nil t nil
       '(<span style="color: #b22222;">;;</span><span style="color: #b22222;">http://qiita.com/senda-akiha/items/cddb02cfdbc0c8c7bc2b</span>
         (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">flycheck-pos-tip</span> nil t)
           '(custom-set-variables
             '(flycheck-display-errors-function
               #'flycheck-pos-tip-error-messages)))))
  (add-hook 'c-mode-common-hook 'flycheck-mode)
  (add-hook 'perl-mode-hook 'flycheck-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline132" class="outline-3">
<h3 id="orgheadline132"><span class="section-number-3">9.6</span> [auto-complete.el] 自動補完機能</h3>
<div class="outline-text-3" id="text-9-6">
<p>
<a href="http://cx4a.org/software/auto-complete/manual.ja.html">http://cx4a.org/software/auto-complete/manual.ja.html</a><br  />
</p>

<ul class="org-ul">
<li>辞書データを使う（ <code>ac-dictionary-directories</code> ）<br  /></li>
<li>auto-complete.el, auto-complete-config.el, fuzzy.el, popup.el を使う．<br  /></li>
<li><a href="http://cx4a.org/software/auto-complete/manual.ja.html">日本語マニュアル</a><br  /></li>
<li>ac-auto-start を 4 にしておけば，3文字までは TAB を yasnippet に渡せる．<br  /></li>
</ul>

<p>
Org-mode ユーザにとって <code>TAB</code> は非常に重要なコマンド．そこに <code>auto-complete</code> と <code>yasnippet</code> が <code>TAB</code> を奪いに来るので，住み分けが重要になる．=ac-auto-start= を=4=にすると，&lt;s=TAB= によるソースブロックの短縮入力を <code>yasnippet</code> で実行できる（この目的だけならば=3=を指定してもいい）．&lt;sys などと4文字入力すると，=auto-complete= が動いて &lt;system&gt; などを補完してくれる．もちろん，見出しで <code>TAB</code> を押すときには，ツリーの表示／非表示の切り替えになる．<br  />
</p>

<p>
情報源については，<a href="http://cx4a.org/software/auto-complete/manual.ja.html#.E6.A8.99.E6.BA.96.E6.83.85.E5.A0.B1.E6.BA.90">オンラインマニュアル</a>を参照のこと．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
         '(auto-complete ac-default-setup ac-org-mode-setup ac-cc-mode-setup)
         <span style="color: #8b2252;">"auto-complete"</span> nil t nil
         '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-complete-config</span> nil t)
           (ac-config-default)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#36861;&#21152;&#12398;&#12513;&#12472;&#12515;&#12540;&#12514;&#12540;&#12489;&#12434;&#35373;&#23450;</span>
           (add-to-list 'ac-modes 'objc-mode)
           (add-to-list 'ac-modes 'org-mode)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">ac-modes &#12395;&#12354;&#12427;&#12513;&#12472;&#12515;&#12540;&#12514;&#12540;&#12489;&#12391;&#26377;&#21177;&#12395;&#12377;&#12427;</span>
           <span style="color: #b22222;">;;</span><span style="color: #b22222;">lisp, c, c++, java, perl, cperl, python, makefile, sh, fortran, f90</span>
           (global-auto-complete-mode t)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#36766;&#26360;</span>
           (add-to-list 'ac-dictionary-directories <span style="color: #8b2252;">"~/.emacs.d/ac-dict"</span>)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">history</span>
           (setq ac-comphist-file <span style="color: #8b2252;">"~/Dropbox/config/ac-comphist.dat"</span>)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">n&#25991;&#23383;&#20197;&#19978;&#12391;&#35036;&#23436;&#34920;&#31034;&#12377;&#12427;&#65288;"&lt;s TAB" &#12398;&#22580;&#21512; yasnippet &#12364;&#21628;&#12400;&#12428;&#12427;&#65289;</span>
           (setq ac-auto-start 4)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">n&#31186;&#24460;&#12395;&#12513;&#12491;&#12517;&#12540;&#12434;&#34920;&#31034;</span>
           (setq ac-auto-show-menu 1.0)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12484;&#12540;&#12523;&#12481;&#12483;&#12503;&#12398;&#34920;&#31034;</span>
           (setq ac-use-quick-help t)
           (setq ac-quick-help-delay 2.0)
           (setq ac-quick-help-height 10)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-n/C-p &#12391;&#12513;&#12491;&#12517;&#12540;&#12434;&#12383;&#12393;&#12427;</span>
           (setq ac-use-menu-map t)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">TAB &#12391;&#35036;&#23436;&#65288;org-mode &#12391;&#12418;&#21177;&#12367;&#12424;&#12358;&#12395;&#12377;&#12427;&#65289;</span>
           (define-key ac-completing-map [tab] 'ac-complete)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">RET &#12391;&#12398;&#35036;&#23436;&#12434;&#31105;&#27490;</span>
           (define-key ac-completing-map <span style="color: #8b2252;">"\r"</span> nil)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#35036;&#23436;&#12513;&#12491;&#12517;&#12540;&#12398;&#34920;&#31034;&#31934;&#24230;&#12434;&#39640;&#12417;&#12427;</span>
           (setq popup-use-optimized-column-computation nil)
           <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq ac-candidate-max 10)</span>

           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-org-mode-setup</span> ()
             <span style="color: #b22222;">;;            </span><span style="color: #b22222;">(message " &gt;&gt; ac-org-mode-setup")</span>
             (setq ac-sources '(
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-abbrev ; Emacs &#12398;&#30053;&#35486;</span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-css-property ; heavy</span>
                                ac-source-dictionary <span style="color: #b22222;">; </span><span style="color: #b22222;">&#36766;&#26360;</span>
                                ac-source-features
                                ac-source-filename
                                ac-source-files-in-current-dir
                                ac-source-functions
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-gtags</span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-imenu </span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-semantic</span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-symbols </span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-variables</span>
                                   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">ac-source-yasnippet</span>
                                )))

           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-default-setup</span> ()
             <span style="color: #b22222;">;;            </span><span style="color: #b22222;">(message " &gt;&gt; ac-default-setup")</span>
             (setq ac-sources '(ac-source-abbrev
                                ac-source-dictionary
                                ac-source-words-in-same-mode-buffers)))
           ))

    (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'objc-mode-hook))
      (add-hook hook 'ac-default-setup))
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">*scratch* &#12496;&#12483;&#12501;&#12449;&#12391;&#12399;&#28961;&#21177;&#21270;</span>
    (add-hook 'lisp-mode-hook
              '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal <span style="color: #8b2252;">"*scratch*"</span> (buffer-name))
                            (ac-default-setup))))
    (add-hook 'org-mode-hook 'ac-org-mode-setup)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline134" class="outline-3">
<h3 id="orgheadline134"><span class="section-number-3">9.7</span> [auto-complete-clang.el] オムニ補完</h3>
<div class="outline-text-3" id="text-9-7">
<p>
C++バッファでメソッドを補完対象とする．try-catch を使っている場合， <code>-fcxx-exceptions</code> オプションが必要で，これはプリコンパイルヘッダを生成する時も同じだ．この設定では， <code>~/Dropbox/config/</code> 以下に <code>stdafx.pch</code> を生成する必要があるため，以下のコマンドを用いてプリコンパイルヘッダを生成する．ヘッダファイルのパスを適切に与えれば，Boostや自作のライブラリも補完対象に設定できる．<br  />
</p>

<p>
現状では，補完直後にデフォルトの引数がすべて書き込まれてしまう．なんかうまいことしたいものだ．<br  />
</p>

<div class="org-src-container">

<pre class="src src-sh">clang -cc1 -x c++-header -fcxx-exceptions ./stdafx.h -emit-pch -o ./stdafx.pch -I/opt/local/include -I/opt/local/include/netpbm
</pre>
</div>

<p>
以下の設定は，先に <code>auto-complete.el</code> に関する設定を読み込んでいることを前提としている．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(auto-complete ac-cc-mode-setup) <span style="color: #8b2252;">"auto-complete"</span> nil t nil
       '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-complete-clang</span> nil t)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">ac-cc-mode-setup &#12398;&#12458;&#12540;&#12496;&#12540;&#12521;&#12452;&#12489;</span>
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-cc-mode-setup</span> ()
           (setq ac-clang-prefix-header <span style="color: #8b2252;">"~/.emacs.d/stdafx.pch"</span>)
           (setq ac-clang-flags '(<span style="color: #8b2252;">"-w"</span> <span style="color: #8b2252;">"-ferror-limit"</span> <span style="color: #8b2252;">"1"</span>
                                  <span style="color: #8b2252;">"-fcxx-exceptions"</span>))
           (setq ac-sources '(ac-source-clang
                              ac-source-yasnippet
                              ac-source-gtags)))
         ))
  (add-hook 'c-mode-common-hook 'ac-cc-mode-setup))
</pre>
</div>

<p>
次のコードを hoge.cpp として保存し， <code>v</code> と <code>t</code> について補完できれば， <code>STL</code> と <code>Boost</code> のプリコンパイルヘッダが有効になっていることを確認できる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;vector&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;boost/timer.hpp&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>(){
  <span style="color: #008b8b;">std</span>::<span style="color: #228b22;">vector</span>&lt;<span style="color: #228b22;">int</span>&gt; <span style="color: #a0522d;">v</span>;
  v; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#12371;&#12371;</span>
  <span style="color: #008b8b;">boost</span>::<span style="color: #228b22;">timer</span> <span style="color: #a0522d;">t</span>;
  cout &lt;&lt; t; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#12371;&#12371;</span>
  <span style="color: #a020f0;">return</span> 1;
}
</pre>
</div>
</div>
<div id="outline-container-orgheadline133" class="outline-4">
<h4 id="orgheadline133"><span class="section-number-4">9.7.1</span> 参考サイト</h4>
<div class="outline-text-4" id="text-9-7-1">
<ul class="org-ul">
<li><a href="http://d.hatena.ne.jp/kenbell1988/20120428/1335609313">http://d.hatena.ne.jp/kenbell1988/20120428/1335609313</a><br  /></li>
<li><a href="http://d.hatena.ne.jp/whitypig/20110306/1299416655">http://d.hatena.ne.jp/whitypig/20110306/1299416655</a><br  /></li>
<li><a href="http://d.hatena.ne.jp/yano-htn/?of=30">http://d.hatena.ne.jp/yano-htn/?of=30</a><br  /></li>
<li><a href="http://www.nomtats.com/2010/11/auto-completeelemacs.html">http://www.nomtats.com/2010/11/auto-completeelemacs.html</a><br  /></li>
<li><a href="http://www.plugmasters.com.br/plugfeed/post/73768/awesome-cc-autocompletion-in-emacs">http://www.plugmasters.com.br/plugfeed/post/73768/awesome-cc-autocompletion-in-emacs</a><br  /></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline135" class="outline-3">
<h3 id="orgheadline135"><span class="section-number-3">9.8</span> [hideshowvis.el] 関数の表示／非表示</h3>
<div class="outline-text-3" id="text-9-8">
<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/hideshowvis.el">http://www.emacswiki.org/emacs/hideshowvis.el</a><br  /></li>
<li>org.el（約2万行）を開くために約2分必要なため，最近は使っていません．<br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (&gt; emacs-major-version 23))
  (<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
         '(hideshowvis-enable hideshowvis-minor-mode) <span style="color: #8b2252;">"hideshowvis"</span> nil t nil
         '((define-key hideshowvis-mode-map (kbd <span style="color: #8b2252;">"C-("</span>) 'hs-hide-block)
           (define-key hideshowvis-mode-map (kbd <span style="color: #8b2252;">"C-)"</span>) 'hs-show-block)))

    (add-hook 'emacs-lisp-mode-hook
              '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal <span style="color: #8b2252;">"*scratch*"</span> (buffer-name))
                            (hideshowvis-enable))))
    (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'c-mode-common-hook))
      (add-hook hook 'hideshowvis-enable))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline168" class="outline-2">
<h2 id="orgheadline168"><span class="section-number-2">10</span> Org Mode</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-orgheadline137" class="outline-3">
<h3 id="orgheadline137"><span class="section-number-3">10.1</span> 基本設定</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  (eval-after-autoload-if-found
   'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
   '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-extension</span> nil t)
     (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-habit</span>)
     (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-mobile</span>)

<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(when (require 'pomodoro nil t)</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">(pomodoro:start nil))</span>

     (push '(<span style="color: #8b2252;">"\\.org$"</span> . org-mode) auto-mode-alist)
     (push '(<span style="color: #8b2252;">"\\.txt$"</span> . org-mode) auto-mode-alist)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c &amp; &#12364; yasnippet &#12395;&#12458;&#12540;&#12496;&#12540;&#12521;&#12452;&#12489;&#12373;&#12428;&#12390;&#12356;&#12427;&#12398;&#12434;&#24373;&#12426;&#26367;&#12360;&#12427;</span>
     (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c 4"</span>) 'org-mark-ring-goto)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set checksum program path for windows</span>
     (<span style="color: #a020f0;">when</span> (eq window-system 'w32)
       (setq org-mobile-checksum-binary <span style="color: #8b2252;">"~/Dropbox/do/cksum.exe"</span>))

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">org &#12501;&#12449;&#12452;&#12523;&#12398;&#38598;&#20013;&#31649;&#29702;</span>
     (setq org-directory <span style="color: #8b2252;">"~/Dropbox/org/"</span>)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set default table export format</span>
     (setq org-table-export-default-format <span style="color: #8b2252;">"orgtbl-to-csv"</span>)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">Toggle inline images display at startup</span>
     (setq org-startup-with-inline-images t)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">dvipng</span>
     (setq org-export-with-LaTeX-fragments t)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">org&#12496;&#12483;&#12501;&#12449;&#20869;&#12398;&#20840;&#12390;&#12398;&#21205;&#30340;&#12502;&#12525;&#12483;&#12463;&#12434;&#20445;&#23384;&#30452;&#21069;&#12395;&#22793;&#26356;&#12377;&#12427;</span>
     <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'before-save-hook 'org-update-all-dblocks)</span>

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12540;&#12459;&#12452;&#12502;&#12501;&#12449;&#12452;&#12523;&#12398;&#21517;&#31216;&#12434;&#25351;&#23450;</span>
     (setq org-archive-location <span style="color: #8b2252;">"%s_archive::"</span>)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12512;&#12473;&#12479;&#12531;&#12503;&#12395;&#12424;&#12427;&#12525;&#12464;&#21454;&#38598;&#35373;&#23450;</span>
     (setq org-log-done t) <span style="color: #b22222;">; </span><span style="color: #b22222;">t &#12391;&#12399;&#12394;&#12367;&#65292;'(done), '(state) &#12434;&#25351;&#23450;&#12391;&#12365;&#12427;</span>

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12525;&#12464;&#12434;&#12489;&#12525;&#12450;&#12540;&#12395;&#20837;&#12428;&#12427;</span>
     (setq org-log-into-drawer t)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12531;&#12480;&#12540;&#12473;&#12467;&#12450;&#12434;&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#12375;&#12394;&#12356;&#65288;_{}&#12391;&#26126;&#31034;&#30340;&#12395;&#34920;&#29694;&#12391;&#12365;&#12427;&#65289;</span>
     (setq org-export-with-sub-superscripts nil)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">#+OPTIONS: \n:t &#12392;&#21516;&#12376;</span>
     (setq org-export-preserve-breaks t)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12510;&#12540;&#12398;&#38899;</span>
     <span style="color: #b22222;">;; </span><span style="color: #b22222;">(lsetq org-clock-sound "");</span>

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">helm &#12434;&#31435;&#12385;&#19978;&#12370;&#12427;</span>
     (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">helm-config</span> nil t)

     <span style="color: #b22222;">;; </span><span style="color: #b22222;">- &#12434;&#20778;&#20808;&#65294;&#35242;&#12398;&#12502;&#12522;&#12483;&#12484;&#34920;&#31034;&#12434;&#32153;&#25215;&#12373;&#12379;&#12394;&#12356;</span>
     (setq org-list-demote-modify-bullet
           '((<span style="color: #8b2252;">"+"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"*"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"1."</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"1)"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"A)"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"B)"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"a)"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"b)"</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"A."</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"B."</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"a."</span> . <span style="color: #8b2252;">"-"</span>)
             (<span style="color: #8b2252;">"b."</span> . <span style="color: #8b2252;">"-"</span>)))
     ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline138" class="outline-3">
<h3 id="orgheadline138"><span class="section-number-3">10.2</span> contribution を使う</h3>
<div class="outline-text-3" id="text-10-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq load-path (append '(<span style="color: #8b2252;">"~/devel/git/org-mode/contrib/lisp"</span>) load-path))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline139" class="outline-3">
<h3 id="orgheadline139"><span class="section-number-3">10.3</span> iCal との連携</h3>
<div class="outline-text-3" id="text-10-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">~/Dropbox/Public &#12399;&#31532;&#19977;&#32773;&#12395;&#25506;&#32034;&#12373;&#12428;&#12427;&#21487;&#33021;&#24615;&#12364;&#12354;&#12427;&#12398;&#12391;&#35201;&#27880;&#24847;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">default = ~/org.ics</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e i org-export-icalendar-this-file</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e I org-export-icalendar-all-agenda-files</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e c org-export-icalendar-all-combine-agenda-files</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-combined-agenda-icalendar-file "~/Dropbox/Public/orgAgenda.ics")</span>

   (setq org-icalendar-combined-agenda-file <span style="color: #8b2252;">"~/Dropbox/org/org-ical.ics"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">iCal &#12398;&#35500;&#26126;&#25991;</span>
   (setq org-icalendar-combined-description <span style="color: #8b2252;">"OrgMode&#12398;&#12473;&#12465;&#12472;&#12517;&#12540;&#12523;&#20986;&#21147;"</span>)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12524;&#12531;&#12480;&#12540;&#12395;&#36969;&#20999;&#12394;&#12479;&#12452;&#12512;&#12478;&#12540;&#12531;&#12434;&#35373;&#23450;&#12377;&#12427;&#65288;google &#29992;&#12395;&#12399; nil &#12364;&#24517;&#35201;&#65289;</span>
   (setq org-icalendar-timezone <span style="color: #8b2252;">"Asia/Tokyo"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">DONE &#12395;&#12394;&#12387;&#12383; TODO &#12399;&#12450;&#12472;&#12455;&#12531;&#12480;&#12363;&#12425;&#38500;&#22806;&#12377;&#12427;</span>
   (setq org-icalendar-include-todo t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#65288;&#36890;&#24120;&#12399;&#65292;&lt;&gt;--&lt;&gt; &#12391;&#21306;&#38291;&#20184;&#12365;&#20104;&#23450;&#12434;&#12388;&#12367;&#12427;&#65294;&#38750;&#25913;&#34892;&#20837;&#21147;&#12391;&#26085;&#20184;&#12364;Note&#12395;&#20837;&#12425;&#12394;&#12356;&#65289;</span>
   (setq org-icalendar-use-scheduled '(event-if-todo))
   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">DL &#20184;&#12365;&#12391;&#32066;&#26085;&#20104;&#23450;&#12395;&#12377;&#12427;&#65306;&#32224;&#12417;&#20999;&#12426;&#26085;&#65288;&#12473;&#12479;&#12531;&#12503;&#12391;&#26178;&#38291;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#12371;&#12392;&#65289;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-icalendar-use-deadline '(event-if-todo event-if-not-todo))</span>
   (setq org-icalendar-use-deadline '(event-if-todo))

   (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ox-icalendar</span> nil t)
     (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:ox-icalendar</span> ()
       (interactive)
       (<span style="color: #a020f0;">let</span> ((temp-agenda-files org-agenda-files))
         (setq org-agenda-files '(<span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span>))
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-icalendar-export-to-ics &#12434;&#20351;&#12358;&#12392;&#12463;&#12522;&#12483;&#12503;&#12508;&#12540;&#12489;&#12364;&#33618;&#12428;&#12427;</span>
         (org-icalendar-combine-agenda-files)
         (setq org-agenda-files temp-agenda-files)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dropbox/Public &#12398;&#12501;&#12457;&#12523;&#12480;&#12395;&#20844;&#38283;&#12377;&#12427;</span>
         (shell-command
          (concat <span style="color: #8b2252;">"cp "</span> org-icalendar-combined-agenda-file <span style="color: #8b2252;">" "</span>
                  org-icalendar-dropbox-agenda-file))
         (<span style="color: #a020f0;">if</span> (eq 0 (shell-command
                    (concat <span style="color: #8b2252;">"scp -o ConnectTimeout=5 "</span>
                            org-icalendar-combined-agenda-file
                            <span style="color: #8b2252;">" orz:~/public_html/ical"</span>)))
             (message <span style="color: #8b2252;">"Uploading... [DONE]"</span>)
           (message <span style="color: #8b2252;">"Uploading... [MISS]"</span>))
         (<span style="color: #a020f0;">when</span> (file-exists-p
                (expand-file-name org-icalendar-combined-agenda-file))
           (shell-command-to-string
            (concat <span style="color: #8b2252;">"rm -rf "</span> org-icalendar-combined-agenda-file))))))
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline140" class="outline-3">
<h3 id="orgheadline140"><span class="section-number-3">10.4</span> スピードコマンド</h3>
<div class="outline-text-3" id="text-10-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-use-speed-commands t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-speed-commands-user</span>
   <span style="color: #b22222;">;;       </span><span style="color: #b22222;">(quote (("n" . show-next-org)</span>
   <span style="color: #b22222;">;;               </span><span style="color: #b22222;">("t" . show-today-org))))</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun show-next-org () (show-org-buffer "next.org"))</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun show-today-org () (show-org-buffer "today.org"))</span>
))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline141" class="outline-3">
<h3 id="orgheadline141"><span class="section-number-3">10.5</span> Pomodoro</h3>
<div class="outline-text-3" id="text-10-5">
<p>
<a href="http://orgmode.org/worg/org-gtd-etc.html">http://orgmode.org/worg/org-gtd-etc.html</a><br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
'(  
       (add-to-list 'org-modules 'org-timer)
       (setq org-timer-default-timer 25)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-clock-in-hook</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">'(lamda ()</span>
<span style="color: #b22222;">;;                </span><span style="color: #b22222;">(if (not org-timer-current-timer)</span>
<span style="color: #b22222;">;;                    </span><span style="color: #b22222;">(org-timer-set-timer '(16)))))</span>

       (setq growl-pomodoro-default-task-name <span style="color: #8b2252;">"doing the task"</span>)
       (setq growl-pomodoro-task-name 'growl-pomodoro-default-task-name)

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">set-growl-pomodoro-task-name</span> ()
         (interactive <span style="color: #8b2252;">"P"</span>)
         (setq growl-pomodoro-task-name
               (read-from-minibuffer <span style="color: #8b2252;">"Task Name: "</span> growl-pomodoro-default-task-name)))
       (add-hook 'org-timer-set-hook 'set-growl-pomodoro-task-name)

       (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">growl-pomodoro-timer</span> ()
         (interactive)
         (shell-command-to-string
          (concat <span style="color: #8b2252;">"growlnotify -s -a Emacs -t \"++ Pomodoro ++\" -m \""</span>
                  <span style="color: #8b2252;">"The end of "</span> growl-pomodoro-task-name <span style="color: #8b2252;">"!\""</span>))
         (shell-command-to-string
          <span style="color: #b22222;">;   </span><span style="color: #b22222;">(concat "say The end of " growl-pomodoro-task-name)</span>
          (concat <span style="color: #8b2252;">"say -v Kyoko "</span> growl-pomodoro-task-name)
          ))
       (add-hook 'org-timer-done-hook 'growl-pomodoro-timer)
))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline142" class="outline-3">
<h3 id="orgheadline142"><span class="section-number-3">10.6</span> face 関連</h3>
<div class="outline-text-3" id="text-10-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '( 
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Font lock &#12434;&#20351;&#12358;</span>
   (global-font-lock-mode 1)
   (add-hook 'org-mode-hook 'turn-on-font-lock)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12454;&#12451;&#12531;&#12489;&#12454;&#12398;&#31471;&#12391;&#25240;&#12426;&#36820;&#12377;&#65288;&#24819;&#23450;&#12392;&#36870;&#12398;&#25391;&#12427;&#33310;&#12356;&#65294;&#12393;&#12371;&#12363;&#12395;&#12496;&#12464;&#12364;&#12354;&#12427;&#65289;</span>
   (setq org-startup-truncated nil)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12469;&#12502;&#12484;&#12522;&#12540;&#20197;&#19979;&#12398; * &#12434;&#30053;&#24335;&#34920;&#31034;&#12377;&#12427;</span>
   (setq org-hide-leading-stars t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color setting for TODO keywords</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color for priorities</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-priority-faces</span>
   <span style="color: #b22222;">;;  </span><span style="color: #b22222;">'(("?A" :foreground "</span><span style="color: #ffffff; background-color: #E01B4C;">#E01B4C</span><span style="color: #b22222;">" :background "</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #b22222;">" :weight bold)</span>
   <span style="color: #b22222;">;;    </span><span style="color: #b22222;">("?B" :foreground "</span><span style="color: #ffffff; background-color: #1739BF;">#1739BF</span><span style="color: #b22222;">" :background "</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #b22222;">" :weight bold)</span>
   <span style="color: #b22222;">;;    </span><span style="color: #b22222;">("?C" :foreground "</span><span style="color: #ffffff; background-color: #575757;">#575757</span><span style="color: #b22222;">" :background "</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #b22222;">" :weight bold)))</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color setting for Tags</span>

   <span style="color: #b22222;">;; </span><span style="color: #ffffff; background-color: #CC3333;">#CC3333</span><span style="color: #b22222;">     </span>
   (setq org-todo-keyword-faces
         '((<span style="color: #8b2252;">"FOCUS"</span>   <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF0000;">#FF0000</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFCC66;">#FFCC66</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"BUG"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF0000;">#FF0000</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFCC66;">#FFCC66</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"OTW"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #EE3300;">#EE3300</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFEE99;">#FFEE99</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"CHECK"</span>   <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FF9900;">#FF9900</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFF0F0;">#FFF0F0</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:underline</span> t)
           (<span style="color: #8b2252;">"ICAL"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #33CC66;">#33CC66</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"WAIT"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CCCCCC;">#CCCCCC</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #666666;">#666666</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"EDIT"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF33CC;">#FF33CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"READ"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9933CC;">#9933CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"MAIL"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #CC3300;">#CC3300</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"PLAN"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF6600;">#FF6600</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"REV1"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3366FF;">#3366FF</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"REV2"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3366FF;">#3366FF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #99CCFF;">#99CCFF</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"REV3"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3366FF;">#3366FF</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"SLEEP"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #9999CC;">#9999CC</span><span style="color: #8b2252;">"</span>)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(:foreground "</span><span style="color: #ffffff; background-color: #0000FF;">#0000FF</span><span style="color: #b22222;">" :bold t)     ; default. do NOT put this bottom    </span>
   (setq org-tag-faces
         '((<span style="color: #8b2252;">"Achievement"</span> <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66CC66;">#66CC66</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Report"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66CC66;">#66CC66</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Background"</span>  <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66CC99;">#66CC99</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Chore"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #6699CC;">#6699CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Domestic"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #6666CC;">#6666CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Doing"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF0000;">#FF0000</span><span style="color: #8b2252;">"</span>)   
           (<span style="color: #8b2252;">"Ongoing"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #CC6666;">#CC6666</span><span style="color: #8b2252;">"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">for non scheduled/reminder</span>
           (<span style="color: #8b2252;">"Repeat"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">for interval tasks</span>
           (<span style="color: #8b2252;">"Mag"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"buy"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"pay"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #CC6699;">#CC6699</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"secret"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF0000;">#FF0000</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"note"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #6633CC;">#6633CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"print"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #6633CC;">#6633CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Implements"</span>  <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"Coding"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Editing"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"work"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"Survey"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"Home"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"Open"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #CC9999;">#CC9999</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"Blog"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF33CC;">#FF33CC</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Test"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF0000;">#FF0000</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> bold)
           (<span style="color: #8b2252;">"drill"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66BB66;">#66BB66</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:underline</span> t)
           (<span style="color: #8b2252;">"DEBUG"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"EVENT"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Thinking"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #96A9FF;">#96A9FF</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Schedule"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FF7D7D;">#FF7D7D</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"INPUT"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #CC6666;">#CC6666</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"OUTPUT"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66CC99;">#66CC99</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"CYCLE"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #6699CC;">#6699CC</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"weekend"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFFFFF;">#FFFFFF</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #CC6666;">#CC6666</span><span style="color: #8b2252;">"</span>)
           (<span style="color: #8b2252;">"Log"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #008500;">#008500</span><span style="color: #8b2252;">"</span>)))))
<span style="color: #b22222;">;;</span><span style="color: #000000; background-color: #5BDF8D;">#5BDF8D</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline143" class="outline-3">
<h3 id="orgheadline143"><span class="section-number-3">10.7</span> <span class="todo TODO">TODO</span> キーワードのカスタマイズ</h3>
<div class="outline-text-3" id="text-10-7">
<p>
キーワードには日本語も使えます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-todo-keywords
         '((sequence <span style="color: #8b2252;">"TODO(t)"</span> <span style="color: #8b2252;">"FOCUS(f)"</span> <span style="color: #8b2252;">"ICAL(c)"</span> <span style="color: #8b2252;">"|"</span> <span style="color: #8b2252;">"DONE(d)"</span>)
           (sequence <span style="color: #8b2252;">"BUG(b)"</span> <span style="color: #8b2252;">"READ(r)"</span> <span style="color: #8b2252;">"EDIT(e)"</span> <span style="color: #8b2252;">"MAIL(m)"</span> <span style="color: #8b2252;">"PLAN(p)"</span> <span style="color: #8b2252;">"|"</span>)
           (sequence <span style="color: #8b2252;">"CHECK(C)"</span> <span style="color: #8b2252;">"OTW(o)"</span> <span style="color: #8b2252;">"WAIT(w)"</span> <span style="color: #8b2252;">"SLEEP(s)"</span> <span style="color: #8b2252;">"|"</span>)
           (sequence <span style="color: #8b2252;">"REV1(1)"</span> <span style="color: #8b2252;">"REV2(2)"</span> <span style="color: #8b2252;">"REV3(3)"</span> <span style="color: #8b2252;">"|"</span>)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Global counting of TODO items</span>
   (setq org-hierarchical-todo-statistics nil)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Global counting of checked TODO items</span>
   (setq org-hierarchical-checkbox-statistics nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">block-update-time</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-dblock-write:block-update-time</span> (params)
     (<span style="color: #a020f0;">let</span> ((fmt (or (plist-get params <span style="color: #483d8b;">:format</span>) <span style="color: #8b2252;">"%Y-%m-%d"</span>)))
       (insert <span style="color: #8b2252;">""</span> (format-time-string fmt (current-time)))))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12377;&#12409;&#12390;&#12398;&#12481;&#12455;&#12483;&#12463;&#12508;&#12483;&#12463;&#12473;&#12398; cookies &#12434;&#26356;&#26032;&#12377;&#12427;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">do-org-update-statistics-cookies</span> ()
     (interactive)
     (org-update-statistics-cookies 'all))
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline144" class="outline-3">
<h3 id="orgheadline144"><span class="section-number-3">10.8</span> ImageMagick を使って様々な画像をインライン表示する</h3>
<div class="outline-text-3" id="text-10-8">
<p>
システムに OpenJPEG と ImageMagick がインストールされていれば，JPEG 2000 などの画像形式もバッファに表示できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-agenda <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-image-actual-width '(256))
   (add-to-list 'image-file-name-extensions <span style="color: #8b2252;">"jp2"</span>)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-to-list 'image-file-name-extensions "j2c")</span>
   (add-to-list 'image-file-name-extensions <span style="color: #8b2252;">"bmp"</span>)
   (add-to-list 'image-file-name-extensions <span style="color: #8b2252;">"psd"</span>)))
</pre>
</div>

<p>
次の例では，同じ画像を2度インライン表示しようと指定ますが，前者は横幅が128ピクセルで表示され，後者は <code>org-image-actual-width</code> で指定した256ピクセルで表示されます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">#+ATTR_HTML: <span style="color: #483d8b;">:width</span> 128
[[~/Desktop/lena_std.jp2]]

[[~/Desktop/lena_std.jp2]]
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-toggle-inline-images)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline145" class="outline-3">
<h3 id="orgheadline145"><span class="section-number-3">10.9</span> [org-agenda]</h3>
<div class="outline-text-3" id="text-10-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-agenda <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the view span as day in an agenda view, the default is week</span>
   (setq org-agenda-span 'day)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#12395;&#35686;&#21578;&#12434;&#34920;&#31034;&#12377;&#12427;&#26399;&#38291;</span>
   (setq org-deadline-warning-days 2)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#12499;&#12517;&#12540;&#12391;FOLLOW&#12434;&#35373;&#23450;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-agenda-start-with-follow-mode t)</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Customized Time Grid</span>
   (setq org-agenda-time-grid
         '((daily today require-timed)
           <span style="color: #8b2252;">"----------------"</span>
           (800 1000 1200 1400 1600 1800 2000 2200 2400 2600)))
   (setq org-agenda-current-time-string <span style="color: #8b2252;">"&lt; d('- ' ) now!"</span>)
   (setq org-agenda-timegrid-use-ampm t)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#20316;&#25104;&#23550;&#35937;&#65288;&#25351;&#23450;&#12375;&#12394;&#12356;&#12392;agenda&#12364;&#29983;&#25104;&#12373;&#12428;&#12394;&#12356;&#65289;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12371;&#12371;&#12434;&#38291;&#36949;&#12358;&#12392;&#65292;MobileOrg, iCal export &#12418;&#12358;&#12414;&#12367;&#12356;&#12363;&#12394;&#12356;</span>
   (setq org-agenda-files
         '(<span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/next.org"</span>
           <span style="color: #8b2252;">"~/Dropbox/org/today.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/buffer.org"</span>
           <span style="color: #8b2252;">"~/Dropbox/org/stock.org"</span>
           <span style="color: #8b2252;">"~/Dropbox/org/work.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/research.org"</span>))

   (add-hook 'org-finalize-agenda-hook
             '(<span style="color: #a020f0;">lambda</span> () (org-agenda-to-appt t '((headline <span style="color: #8b2252;">"TODO"</span>)))))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#31227;&#21205;&#30452;&#24460;&#12395;agenda&#12496;&#12483;&#12501;&#12449;&#12434;&#38281;&#12376;&#12427;&#65288;&#12484;&#12522;&#12540;&#12398;&#20869;&#23481;&#12399;SPACE&#12391;&#30906;&#35469;&#21487;&#65289;</span>
   (org-defkey org-agenda-mode-map [(tab)]
               '(<span style="color: #a020f0;">lambda</span> () (interactive)
                  (org-agenda-goto)
                  (<span style="color: #a020f0;">with-current-buffer</span> <span style="color: #8b2252;">"*Org Agenda*"</span>
                    (org-agenda-quit))))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#29305;&#23450;&#12479;&#12464;&#12434;&#25345;&#12388;&#12484;&#12522;&#12540;&#12522;&#12473;&#12488;&#12434;&#19968;&#30330;&#31227;&#21205;&#65288;org-tags-view, org-tree-slide&#65289;</span>
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:doing-tag</span> <span style="color: #8b2252;">"Doing"</span>)
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:sparse-doing-tree</span> ()
     (interactive)
     (org-tags-view nil my:doing-tag))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Doing&#12479;&#12464;&#12434;&#12488;&#12464;&#12523;&#12377;&#12427;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:toggle-doing-tag</span> ()
     (interactive)
     (<span style="color: #a020f0;">when</span> (eq major-mode 'org-mode)
       (<span style="color: #a020f0;">save-excursion</span>
         (<span style="color: #a020f0;">save-restriction</span>
           (<span style="color: #a020f0;">unless</span> (org-at-heading-p)
             (outline-previous-heading))
           (<span style="color: #a020f0;">if</span> (string-match
                (concat <span style="color: #8b2252;">":"</span> my:doing-tag <span style="color: #8b2252;">":"</span>) (org-get-tags-string))
               (org-toggle-tag my:doing-tag 'off)
             (org-toggle-tag my:doing-tag 'on))
           (org-reveal)))))

   (custom-set-faces
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">'(org-agenda-clocking ((t (:background "</span><span style="color: #ffffff; background-color: #300020;">#300020</span><span style="color: #b22222;">"))))</span>
    '(org-agenda-structure ((t (<span style="color: #483d8b;">:underline</span> t <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #6873ff;">#6873ff</span><span style="color: #8b2252;">"</span>))))
    '(org-agenda-date-today ((t (<span style="color: #483d8b;">:weight</span> bold <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #4a6aff;">#4a6aff</span><span style="color: #8b2252;">"</span>))))
    '(org-agenda-date ((t (<span style="color: #483d8b;">:weight</span> bold <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #6ac214;">#6ac214</span><span style="color: #8b2252;">"</span>))))
    '(org-agenda-date-weekend ((t (<span style="color: #483d8b;">:weight</span> bold <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #ff8d1e;">#ff8d1e</span><span style="color: #8b2252;">"</span>))))
    '(org-time-grid ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #0a4796;">#0a4796</span><span style="color: #8b2252;">"</span>))))
    '(org-warning ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #ff431a;">#ff431a</span><span style="color: #8b2252;">"</span>))))
    '(org-upcoming-deadline ((t (<span style="color: #483d8b;">:inherit</span> font-lock-keyword-face))))
    )

   (define-key org-mode-map (kbd <span style="color: #8b2252;">"&lt;f11&gt;"</span>) 'my:toggle-doing-tag)
   (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-&lt;f11&gt;"</span>) 'my:sparse-doing-tree)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline146" class="outline-3">
<h3 id="orgheadline146"><span class="section-number-3">10.10</span> [appt.el] アラーム設定</h3>
<div class="outline-text-3" id="text-10-10">
<ul class="org-ul">
<li>Growl と連携していると，Emacsがバックグラウンドにあってもアラームに気づける．<br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12521;&#12540;&#12512;&#34920;&#31034;&#12434;&#26377;&#21177;&#12395;&#12377;&#12427;</span>
   (appt-activate 1)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">window &#12434; &#12501;&#12524;&#12540;&#12512;&#20869;&#12395;&#34920;&#31034;&#12377;&#12427;</span>
   (setq appt-display-format 'window)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">window &#12434;&#32153;&#32154;&#34920;&#31034;&#12377;&#12427;&#26178;&#38291;[s]</span>
   (setq appt-display-duration 3)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12499;&#12540;&#12503;&#38899;&#12398;&#26377;&#28961;</span>
   (setq appt-audible t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20309;&#20998;&#21069;&#12363;&#12425;&#35686;&#21578;&#34920;&#31034;&#12434;&#38283;&#22987;&#12377;&#12427;&#12363;[m]</span>
   (setq appt-message-warning-time 3)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12514;&#12540;&#12489;&#12521;&#12452;&#12531;&#12395;&#12450;&#12521;&#12540;&#12512;&#12434;&#34920;&#31034;&#12377;&#12427;</span>
   (setq appt-display-mode-line t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-agenda &#12398;&#20869;&#23481;&#12434;&#12450;&#12521;&#12540;&#12512;&#12395;&#30331;&#37682;&#12377;&#12427;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
   <span style="color: #b22222;">;;           </span><span style="color: #b22222;">'(lambda ()</span>
   <span style="color: #b22222;">;;              </span><span style="color: #b22222;">(message "--- agenda to appt")</span>
   <span style="color: #b22222;">;;              </span><span style="color: #b22222;">(org-agenda-to-appt t '((headline "TODO")))))</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#23450;&#26399;&#30340;&#12395;&#26356;&#26032;&#12377;&#12427;</span>
   (run-with-idle-timer 300 t
                        '(<span style="color: #a020f0;">lambda</span> ()
                           (org-agenda-to-appt t '((headline <span style="color: #8b2252;">"TODO"</span>)))))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20445;&#23384;&#26178;&#12395;&#12450;&#12521;&#12540;&#12512;&#12434;&#30331;&#37682;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
   <span style="color: #b22222;">;;           </span><span style="color: #b22222;">(lambda() (add-hook 'before-save-hook</span>
   <span style="color: #b22222;">;;                               </span><span style="color: #b22222;">'org-agenda-to-appt t '((headline "TODO")))))</span>
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline147" class="outline-3">
<h3 id="orgheadline147"><span class="section-number-3">10.11</span> [org-capture] 高速にメモを取る</h3>
<div class="outline-text-3" id="text-10-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-capture <span style="color: #8b2252;">"org-capture"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(  
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">2010-06-13 &#12398;&#24418;&#24335;&#12391;&#12399;&#65292;&#12479;&#12464;&#12392;&#12375;&#12390;&#35469;&#35672;&#12373;&#12428;&#12394;&#12356;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">get-current-date-tags</span> () (format-time-string <span style="color: #8b2252;">"%Y%m%d"</span>))
   (setq org-default-notes-file (concat org-directory <span style="color: #8b2252;">"next.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-words-notes-file</span> (concat org-directory <span style="color: #8b2252;">"words.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-notes-file</span> (concat org-directory <span style="color: #8b2252;">"note.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-research-file</span> (concat org-directory <span style="color: #8b2252;">"research.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-buffer-file</span> (concat org-directory <span style="color: #8b2252;">"buffer.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-today-file</span> (concat org-directory <span style="color: #8b2252;">"today.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-ical-file</span> (concat org-directory <span style="color: #8b2252;">"org-ical.org"</span>))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">see org.pdf:p73</span>
   (setq org-capture-templates
         `((<span style="color: #8b2252;">"t"</span> <span style="color: #8b2252;">"TODO &#38917;&#30446;&#12434; INBOX &#12395;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
            (file+headline nil <span style="color: #8b2252;">"INBOX"</span>) <span style="color: #8b2252;">"** TODO %?\n\t"</span>)
           (<span style="color: #8b2252;">"c"</span> <span style="color: #8b2252;">"&#21516;&#26399;&#12459;&#12524;&#12531;&#12480;&#12540;&#12395;&#12456;&#12531;&#12488;&#12522;&#12540;"</span> entry
            (file+headline ,org-capture-ical-file <span style="color: #8b2252;">"Schedule"</span>)
            <span style="color: #8b2252;">"** TODO %?\n\t"</span>) 
           (<span style="color: #8b2252;">"d"</span> <span style="color: #8b2252;">"Doing&#12479;&#12464;&#20184;&#12365;&#12398;&#12479;&#12473;&#12463;&#12434;Inbox&#12395;&#25237;&#12370;&#12427;"</span> entry
            (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
            <span style="color: #8b2252;">"** TODO %? :Doing:\n  - \n"</span>)
           (<span style="color: #8b2252;">"l"</span> <span style="color: #8b2252;">"&#26412;&#26085;&#12398;&#12481;&#12455;&#12483;&#12463;&#12522;&#12473;&#12488;"</span> entry
            (file+headline ,org-capture-today-file <span style="color: #8b2252;">"Today"</span>)
            <span style="color: #8b2252;">"** FOCUS &#26412;&#26085;&#12398;&#12481;&#12455;&#12483;&#12463;&#12522;&#12473;&#12488; %T\n&#65288;&#36215;&#24202;&#26178;&#38291;&#12398;&#35352;&#37682;&#65289;[[http://www.hayaoki-seikatsu.com/users/takaxp/][&#26089;&#36215;&#12365;&#26085;&#35352;]] \n&#65288;&#26397;&#39135;&#65289;\n  - [ ] %?\n&#65288;&#26172;&#39135;&#65289;\n&#65288;&#24112;&#23429;&#65295;&#22805;&#39135;&#65289;\n----\n&#65288;&#30740;&#31350;&#36895;&#22577;&#65289;\n  - [ ] \n"</span>)
           (<span style="color: #8b2252;">"i"</span> <span style="color: #8b2252;">"&#12450;&#12452;&#12487;&#12451;&#12450;&#12434;&#26360;&#12365;&#36796;&#12416;"</span> entry (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
            <span style="color: #8b2252;">"** %?\n  - \n\t%U"</span>)
           (<span style="color: #8b2252;">"b"</span> <span style="color: #8b2252;">"Bug &#12479;&#12464;&#20184;&#12365;&#12398; TODO &#38917;&#30446;&#12434;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
            (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
            <span style="color: #8b2252;">"** TODO %? :bug:\n %i\n %a %t"</span>)
           (<span style="color: #8b2252;">"w"</span> ,(concat <span style="color: #8b2252;">"&#33521;&#21336;&#35486;&#12434; "</span> org-capture-words-notes-file
                         <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>) entry
                         (file+headline ,org-capture-words-notes-file <span style="color: #8b2252;">"WORDS"</span>)
                         <span style="color: #8b2252;">"** %? :%(get-current-date-tags):\n&#12300;&#12301;\n  - "</span>)
           (<span style="color: #8b2252;">"g"</span> ,(concat <span style="color: #8b2252;">"&#33521;&#35486;&#12494;&#12540;&#12488;&#12434; "</span> org-capture-words-notes-file
                         <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
            entry (file+headline ,org-capture-words-notes-file <span style="color: #8b2252;">"GRAMMER"</span>)
            <span style="color: #8b2252;">"** %? :%(get-current-date-tags):\n\n%U"</span>)
           (<span style="color: #8b2252;">"T"</span> <span style="color: #8b2252;">"&#26178;&#38291;&#20184;&#12365;&#12456;&#12531;&#12488;&#12522;&#12540;"</span> entry (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
            <span style="color: #8b2252;">"** %? %T--\n"</span>)
           (<span style="color: #8b2252;">"n"</span> <span style="color: #8b2252;">"&#12494;&#12540;&#12488;&#12392;&#12375;&#12390;INBOX&#12395;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
            (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
            <span style="color: #8b2252;">"** %? :note:\n\t%U"</span>)
           (<span style="color: #8b2252;">"D"</span> <span style="color: #8b2252;">"&#12300;&#12489;&#12521;&#12483;&#12459;&#12540;365&#12398;&#37329;&#35328;&#12301;&#12434;&#12494;&#12540;&#12488;&#12377;&#12427;"</span> entry
            (file+headline ,org-capture-notes-file <span style="color: #8b2252;">"The Daily Drucker"</span>)
            <span style="color: #8b2252;">"** &#12300;%?&#12301;\nDrucker) \n  - \n  - \nACTION POINT:\n  - \nQUESTION:\n  - \n"</span>)
           (<span style="color: #8b2252;">"r"</span> ,(concat <span style="color: #8b2252;">"&#30740;&#31350;&#12494;&#12540;&#12488;&#12434; "</span> org-capture-research-file
                         <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
            entry (file+headline ,org-capture-research-file <span style="color: #8b2252;">"Survey"</span>)
            <span style="color: #8b2252;">"** %? :note:\n# \n  - \n\t%U"</span>)
           (<span style="color: #8b2252;">"`"</span> ,(concat <span style="color: #8b2252;">"&#12494;&#12540;&#12488;&#12434;&#12496;&#12483;&#12501;&#12449; "</span> org-capture-buffer-file
                         <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
            entry (file+headline ,org-capture-buffer-file <span style="color: #8b2252;">"Buffers"</span>)
            <span style="color: #8b2252;">"** %(get-random-string 16) %U\n\n%?\n\n----"</span>)))
   ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline148" class="outline-3">
<h3 id="orgheadline148"><span class="section-number-3">10.12</span> [org-refile]</h3>
<div class="outline-text-3" id="text-10-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-refile <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-refile-targets
         (quote ((<span style="color: #8b2252;">"org-ical.org"</span> <span style="color: #483d8b;">:level</span> . 1)
                 (<span style="color: #8b2252;">"work.org"</span> <span style="color: #483d8b;">:level</span> . 1)
                 (<span style="color: #8b2252;">"next.org"</span> <span style="color: #483d8b;">:level</span> . 1)
                 (<span style="color: #8b2252;">"sleep.org"</span> <span style="color: #483d8b;">:level</span> . 1))))
       ))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline149" class="outline-3">
<h3 id="orgheadline149"><span class="section-number-3">10.13</span> [org-babel] 基本設定</h3>
<div class="outline-text-3" id="text-10-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-confirm-babel-evaluate nil)
   (setq org-src-fontify-natively t)
   (setq org-src-tab-acts-natively t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-src-window-setup (current-window, other-window, other-frame)</span>
   (setq org-src-window-setup 'current-window)
   (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ob-http</span> nil t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Add ":results output" after program name</span>
   (org-babel-do-load-languages
    'org-babel-load-languages
    '((dot . t)
      (C . t)
      (perl . t)
      (sh . t)
      (latex . t)
      (R . t)
      (python . t)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ob-C nil t)</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ob-perl nil t)</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ob-sh nil t)</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(require 'ob-python nil t)</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#23455;&#35013;&#28168;&#12415;&#12398;&#35328;&#35486;&#12395;&#22909;&#12365;&#12394;&#21517;&#21069;&#12434;&#32016;&#20184;&#12369;&#12427;</span>
   (add-to-list 'org-src-lang-modes '(<span style="color: #8b2252;">"cs"</span> . csharp))
   (add-to-list 'org-src-lang-modes '(<span style="color: #8b2252;">"zsh"</span> . sh))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline150" class="outline-3">
<h3 id="orgheadline150"><span class="section-number-3">10.14</span> [org-babel] ソースブロックの入力キーをカスタマイズ</h3>
<div class="outline-text-3" id="text-10-14">
<p>
ソースブロックを入力するときは， &lt;+ <code>TAB</code> でテンプレートを高速に入力できます．しかし，利用する言語までは指定できないので，特定の内容について対応するコマンドを割り当てて起きます．以下の例を設定として追加すると， &lt;S+ <code>TAB</code> で <code>emacs-lisp</code> を， &lt;C+ <code>TAB</code> でコメントブロックを指定できます．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((add-to-list 'org-structure-template-alist
                '(<span style="color: #8b2252;">"C"</span> <span style="color: #8b2252;">"#+BEGIN_COMMENT\n?\n#+END_COMMENT"</span> <span style="color: #8b2252;">""</span>))
   (add-to-list 'org-structure-template-alist
                '(<span style="color: #8b2252;">"S"</span> <span style="color: #8b2252;">"#+BEGIN_SRC emacs-lisp\n?\n#+END_SRC"</span> <span style="color: #8b2252;">"&lt;src lang=\"emacs-lisp\"&gt;\n\n&lt;/src&gt;"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline151" class="outline-3">
<h3 id="orgheadline151"><span class="section-number-3">10.15</span> [MobileOrg] iOS との連携</h3>
<div class="outline-text-3" id="text-10-15">
<p>
<a href="http://orgmode.org/manual/Setting-up-the-staging-area.html">http://orgmode.org/manual/Setting-up-the-staging-area.html</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(
   <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq org-mobile-files '("~/Dropbox/org/next.org" "1.org" "2.org"))</span>
   (setq org-mobile-files '(<span style="color: #8b2252;">"~/Dropbox/org/next.org"</span>))
   <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq org-mobile-force-id-on-agenda-items nil)</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set a file to capture data from iOS devices</span>
   (setq org-mobile-inbox-for-pull (concat org-directory <span style="color: #8b2252;">"captured.org"</span>))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Upload location stored org files (index.org will be created)</span>
   (setq org-mobile-directory <span style="color: #8b2252;">"~/Dropbox/Apps/MobileOrg/"</span>)

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Menu to push or pull org files using MobileOrg</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-mobile-sync</span> ()
     (interactive)
     (<span style="color: #a020f0;">let</span>
         (org-mobile-sync-type
          (read-from-minibuffer <span style="color: #8b2252;">"How do you sync the org files? (pull or push) "</span>))
       (message <span style="color: #8b2252;">"%s"</span> org-mobile-sync-type)
       (<span style="color: #a020f0;">cond</span>
        ((string= <span style="color: #8b2252;">"pull"</span> org-mobile-sync-type) (org-mobile-pull))
        ((string= <span style="color: #8b2252;">"push"</span> org-mobile-sync-type) (org-mobile-push)))))
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline152" class="outline-3">
<h3 id="orgheadline152"><span class="section-number-3">10.16</span> [org-tree-slide] Org でプレゼンテーション</h3>
<div class="outline-text-3" id="text-10-16">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:org-tree-slide">http://pastelwill.jp/wiki/doku.php?id=emacs:org-tree-slide</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Org-tree-slide</span>
(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       'org-tree-slide-mode <span style="color: #8b2252;">"org-tree-slide"</span> nil t nil
       '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&lt;f8&gt;/&lt;f9&gt;/&lt;f10&gt;/&lt;f11&gt; are assigned to control org-tree-slide</span>
         (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;f9&gt;"</span>)
           'org-tree-slide-move-previous-tree)
         (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;f10&gt;"</span>)
           'org-tree-slide-move-next-tree)
         (org-tree-slide-narrowing-control-profile)
         (setq org-tree-slide-modeline-display 'outside)
         (setq org-tree-slide-skip-outline-level 5)
         (setq org-tree-slide-skip-done nil)))
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f8&gt;"</span>) 'org-tree-slide-mode)
  (global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f8&gt;"</span>) 'org-tree-slide-skip-done-toggle))
</pre>
</div>

<p>
Doing タグのトグルに <code>f11</code> を割り当てたので，コンテンツモードへの切り替えは，異なるキーバインドに変更．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline153" class="outline-3">
<h3 id="orgheadline153"><span class="section-number-3">10.17</span> [org-tree-slide] クロックインとアウトを自動化する</h3>
<div class="outline-text-3" id="text-10-17">
<p>
特定のファイルを編集している時， <code>org-tree-slide</code> でフォーカスしたら <code>org-clock-in</code> で時間計測を始めて，ナローイングを解く時や次のツリーに移る時に <code>org-clock-out</code> で計測を停止するように設定しています．基本的に <code>org-tree-slide</code> にあるhookに色々とぶら下げるだけです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-tree-slide-mode <span style="color: #8b2252;">"org-tree-slide"</span> nil t nil
 '((<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:org-clock-in</span> ()
     (setq vc-display-status nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12514;&#12540;&#12489;&#12521;&#12452;&#12531;&#31680;&#32004;</span>
     (org-clock-in))

   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:org-clock-out</span> ()
     (setq vc-display-status t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12514;&#12540;&#12489;&#12521;&#12452;&#12531;&#31680;&#32004;&#35299;&#38500;</span>
     (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-clock</span> nil t)
     (<span style="color: #a020f0;">when</span> (org-clocking-p) (org-clock-out)))

   (add-hook 'org-tree-slide-before-move-previous-hook
             'my:org-clock-out)
   (add-hook 'org-tree-slide-before-move-next-hook
             'my:org-clock-out)
   (add-hook 'org-tree-slide-stop-hook 'my:org-clock-out)

   (add-hook 'org-tree-slide-before-narrow-hook
             '(<span style="color: #a020f0;">lambda</span> ()
                (<span style="color: #a020f0;">when</span>
                    (and (equal (buffer-name) <span style="color: #8b2252;">"work.org"</span>)
                         (and (or (eq (org-outline-level) 2)
                                  (eq (org-outline-level) 3))
                              (looking-at (concat <span style="color: #8b2252;">"^\\*+ "</span>
                                                  org-not-done-regexp))))
                  (my:org-clock-in))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline155" class="outline-3">
<h3 id="orgheadline155"><span class="section-number-3">10.18</span> [org-tree-slide] 特定のツリーをプロポーショナルフォントで表示する</h3>
<div class="outline-text-3" id="text-10-18">
<p>
ツリーのプロパティに，プロポーショナルで表示するか否かの制御フラグを加えます．ツリーにフォーカス時にPROPORTIONAL指定がプロパティにあると，そのツリーを動的にプロポーショナルフォントでレンダリングします．変更は下位ツリーの全てに継承しています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-tree-slide-mode <span style="color: #8b2252;">"org-tree-slide"</span> nil t nil
 '((<span style="color: #a020f0;">defcustom</span> <span style="color: #a0522d;">use-proportional-font</span> nil
     <span style="color: #8b2252;">"The status of FONT property"</span>
     <span style="color: #483d8b;">:type</span> 'boolean
     <span style="color: #483d8b;">:group</span> 'org-mode)

   (set-face-attribute 'variable-pitch nil
                       <span style="color: #483d8b;">:family</span> <span style="color: #8b2252;">"Verdana"</span>
                       <span style="color: #483d8b;">:height</span> 125)

   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:proportional-font-toggle</span> ()
     (interactive)
     (setq use-proportional-font (not use-proportional-font))
     (<span style="color: #a020f0;">if</span> use-proportional-font
         (org-entry-put nil <span style="color: #8b2252;">"FONT"</span> <span style="color: #8b2252;">"PROPORTIONAL"</span>)
       (org-delete-property <span style="color: #8b2252;">"FONT"</span>)))

   (add-hook 'org-tree-slide-before-narrow-hook
             '(<span style="color: #a020f0;">lambda</span> ()
                (<span style="color: #a020f0;">if</span> (equal <span style="color: #8b2252;">"PROPORTIONAL"</span>
                           (org-entry-get-with-inheritance <span style="color: #8b2252;">"FONT"</span>))
                    (buffer-face-set 'variable-pitch)
                  (buffer-face-mode 0))))
   (add-hook 'org-tree-slide-stop-hook
             '(<span style="color: #a020f0;">lambda</span> ()
                (buffer-face-mode 0)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline154" class="outline-4">
<h4 id="orgheadline154"><span class="section-number-4">10.18.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-10-18-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"org"</span>
  (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c f p"</span>) 'my:proportional-font-toggle))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline156" class="outline-3">
<h3 id="orgheadline156"><span class="section-number-3">10.19</span> [org-fstree] ディレクトリ構造を読み取る</h3>
<div class="outline-text-3" id="text-10-19">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> nil t nil
 '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-fstree</span> nil t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline157" class="outline-3">
<h3 id="orgheadline157"><span class="section-number-3">10.20</span> [calfw-org] calfw に org の予定を表示する</h3>
<div class="outline-text-3" id="text-10-20">
<p>
org-mode の表のようにフェイスを統一しています． <code>calfw</code> を起動する時に，自動的にフレームサイズを拡大するような独自関数をぶら下げています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(my:cfw-open-org-calendar cfw:open-org-calendar)
       <span style="color: #8b2252;">"calfw-org"</span> <span style="color: #8b2252;">"Rich calendar for org-mode"</span> t nil
       '(
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">icalendar &#12392;&#12398;&#36899;&#32080;</span>
         (setq cfw:org-icalendars '(<span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span>))

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">org &#12391;&#20351;&#12358;&#34920;&#12395;&#12501;&#12455;&#12452;&#12473;&#12434;&#32113;&#19968;</span>
         (setq cfw:fchar-junction ?+
               cfw:fchar-vertical-line ?|
               cfw:fchar-horizontal-line ?-
               cfw:fchar-left-junction ?|
               cfw:fchar-right-junction ?|
               cfw:fchar-top-junction ?+
               cfw:fchar-top-left-corner ?|
               cfw:fchar-top-right-corner ?| )

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:org-mark-ring-goto-calfw</span> ()
           (interactive)
           (org-mark-ring-goto))

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:cfw-open-org-calendar</span> ()
           (interactive)
           (change-frame-width-double)
           (cfw:open-org-calendar))

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:cfw-burry-buffer</span> ()
           (interactive)
           (bury-buffer)
           (change-frame-width-single))

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">cfw:org-goto-date</span> ()
           <span style="color: #8b2252;">"Move the cursor to the specified date."</span>
           (interactive)
           (cfw:navi-goto-date
            (cfw:emacs-to-calendar (org-read-date nil 'to-time))))

         (define-key cfw:calendar-mode-map (kbd <span style="color: #8b2252;">"j"</span>) 'cfw:org-goto-date)
         (define-key cfw:org-schedule-map (kbd <span style="color: #8b2252;">"q"</span>) 'my:cfw-burry-buffer)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-c f c"</span>) 'my:cfw-open-org-calendar))

<span style="color: #b22222;">;;         </span><span style="color: #b22222;">(add-hook 'window-configuration-change-hook 'cfw:resize-calendar)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun cfw:resize-calendar ()</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(interactive)</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(when (eq major-mode 'cfw:calendar-mode)</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(cfw:refresh-calendar-buffer nil)</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(message "Calendar resized.")))</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun open-calfw-agenda-org ()</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(interactive)</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(cfw:open-org-calendar))</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-agenda-custom-commands</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">'(("w" todo "FOCUS")</span>
<span style="color: #b22222;">;;         </span><span style="color: #b22222;">("G" open-calfw-agenda-org "Graphical display in calfw"))))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline158" class="outline-3">
<h3 id="orgheadline158"><span class="section-number-3">10.21</span> [org-export-generic] エクスポート機能を拡張する</h3>
<div class="outline-text-3" id="text-10-21">
<p>
<code>org-set-generic-type</code> を使うことで，エクスポート機能を好みに拡張できる．contrib の中の <code>org-export-generic.el</code> が必要なので注意する．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-export-generic <span style="color: #8b2252;">"org-mode"</span> nil t nil
 '((org-set-generic-type
    <span style="color: #8b2252;">"textile"</span>
    '(<span style="color: #483d8b;">:file-suffix</span>
      <span style="color: #8b2252;">".textile"</span>
      <span style="color: #483d8b;">:key-binding</span> ?T
      <span style="color: #483d8b;">:title-format</span>    <span style="color: #8b2252;">"Title: %s\n\n"</span>
      <span style="color: #b22222;">;;   </span><span style="color: #b22222;">:date-format     "Date: %s\n"</span>
      <span style="color: #483d8b;">:date-export</span> nil
      <span style="color: #483d8b;">:toc-export</span>      nil
      <span style="color: #483d8b;">:author-export</span>   nil
      <span style="color: #483d8b;">:tags-export</span>     nil
      <span style="color: #483d8b;">:drawers-export</span>  nil
      <span style="color: #483d8b;">:date-export</span>     t
      <span style="color: #483d8b;">:timestamps-export</span>  t
      <span style="color: #483d8b;">:priorities-export</span>  nil
      <span style="color: #483d8b;">:todo-keywords-export</span> t
      <span style="color: #483d8b;">:body-line-fixed-format</span> <span style="color: #8b2252;">"\t%s\n"</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">:body-list-prefix "\n"</span>
      <span style="color: #483d8b;">:body-list-format</span> <span style="color: #8b2252;">"* %s"</span>
      <span style="color: #483d8b;">:body-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
      <span style="color: #483d8b;">:body-bullet-list-prefix</span> (<span style="color: #8b2252;">"* "</span> <span style="color: #8b2252;">"** "</span> <span style="color: #8b2252;">"*** "</span> <span style="color: #8b2252;">"**** "</span> <span style="color: #8b2252;">"***** "</span>)
      <span style="color: #483d8b;">:body-number-list-format</span> <span style="color: #8b2252;">"# %s"</span>
      <span style="color: #483d8b;">:body-number-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
      <span style="color: #483d8b;">:header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
      <span style="color: #483d8b;">:body-section-header-prefix</span> (<span style="color: #8b2252;">"h1. "</span> <span style="color: #8b2252;">"h2. "</span> <span style="color: #8b2252;">"h3. "</span> <span style="color: #8b2252;">"h4. "</span> <span style="color: #8b2252;">"h5. "</span> <span style="color: #8b2252;">"h6. "</span>)
      <span style="color: #483d8b;">:body-section-header-format</span> <span style="color: #8b2252;">"%s"</span>
      <span style="color: #483d8b;">:body-section-header-suffix</span> (<span style="color: #8b2252;">"\n\n"</span>)
      <span style="color: #483d8b;">:body-header-section-numbers</span> nil
      <span style="color: #483d8b;">:body-header-section-number-format</span> <span style="color: #8b2252;">"%s) "</span>
      <span style="color: #483d8b;">:body-line-format</span> <span style="color: #8b2252;">"%s\n"</span>
      <span style="color: #483d8b;">:body-newline-paragraph</span> <span style="color: #8b2252;">"\n"</span>
      <span style="color: #483d8b;">:bold-format</span> <span style="color: #8b2252;">"*%s*"</span>
      <span style="color: #483d8b;">:italic-format</span> <span style="color: #8b2252;">"_%s_"</span>
      <span style="color: #483d8b;">:underline-format</span> <span style="color: #8b2252;">"+%s+"</span>
      <span style="color: #483d8b;">:strikethrough-format</span> <span style="color: #8b2252;">"-%s-"</span>
      <span style="color: #483d8b;">:verbatim-format</span> <span style="color: #8b2252;">"`%s`"</span>
      <span style="color: #483d8b;">:code-format</span> <span style="color: #8b2252;">"@%s@"</span>
      <span style="color: #483d8b;">:body-line-wrap</span>   75
      <span style="color: #483d8b;">:blockquote-start</span> <span style="color: #8b2252;">"\n&lt;pre&gt;\n"</span>
      <span style="color: #483d8b;">:blockquote-end</span> <span style="color: #8b2252;">"\n&lt;/pre&gt;\n"</span>
      ))

   (org-set-generic-type
   <span style="color: #8b2252;">"markdown"</span> 
   '(<span style="color: #483d8b;">:file-suffix</span>
     <span style="color: #8b2252;">".markdown"</span>
     <span style="color: #483d8b;">:key-binding</span>     ?M
     <span style="color: #483d8b;">:title-format</span>    <span style="color: #8b2252;">"Title: %s\n"</span>
     <span style="color: #483d8b;">:date-format</span>     <span style="color: #8b2252;">"Date: %s\n"</span>
     <span style="color: #483d8b;">:toc-export</span>      nil
     <span style="color: #483d8b;">:author-export</span>   t
     <span style="color: #483d8b;">:tags-export</span>     nil
     <span style="color: #483d8b;">:drawers-export</span>  nil
     <span style="color: #483d8b;">:date-export</span>     t
     <span style="color: #483d8b;">:timestamps-export</span>  t
     <span style="color: #483d8b;">:priorities-export</span>  nil
     <span style="color: #483d8b;">:todo-keywords-export</span> t
     <span style="color: #483d8b;">:body-line-fixed-format</span> <span style="color: #8b2252;">"\t%s\n"</span>
     <span style="color: #b22222;">;;</span><span style="color: #b22222;">:body-list-prefix "\n"</span>
     <span style="color: #483d8b;">:body-list-format</span> <span style="color: #8b2252;">"- %s"</span>
     <span style="color: #483d8b;">:body-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
     <span style="color: #483d8b;">:header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
     <span style="color: #483d8b;">:body-section-header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
     <span style="color: #483d8b;">:body-section-header-format</span> <span style="color: #8b2252;">"%s\n"</span>
     <span style="color: #483d8b;">:body-section-header-suffix</span> (?= ?- <span style="color: #8b2252;">""</span>)
     <span style="color: #483d8b;">:body-header-section-numbers</span> nil
     <span style="color: #483d8b;">:body-header-section-number-format</span> <span style="color: #8b2252;">"%s) "</span>
     <span style="color: #483d8b;">:body-line-format</span> <span style="color: #8b2252;">"%s\n"</span>
     <span style="color: #483d8b;">:body-newline-paragraph</span> <span style="color: #8b2252;">"\n"</span>
     <span style="color: #483d8b;">:bold-format</span> <span style="color: #8b2252;">"**%s**"</span>
     <span style="color: #483d8b;">:italic-format</span> <span style="color: #8b2252;">"_%s_"</span>
     <span style="color: #483d8b;">:verbatim-format</span> <span style="color: #8b2252;">"`%s`"</span>
     <span style="color: #483d8b;">:code-format</span> <span style="color: #8b2252;">"`%s`"</span>
     <span style="color: #483d8b;">:body-line-wrap</span>   75
     ))
   ))
</pre>
</div>

<p>
<code>org-set-generic-type</code> を <code>.emacs</code> に追記した後， <code>C-c C-e g &lt;key-binding&gt;</code> とすればよい． <code>&lt;key-binding&gt;</code> は <code>org-set-generic-type</code> で設定する値である．2つ目は，Markdown へのエクスポーターである．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline159" class="outline-3">
<h3 id="orgheadline159"><span class="section-number-3">10.22</span> [org-odt] ODT形式に出力</h3>
<div class="outline-text-3" id="text-10-22">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(ox-odt) <span style="color: #8b2252;">"ox-odt"</span> nil t nil
 '((setq org-odt-styles-file
         (concat (getenv <span style="color: #8b2252;">"HOME"</span>) <span style="color: #8b2252;">"/Dropbox/emacs.d/config/style.odt"</span>))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-odt-content-template-file</span>
   <span style="color: #b22222;">;;       </span><span style="color: #b22222;">(concat (getenv "HOME") "/Dropbox/emacs.d/config/style.ott"))</span>
   (setq org-odt-preferred-output-format <span style="color: #8b2252;">"pdf"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">docx</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">ox-odt.el &#12398; &#33258;&#20316;&#12497;&#12483;&#12481;&#12398;&#22793;&#25968;&#65288;DOCSTRING&#12364;&#35352;&#36848;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#65289;</span>
   (setq org-odt-apply-custom-punctuation t)
   (setq org-odt-convert-processes
         '((<span style="color: #8b2252;">"LibreOffice"</span>
            <span style="color: #8b2252;">"/Applications/LibreOffice.app/Contents/MacOS/soffice --headless --convert-to %f%x --outdir %d %i"</span>)
           (<span style="color: #8b2252;">"unoconv"</span> <span style="color: #8b2252;">"unoconv -f %f -o %d %i"</span>)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline160" class="outline-3">
<h3 id="orgheadline160"><span class="section-number-3">10.23</span> [org-crypt] ツリーを暗号化する</h3>
<div class="outline-text-3" id="text-10-23">
<p>
<code>M-x org-encrypt-entry</code> でカーソル位置のツリーを暗号化できます．復号は， <code>M-x org-decrypt-entry</code> にて．ただし，バッファのバックアップファイルが生成されていることに気をつけてください．自分の場合は，バックアップファイルは外部ホストに同期されない設定にしてあるので，とりあえず問題なしと考えています．<br  />
</p>

<p>
<code>M-x org-encrypt-entries</code> で，特定のタグが付けられたツリーを一括処理することもできますが，私は安全性を考慮して使っていません．<br  />
</p>

<p>
なお，実戦投入には十分なテストをしてからの方がよいでしょう．org バッファを外部ホストと同期している場合，転送先のホストでも暗号化／復号ができるかを確認するべきです．他方のホストでツリーにドロワーが付くと，復号できなくなったりします．その時は慌てずにプロパティのドロワーを削除すればOKです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-crypt <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-crypt-key <span style="color: #8b2252;">"&lt;insert your key&gt;"</span>)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-encrypt-entries &#12398;&#24433;&#38911;&#12434;&#21463;&#12369;&#12427;&#12479;&#12464;&#12434;&#25351;&#23450;</span>
   (setq org-tags-exclude-from-inheritance (quote (<span style="color: #8b2252;">"secret"</span>)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#33258;&#21205;&#20445;&#23384;&#12398;&#30906;&#35469;&#12434;&#28961;&#21177;&#12395;</span>
   (setq org-crypt-disable-auto-save 'nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline161" class="outline-3">
<h3 id="orgheadline161"><span class="section-number-3">10.24</span> [org-mac-link] 外部アプリから情報を取る</h3>
<div class="outline-text-3" id="text-10-24">
<p>
<code>org-mac-link</code> を使うと，外部アプリの表示状態をリンクとして取得して，orgバッファに流し込めます．Mac環境用です．簡単な例ではURLで，取得したリンクを <code>C-c C-o</code> で開けばブラウザが起動してリンク先が表示できます．同じ話を，ファインダーで表示しているディレクトリ，メーラーで表示していた特定のメール，PDFビューアで表示していた特定のファイルの特定のページなどで実施できます．対応している外部アプリは，Finder, Mail.app, Outlook, Addressbook, Safari, Firefox, Chrome, そして Skimです．<br  />
</p>

<p>
次のように設定すると，org-modeの時に <code>C-c c</code> すればミニバッファにどのアプリからリンク情報を取るか選べます．Chrome には <code>c</code> が当たっているので，ブラウジング中に記になる記事があったらEmacsに切り替えて， <code>C-c c c</code> とすると，URLが自動でバッファに入ります．単なるURLではなく，タイトルで表示されるのでわかりやすいです．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"org"</span>
  (add-to-list 'org-modules 'org-mac-iCal)
  (add-to-list 'org-modules 'org-mac-link) <span style="color: #b22222;">;; </span><span style="color: #b22222;">includes org-mac-message</span>
  (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c c"</span>) 'org-mac-grab-link))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline162" class="outline-3">
<h3 id="orgheadline162"><span class="section-number-3">10.25</span> [org-notify] 通知</h3>
<div class="outline-text-3" id="text-10-25">
<p>
org-mode の通知に独自関数をぶら下げています．<br  />
</p>

<ul class="org-ul">
<li><a href="http://blog.devnode.pl/blog/2012/01/04/get-notified/">http://blog.devnode.pl/blog/2012/01/04/get-notified/</a><br  /></li>
<li><a href="https://github.com/p-m/org-notify/blob/master/org-notify.el">https://github.com/p-m/org-notify/blob/master/org-notify.el</a><br  /></li>
<li><a href="http://sheephead.homelinux.org/2015/01/10/7220/">http://sheephead.homelinux.org/2015/01/10/7220/</a><br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-show-notification-handler
        '(<span style="color: #a020f0;">lambda</span> (notification)
           (my:desktop-notify <span style="color: #8b2252;">"osx-native"</span> <span style="color: #8b2252;">"org-mode notification"</span>
                              01 01 notification nil)
           (message notification)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline163" class="outline-3">
<h3 id="orgheadline163"><span class="section-number-3">10.26</span> [org-grep] org ファイルを grep する</h3>
<div class="outline-text-3" id="text-10-26">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(org-grep) <span style="color: #8b2252;">"org-grep"</span> nil t nil
       '((setq org-grep-extensions nil)
         (add-to-list 'org-grep-directories <span style="color: #8b2252;">"~/.emacs.d"</span>)
         (add-to-list 'org-grep-directories <span style="color: #8b2252;">"~/.emacs.d/.cask/package"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-g"</span>) 'org-grep))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline164" class="outline-3">
<h3 id="orgheadline164"><span class="section-number-3">10.27</span> <span class="todo READ">READ</span> ME を常に org-mode で開く</h3>
<div class="outline-text-3" id="text-10-27">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
'((push '(<span style="color: #8b2252;">"[rR][eE][aA][dD][mM][eE]"</span> . org-mode) auto-mode-alist)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline166" class="outline-3">
<h3 id="orgheadline166"><span class="section-number-3">10.28</span> Growlnotify と org-mode でアラーム管理</h3>
<div class="outline-text-3" id="text-10-28">
<p>
growlnotify と org-mode のバッファを組み合わせてアラームリストを管理しています．アラームをorgバッファに書き込むだけなので，とても楽です．機能としては，特定のorgバッファに，時刻とアラームの内容を表の形式として保存しておくだけで，Emacs が起動している限りにおいて growl がそのアラームを表示してくれます．つまり，アラームリストは org-mode の表で一覧化されているので，管理も楽ですし，見た目もわかりやすいです．<br  />
</p>

<p>
アラームとして解釈される表は，オプション，時刻（HH:MM形式），アラーム内容の3列で構成していればOKです．オプションの列にXを入れておくと，growl がStickyモードで動作するので，アラームを見逃しません．<br  />
</p>

<p>
アラームは複数登録することができます．不要になったアラームを削除するのは，単純に表から当該の行を削除するだけで済みます．実際のところは，バッファが保存される時にアラームリストの変更が自動的にシステムに反映されるので，余計な作業は不要です．<br  />
</p>

<p>
<code>set-alarms-from-file</code> は，<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:utility.el">utility.el</a>に記述した関数です．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(set-alarms-from-file my:update-alarms-from-file) <span style="color: #8b2252;">"utility"</span> nil t nil
       '((set-alarms-from-file <span style="color: #8b2252;">"~/Dropbox/org/today.org"</span>)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:update-alarms-from-file</span> ()
           (interactive)
           (<span style="color: #a020f0;">when</span> (string-match (file-name-base <span style="color: #8b2252;">"today.org"</span>) (buffer-name))
             (message <span style="color: #8b2252;">"The alarm list has been updated."</span>)
             (set-alarms-from-file <span style="color: #8b2252;">"~/Dropbox/org/today.org"</span>)))))
  (add-hook 'after-save-hook 'my:update-alarms-from-file))
</pre>
</div>
</div>

<div id="outline-container-orgheadline165" class="outline-4">
<h4 id="orgheadline165"><span class="section-number-4">10.28.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-10-28-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
       '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">(org-transpose-element) &#12364;&#21106;&#12426;&#24403;&#12390;&#12425;&#12428;&#12390;&#12356;&#12427;&#12398;&#12391;&#21462;&#12426;&#36820;&#12377;&#65294;</span>
         (org-defkey org-mode-map <span style="color: #8b2252;">"\C-\M-t"</span> 'beginning-of-buffer)

         <span style="color: #b22222;">;;</span><span style="color: #b22222;">(define-key org-mode-map (kbd "C-c 1")</span>
         <span style="color: #b22222;">;;  </span><span style="color: #b22222;">'org-export-icalendar-combine-agenda-files)</span>
         (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c f 1"</span>) 'my:ox-icalendar)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:do-org-update-staistics-cookies</span> ()
           (interactive)
           (message <span style="color: #8b2252;">"Update statistics ..."</span>)
           (do-org-update-statistics-cookies))
         (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c f 2"</span>)
           'my:do-org-update-staistics-cookies)
         (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c m"</span>) 'org-mobile-sync)
         (define-key org-mode-map (kbd <span style="color: #8b2252;">"&lt;f5&gt;"</span>) 'org-narrow-to-subtree)
         (define-key org-mode-map (kbd <span style="color: #8b2252;">"S-&lt;f5&gt;"</span>) 'widen)))

  (global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f12&gt;"</span>)
                  '(<span style="color: #a020f0;">lambda</span> () (interactive) (show-org-buffer <span style="color: #8b2252;">"work.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-o"</span>)
                  '(<span style="color: #a020f0;">lambda</span> () (interactive) (show-org-buffer <span style="color: #8b2252;">"next.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-c"</span>) 
                  '(<span style="color: #a020f0;">lambda</span> () (interactive) (show-org-buffer <span style="color: #8b2252;">"org-ical.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-9"</span>) 
                  '(<span style="color: #a020f0;">lambda</span> () (interactive) (show-org-buffer <span style="color: #8b2252;">"buffer.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-0"</span>) 
                  '(<span style="color: #a020f0;">lambda</span> () (interactive) (show-org-buffer <span style="color: #8b2252;">"today.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-c l"</span>) 'org-store-link)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c a"</span>) 'org-agenda)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c r"</span>) 'org-capture))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline167" class="outline-3">
<h3 id="orgheadline167"><span class="section-number-3">10.29</span> org-mode の latex エクスポート関数をオーバーライド</h3>
<div class="outline-text-3" id="text-10-29">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Tex export (org-mode -&gt; tex with beamer class) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-export-latex-classes</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">'(("article"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{article}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\paragraph{%s}" . "\\paragraph*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subparagraph{%s}" . "\\subparagraph*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("report"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{report}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\part{%s}" . "\\part*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\chapter{%s}" . "\\chapter*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("book"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{book}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\part{%s}" . "\\part*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\chapter{%s}" . "\\chapter*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("beamer"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass{beamer}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">org-beamer-sectioning)))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline184" class="outline-2">
<h2 id="orgheadline184"><span class="section-number-2">11</span> フォント／配色関連</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-orgheadline169" class="outline-3">
<h3 id="orgheadline169"><span class="section-number-3">11.1</span> 正規表現を見やすくする</h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-face-foreground 'font-lock-regexp-grouping-backslash <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #66CC99;">#66CC99</span><span style="color: #8b2252;">"</span>)
(set-face-foreground 'font-lock-regexp-grouping-construct <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #9966CC;">#9966CC</span><span style="color: #8b2252;">"</span>)
</pre>
</div>

<p>
Emacs Lisp での正規表現入力をサポートするツールには， <code>M-x re-builder</code> や <code>rx</code> マクロがある．<br  />
</p>

<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/ReBuilder">EmacsWiki: Re Builder</a><br  /></li>
<li><a href="http://emacswiki.org/emacs/rx">EmacsWiki: rx</a><br  /></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline170" class="outline-3">
<h3 id="orgheadline170"><span class="section-number-3">11.2</span> 設定ファイルを見やすくする</h3>
<div class="outline-text-3" id="text-11-2">
<p>
<code>generic-x</code> を使うと， <code>/etc/hosts</code> や <code>/etc/apache2.conf</code> に色を付けられる．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">generic-x</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline171" class="outline-3">
<h3 id="orgheadline171"><span class="section-number-3">11.3</span> カーソル行に色をつける</h3>
<div class="outline-text-3" id="text-11-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Color of the current line</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Cite: http://murakan.cocolog-nifty.com/blog/2009/01/emacs-tips-1d45.html</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">see also http://www.emacswiki.org/cgi-bin/emacs/highlight-current-line.el</span>
(global-hl-line-mode t)
(set-face-background 'hl-line <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #DEEDFF;">#DEEDFF</span><span style="color: #8b2252;">"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline172" class="outline-3">
<h3 id="orgheadline172"><span class="section-number-3">11.4</span> カーソルの色</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Cursor (see also takaxp-mac.el)</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-to-list 'default-frame-alist '(cursor-type . (hbar . 5)))</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-to-list 'default-frame-alist '(cursor-type . bar))</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-hook 'window-configuration-change-hook</span>

(<span style="color: #a020f0;">if</span> (and (eq window-system 'ns) (&gt;= emacs-major-version 24))
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">when IME is ON</span>
    (<span style="color: #a020f0;">when</span> (fboundp 'mac-set-input-method-parameter)
      (mac-set-input-method-parameter
       <span style="color: #8b2252;">"com.google.inputmethod.Japanese.base"</span> 'title <span style="color: #8b2252;">"&#12464;"</span>))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">update-cursor-color</span> ()
    (interactive)
    (<span style="color: #a020f0;">if</span> current-input-method (set-cursor-color <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #91C3FF;">#91C3FF</span><span style="color: #8b2252;">"</span>)
      (set-cursor-color <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #AAAAAA;">#AAAAAA</span><span style="color: #8b2252;">"</span>)))
  (update-cursor-color)
  (run-with-idle-timer 10 t 'update-cursor-color))

(set-cursor-color <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #91C3FF;">#91C3FF</span><span style="color: #8b2252;">"</span>)
(add-hook 'input-method-activate-hook
          (<span style="color: #a020f0;">lambda</span> () (set-cursor-color <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #91C3FF;">#91C3FF</span><span style="color: #8b2252;">"</span>)))
(add-hook 'input-method-inactivate-hook
          (<span style="color: #a020f0;">lambda</span> () (set-cursor-color <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #AAAAAA;">#AAAAAA</span><span style="color: #8b2252;">"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline173" class="outline-3">
<h3 id="orgheadline173"><span class="section-number-3">11.5</span> カーソルを点滅させない</h3>
<div class="outline-text-3" id="text-11-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable cursor blink</span>
(blink-cursor-mode -1)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline174" class="outline-3">
<h3 id="orgheadline174"><span class="section-number-3">11.6</span> カーソル位置のフォントを確認</h3>
<div class="outline-text-3" id="text-11-6">
<p>
<code>M-x describe-char</code> することで，カーソル位置のフォントの情報がポップで表示される．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline177" class="outline-3">
<h3 id="orgheadline177"><span class="section-number-3">11.7</span> フォント設定</h3>
<div class="outline-text-3" id="text-11-7">
<p>
表のような利用環境に対して，個別に設定を施しています．WindowsとLinuxは安定版のEmacs23で，Macは開発版のCocoaEmacs23です．MacではEmacs24でもうまく表示できています．最近は，<a href="http://mix-mplus-ipa.sourceforge.jp/migu/">Migu 2M</a>を気に入って使っています．<br  />
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">ASCII</td>
<td class="org-left">日本語</td>
</tr>

<tr>
<td class="org-left">Mac</td>
<td class="org-left">Monaco</td>
<td class="org-left">ヒラギノ丸ゴ</td>
</tr>

<tr>
<td class="org-left">Windows</td>
<td class="org-left">Inconsolata</td>
<td class="org-left">メイリオ</td>
</tr>

<tr>
<td class="org-left">Linux</td>
<td class="org-left">Inconsolata</td>
<td class="org-left">MigMix</td>
</tr>
</tbody>
</table>

<p>
<a href="http://d.hatena.ne.jp/setoryohei/20110117/1295336454">http://d.hatena.ne.jp/setoryohei/20110117/1295336454</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:font-size</span> 12)
  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:ja-font-setter</span> (spec)
    (set-fontset-font nil 'japanese-jisx0208 spec)
    (set-fontset-font nil 'katakana-jisx0201 spec)
    (set-fontset-font nil 'japanese-jisx0212 spec)
    (set-fontset-font nil '(#x0080 . #x024F) spec)
    (set-fontset-font nil '(#x0370 . #x03FF) spec)
    (set-fontset-font nil 'mule-unicode-0100-24ff spec))
  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:ascii-font-setter</span> (spec)
    (set-fontset-font nil 'ascii spec))      

  (<span style="color: #a020f0;">cond</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">CocoaEmacs</span>
   ((eq window-system 'ns)
    (<span style="color: #a020f0;">when</span> (or (= emacs-major-version 23) (= emacs-major-version 24))
      (<span style="color: #a020f0;">let</span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">1) Monaco, Hiragino/Migu 2M : font-size=12, -apple-hiragino=1.2</span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">2) Inconsolata, Migu 2M     : font-size=14, </span>
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">3) Inconsolata, Hiragino    : font-size=14, -apple-hiragino=1.0</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Fonts</span>

          ((font-size my:font-size)
<span style="color: #b22222;">;          </span><span style="color: #b22222;">((font-size 28) ; for mirroring presentation (1440x900)</span>
<span style="color: #b22222;">;           </span><span style="color: #b22222;">(ascii-font "Inconsolata")</span>
           (ascii-font <span style="color: #8b2252;">"Monaco"</span>)
           (ja-font <span style="color: #8b2252;">"Migu 2M"</span>))
        <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "Hiragino Maru Gothic Pro")) </span>
        (my:ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size))
        (my:ja-font-setter (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size)))

      <span style="color: #b22222;">;; </span><span style="color: #b22222;">Fix ratio provided by set-face-attribute for fonts display</span>
      (setq face-font-rescale-alist
            '((<span style="color: #8b2252;">"^-apple-hiragino.*"</span> . 1.0) <span style="color: #b22222;">; </span><span style="color: #b22222;">1.2</span>
              (<span style="color: #8b2252;">".*Migu.*"</span> . 1.2)
              (<span style="color: #8b2252;">".*Inconsolata.*"</span> 1.0)
              (<span style="color: #8b2252;">".*osaka-bold.*"</span> . 1.0)     <span style="color: #b22222;">; </span><span style="color: #b22222;">1.2</span>
              (<span style="color: #8b2252;">".*osaka-medium.*"</span> . 1.0)   <span style="color: #b22222;">; </span><span style="color: #b22222;">1.0</span>
              (<span style="color: #8b2252;">".*courier-bold-.*-mac-roman"</span> . 1.0) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
              <span style="color: #b22222;">;; </span><span style="color: #b22222;">(".*monaco cy-bold-.*-mac-cyrillic" . 1.0)</span>
              <span style="color: #b22222;">;; </span><span style="color: #b22222;">(".*monaco-bold-.*-mac-roman" . 1.0) ; 0.9</span>
              (<span style="color: #8b2252;">"-cdac$"</span> . 1.0)))           <span style="color: #b22222;">; </span><span style="color: #b22222;">1.3</span>

      <span style="color: #b22222;">;; </span><span style="color: #b22222;">Anti aliasing with Quartz 2D</span>
      (setq mac-allow-anti-aliasing t)))

   ((eq window-system 'w32) <span style="color: #b22222;">; </span><span style="color: #b22222;">windows7</span>
    (<span style="color: #a020f0;">let</span>
        ((font-size 14)
         (font-height 100)
         (ascii-font <span style="color: #8b2252;">"Inconsolata"</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "Meiryo UI"))</span>
         (ja-font <span style="color: #8b2252;">"&#12513;&#12452;&#12522;&#12458;"</span>))
      (my:ja-font-setter
       (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size <span style="color: #483d8b;">:height</span> font-height))
      (my:ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size)))
    (setq face-font-rescale-alist '((<span style="color: #8b2252;">".*Inconsolata.*"</span> . 1.0))) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
)   
   (window-system <span style="color: #b22222;">; </span><span style="color: #b22222;">for SuSE Linux 12.1</span>
    (<span style="color: #a020f0;">let</span>
        ((font-size 14)
         (font-height 100)
         (ascii-font <span style="color: #8b2252;">"Inconsolata"</span>)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "MigMix 1M")</span>
         (ja-font <span style="color: #8b2252;">"Migu 1M"</span>))
      (my:ja-font-setter
       (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size <span style="color: #483d8b;">:height</span> font-height))
      (my:ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size)))
    (setq face-font-rescale-alist '((<span style="color: #8b2252;">".*MigMix.*"</span> . 2.0)
                                    (<span style="color: #8b2252;">".*Inconsolata.*"</span> . 1.0))) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
    ))
</pre>
</div>
</div>

<div id="outline-container-orgheadline175" class="outline-4">
<h4 id="orgheadline175"><span class="section-number-4">11.7.1</span> フォントのインストール方法</h4>
<div class="outline-text-4" id="text-11-7-1">
<p>
Linux では次のように処理するだけでよく，意外と簡単．<br  />
</p>

<ol class="org-ol">
<li>~/.fonts を作成する<br  /></li>
<li>フォントを1.のディレクトリに置く<br  /></li>
<li>fc-cache -fv を実行<br  /></li>
<li>fc-list でインストールされているかを確認．<br  /></li>
</ol>

<p>
なお，Windows では，フォントファイルを右クリックして，インストールを選択するだけでOK．<br  />
</p>
</div>
</div>

<div id="outline-container-orgheadline176" class="outline-4">
<h4 id="orgheadline176"><span class="section-number-4">11.7.2</span> フォントチェック用コード</h4>
<div class="outline-text-4" id="text-11-7-2">
<p>
サンプルの <a href="http://dl.dropbox.com/u/2440/dokuwiki/font-test.org">orgファイル</a> を作って，見た目をチェックしています．バッファ内の桁数チェックや，ASCIIが漢字の半分の幅になっているかのチェックが楽になります．<br  />
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline178" class="outline-3">
<h3 id="orgheadline178"><span class="section-number-3">11.8</span> 行間を制御する</h3>
<div class="outline-text-3" id="text-11-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-default 'line-spacing 0.2)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline179" class="outline-3">
<h3 id="orgheadline179"><span class="section-number-3">11.9</span> パッチをカラフルに表示する</h3>
<div class="outline-text-3" id="text-11-9">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/DiffMode">diff-mode.el</a> をカスタマイズします．<br  />
</p>

<p>
現在試験中．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ediff-window-setup-function 'ediff-setup-windows-plain)
</pre>
</div>

<p>
<a href="http://d.hatena.ne.jp/syohex/20111228/1325086893">http://d.hatena.ne.jp/syohex/20111228/1325086893</a><br  />
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'diff-mode <span style="color: #8b2252;">"diff-mode"</span> nil t nil   
 '((set-face-attribute 'diff-added-face nil
                       <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #00ff00;">green</span><span style="color: #8b2252;">"</span>
                       <span style="color: #483d8b;">:weight</span> 'normal)
   (set-face-attribute 'diff-removed-face nil
                       <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #ff3030;">firebrick1</span><span style="color: #8b2252;">"</span>
                       <span style="color: #483d8b;">:weight</span> 'normal)

   (set-face-attribute 'diff-file-header-face nil
                       <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:weight</span> 'extra-bold)

   (set-face-attribute 'diff-hunk-header-face nil
                       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #8b4513;">chocolate4</span><span style="color: #8b2252;">"</span>
                       <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #ffffff;">white</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:weight</span> 'extra-bold
                       <span style="color: #483d8b;">:inherit</span> nil)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline180" class="outline-3">
<h3 id="orgheadline180"><span class="section-number-3">11.10</span> 背景を黒系色にする</h3>
<div class="outline-text-3" id="text-11-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(custom-set-faces
 '(default ((t
             (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #000000;">black</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #55FF55;">#55FF55</span><span style="color: #8b2252;">"</span>)
             ))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline182" class="outline-3">
<h3 id="orgheadline182"><span class="section-number-3">11.11</span> [rainbow-mode.el] 配色のリアルタイム確認</h3>
<div class="outline-text-3" id="text-11-11">
<p>
M-x rainbow-mode とすると，色指定のコードの背景色を，その指定色にリアルタイム変換してくれる．<br  />
</p>

<p>
<a href="http://elpa.gnu.org/packages/rainbow-mode.html">http://elpa.gnu.org/packages/rainbow-mode.html</a><br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(rainbow-mode) <span style="color: #8b2252;">"rainbow-mode"</span> nil t nil
       '())
  (add-hook 'emmet-mode-hook 'rainbow-mode)
  (add-hook 'emacs-lisp-mode-hook 'rainbow-mode)
  (add-hook 'org-mode-hook 'rainbow-mode)
  )
</pre>
</div>
</div>

<div id="outline-container-orgheadline181" class="outline-4">
<h4 id="orgheadline181"><span class="section-number-4">11.11.1</span> 色一覧</h4>
<div class="outline-text-4" id="text-11-11-1">
<p>
<code>0,6,9,C,F</code> の組み合わせ<br  />
</p>

<p>
#000000 #000033 #000066 #000099 #0000CC #0000FF<br  />
#003300 #003333 #003366 #003399 #0033CC #0033FF<br  />
#006600 #006633 #006666 #006699 #0066CC #0066FF<br  />
#009900 #009933 #009966 #009999 #0099CC #0099FF<br  />
#00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF<br  />
#00FF00 #00FF33 #00FF66 #00FF99 #00FFCC #00FFFF<br  />
</p>

<p>
#330000 #330033 #330066 #330099 #3300CC #3300FF<br  />
#333300 #333333 #333366 #333399 #3333CC #3333FF<br  />
#336600 #336633 #336666 #336699 #3366CC #3366FF<br  />
#339900 #339933 #339966 #339999 #3399CC #3399FF<br  />
#33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF<br  />
#33FF00 #33FF33 #33FF66 #33FF99 #33FFCC #33FFFF<br  />
</p>

<p>
#660000 #660033 #660066 #660099 #6600CC #6600FF<br  />
#663300 #663333 #663366 #663399 #6633CC #6633FF<br  />
#666600 #666633 #666666 #666699 #6666CC #6666FF<br  />
#669900 #669933 #669966 #669999 #6699CC #6699FF<br  />
#66CC00 #66CC33 #66CC66 #66CC99 #66CCCC #66CCFF<br  />
#66FF00 #66FF33 #66FF66 #66FF99 #66FFCC #66FFFF<br  />
</p>

<p>
#990000 #990033 #990066 #990099 #9900CC #9900FF<br  />
#993300 #993333 #993366 #993399 #9933CC #9933FF<br  />
#996600 #996633 #996666 #996699 #9966CC #9966FF<br  />
#999900 #999933 #999966 #999999 #9999CC #9999FF<br  />
#99CC00 #99CC33 #99CC66 #99CC99 #99CCCC #99CCFF<br  />
#99FF00 #99FF33 #99FF66 #99FF99 #99FFCC #99FFFF<br  />
</p>

<p>
#CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF<br  />
#CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF<br  />
#CC6600 #CC6633 #CC6666 #CC6699 #CC66CC #CC66FF<br  />
#CC9900 #CC9933 #CC9966 #CC9999 #CC99CC #CC99FF<br  />
#CCCC00 #CCCC33 #CCCC66 #CCCC99 #CCCCCC #CCCCFF<br  />
#CCFF00 #CCFF33 #CCFF66 #CCFF99 #CCFFCC #CCFFFF<br  />
</p>

<p>
#FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF<br  />
#FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF<br  />
#FF6600 #FF6633 #FF6666 #FF6699 #FF66CC #FF66FF<br  />
#FF9900 #FF9933 #FF9966 #FF9999 #FF99CC #FF99FF<br  />
#FFCC00 #FFCC33 #FFCC66 #FFCC99 #FFCCCC #FFCCFF<br  />
#FFFF00 #FFFF33 #FFFF66 #FFFF99 #FFFFCC #FFFFFF<br  />
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline183" class="outline-3">
<h3 id="orgheadline183"><span class="section-number-3">11.12</span> [volatile-highlights] コピペした領域を強調</h3>
<div class="outline-text-3" id="text-11-12">
<p>
コピペ領域をその直後のみハイライトします．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(volatile-highlights-mode) <span style="color: #8b2252;">"volatile-highlights"</span> nil t nil
       '((set-face-attribute
          'vhl/default-face nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF3333;">#FF3333</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFCDCD;">#FFCDCD</span><span style="color: #8b2252;">"</span>)
         (volatile-highlights-mode t)

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12405;&#12431;&#12387;&#12392;&#12456;&#12501;&#12455;&#12463;&#12488;&#12398;&#36861;&#21152;&#65288;&#12506;&#12540;&#12473;&#12488;&#26178;&#12398;&#33394; =&gt; &#12459;&#12540;&#12477;&#12523;&#33394; =&gt; &#26412;&#26469;&#33394;&#65289;</span>
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:vhl-change-color</span> ()
           (<span style="color: #a020f0;">let</span>
               ((next 0.3)
                (reset 0.8)
                (colors '(<span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #F8D3D7;">#F8D3D7</span><span style="color: #8b2252;">"</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #F2DAE1;">#F2DAE1</span><span style="color: #8b2252;">"</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #EBE0EB;">#EBE0EB</span><span style="color: #8b2252;">"</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #E5E7F5;">#E5E7F5</span><span style="color: #8b2252;">"</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #DEEDFF;">#DEEDFF</span><span style="color: #8b2252;">"</span>)))
             (<span style="color: #a020f0;">dolist</span> (color colors)
               (run-at-time next nil
                            'set-face-attribute
                            'vhl/default-face
                            nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF3333;">#FF3333</span><span style="color: #8b2252;">"</span> <span style="color: #483d8b;">:background</span> color)
               (setq next (+ 0.1 next)))
             (run-at-time reset nil 'vhl/clear-all))
           (set-face-attribute 'vhl/default-face
                               nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #FF3333;">#FF3333</span><span style="color: #8b2252;">"</span>
                               <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #FFCDCD;">#FFCDCD</span><span style="color: #8b2252;">"</span>))

         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:yank</span> (<span style="color: #228b22;">&amp;optional</span> ARG)
           (interactive)
           (yank ARG)
           (my:vhl-change-color))
         (global-set-key (kbd <span style="color: #8b2252;">"M-v"</span>) 'my:yank)
         (global-set-key (kbd <span style="color: #8b2252;">"C-y"</span>) 'my:yank)

         (<span style="color: #a020f0;">with-eval-after-load</span> <span style="color: #8b2252;">"org"</span>
           (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-y"</span>)
             '(<span style="color: #a020f0;">lambda</span> () (interactive)
                (org-yank)
                (my:vhl-change-color))))))

  (add-hook 'org-mode-hook 'volatile-highlights-mode)
  (add-hook 'emacs-lisp-mode-hook 'volatile-highlights-mode)
  (add-hook 'emmet-mode-hook 'rainbow-mode))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline190" class="outline-2">
<h2 id="orgheadline190"><span class="section-number-2">12</span> フレーム／ウィンドウ制御</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-orgheadline185" class="outline-3">
<h3 id="orgheadline185"><span class="section-number-3">12.1</span> 起動時の設定</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">To avoid an error setting up the frame width (only for Emacs23)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(set-frame-width (selected-frame) 81)</span>
                                        <span style="color: #b22222;">;</span><span style="color: #b22222;">(set-frame-width (selected-frame) 80)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Default window position to show a Emacs frame</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Dynabook UX: top=0, left=0, width=80, height=32</span>
(<span style="color: #a020f0;">cond</span>
 ((eq window-system 'ns) <span style="color: #b22222;">; </span><span style="color: #b22222;">for Macintosh</span>
  (setq initial-frame-alist
        (append
         '((top . 22)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Y-pos from (0,0) the height of menu bar is 22pix.</span>
           (left . 0)  <span style="color: #b22222;">; </span><span style="color: #b22222;">X-pos from (0,0) ; 420 is the center for MBP</span>
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">26 is the setting for Butler's Docklet</span>
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">837 is the setting for right side for MBP</span>
           (width . 80) <span style="color: #b22222;">; </span><span style="color: #b22222;">Width  : character count</span>
           <span style="color: #b22222;">;;             </span><span style="color: #b22222;">(height . 24); Height : character count</span>
           (alpha . (100 90))
           (cursor-height . 16)
           (vertical-scroll-bars . nil)
           ) initial-frame-alist)))

 ((eq window-system 'x) <span style="color: #b22222;">; </span><span style="color: #b22222;">for Linux</span>
  (setq initial-frame-alist
        (append
         '((vertical-scroll-bars . nil)
           (top . 0)
           (left . 0)
           (width . 80)
           (height . 38)
           ) initial-frame-alist)))

 (t                     <span style="color: #b22222;">; </span><span style="color: #b22222;">for Windows</span>
  (setq initial-frame-alist
        (append
         '((vertical-scroll-bars . nil)
           (top . 0)
           (left . 0)
           (width . 80)
           (height . 26)
           ) initial-frame-alist))))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Apply the initial setting to default</span>
  (setq default-frame-alist initial-frame-alist)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline186" class="outline-3">
<h3 id="orgheadline186"><span class="section-number-3">12.2</span> [elscreen.el] Emacs バッファをタブ化</h3>
<div class="outline-text-3" id="text-12-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">ElScreen (require apel) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Note: change a string in the elscreen.el from "mac" to "ns"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">2011-10-26: e2wm's perspective (two) mode is more useful for me.</span>
(load <span style="color: #8b2252;">"elscreen"</span> <span style="color: #8b2252;">"ElScreen"</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline187" class="outline-3">
<h3 id="orgheadline187"><span class="section-number-3">12.3</span> [e2wm.el] 二画面表示</h3>
<div class="outline-text-3" id="text-12-3">
<ol class="org-ol">
<li><a href="http://github.com/kiwanami/emacs-window-manager/raw/master/e2wm.el">http://github.com/kiwanami/emacs-window-manager/raw/master/e2wm.el</a><br  /></li>
<li><a href="http://github.com/kiwanami/emacs-window-layout/raw/master/window-layout.el">http://github.com/kiwanami/emacs-window-layout/raw/master/window-layout.el</a><br  /></li>
</ol>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 
 'e2wm:dp-two <span style="color: #8b2252;">"e2wm"</span> nil t nil
 '((setq e2wm:c-two-recipe
         '(- (<span style="color: #483d8b;">:lower-size</span> 10)
             (| left right)
             sub))
   (setq e2wm:c-two-winfo
         '((<span style="color: #483d8b;">:name</span> left )
           (<span style="color: #483d8b;">:name</span> right )
           (<span style="color: #483d8b;">:name</span> sub <span style="color: #483d8b;">:default-hide</span> t)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#39640;&#12373;&#12434;&#30011;&#38754;&#12398;&#26368;&#22823;&#12395;&#30703;&#27491;</span>
   (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">frame-ctr</span> nil t)
     (setq frame-height-tall (max-frame-height))
     (setq frame-height-small frame-height-tall))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">left, prev</span>
   (setq e2wm:c-two-right-default 'left)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">To avoid rebooting issue when using desktop.el and recentf.el</span>
   (add-hook 'kill-emacs-hook 'e2wm:stop-management)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline188" class="outline-3">
<h3 id="orgheadline188"><span class="section-number-3">12.4</span> [frame-ctr.el] キーボードでフレームの場所を移す</h3>
<div class="outline-text-3" id="text-12-4">
<p>
拙作の <a href="https://github.com/takaxp/frame-ctr">frame-ctr.el</a>を使います．e2wm.el と frame-cmds.el に依存しています．<br  />
</p>

<p>
frame-ctr.el は，frame-cmds, frame-fns と e2wm.el を利用したアドホックなフレーム管理ツールです．<br  />
</p>

<ol class="org-ol">
<li><a href="http://www.emacswiki.org/emacs/download/frame-cmds.el">http://www.emacswiki.org/emacs/download/frame-cmds.el</a><br  /></li>
<li><a href="http://www.emacswiki.org/emacs/download/frame-fns.el">http://www.emacswiki.org/emacs/download/frame-fns.el</a><br  /></li>
</ol>


<p>
ビルトインに <code>face-remap</code> があり，アスキーフォントは <code>C-x C--</code> と <code>C-x C-=</code> で拡大縮小を制御できます．以下のキーバインドは，face-remap.el が提供する text-scale-adjust のキーバインドを上書きします．text-scale-adjust をそのまま使うと，日本語フォントが制御されないので，オーバーライドしてしまってもOKだと思います．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(move-frame-with-user-specify
         move-frame-to-center move-frame-to-edge-top move-frame-right
         move-frame-left move-frame-to-edge-bottom frame-ctr-open-height-ring
         fit-frame-to-fullscreen set-font-size-input max-frame-height
         reset-font-size increase-font-size decrease-font-size set-font-size)
       <span style="color: #8b2252;">"frame-ctr"</span> nil t nil 
       '((make-frame-height-ring)
         (<span style="color: #a020f0;">cond</span>
          ((eq (x-display-pixel-width) 1920) (setq fullscreen-fontsize 38))
          ((eq (x-display-pixel-width) 1440) (setq fullscreen-fontsize 28))
          ((eq (x-display-pixel-width) 1366) (setq fullscreen-fontsize 19))
          ((eq (x-display-pixel-width) 800) (setq fullscreen-fontsize 14))
          (t (setq fullscreen-fontsize 12)))

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12522;&#12531;&#12464;&#12398;&#29366;&#24907;&#12434;&#26368;&#26032;&#12395;&#26356;&#26032;&#65288;max-frame-height &#12364;&#22793;&#12431;&#12427;&#12383;&#12417;&#65289;</span>
         (add-hook 'frame-ctr-after-fullscreen-hook
                   'make-frame-height-ring)))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to somewhere (default: 0,0)</span>
  (global-set-key (kbd <span style="color: #8b2252;">"M-0"</span>) 'move-frame-with-user-specify)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to left side of the current position (require 'frame-cmds)</span>
  (global-set-key (kbd <span style="color: #8b2252;">"M-1"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (move-frame-left 40)))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to the center of the window display (require 'frame-ctr)</span>
  (global-set-key (kbd <span style="color: #8b2252;">"M-2"</span>) 'move-frame-to-center)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to right side of the current position(require 'frame-cmds)</span>
  (global-set-key (kbd <span style="color: #8b2252;">"M-3"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive)(move-frame-right 40)))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the current frame to the top of the window display</span>
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f1&gt;"</span>) 'move-frame-to-edge-top)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the current frame to the bottom of the window display</span>
  (global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f1&gt;"</span>) 'move-frame-to-edge-bottom)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Cycle heights</span>
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f2&gt;"</span>) 'frame-ctr-open-height-ring)

  (global-set-key (kbd <span style="color: #8b2252;">"C-x C-9"</span>) 'fit-frame-to-fullscreen)
  (global-set-key (kbd <span style="color: #8b2252;">"C-x C-0"</span>) 'reset-font-size)
  (global-set-key (kbd <span style="color: #8b2252;">"C-="</span>) 'increase-font-size)
  (global-set-key (kbd <span style="color: #8b2252;">"C--"</span>) 'decrease-font-size))

(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(change-frame-width-single
         change-frame-width-double change-frame-double-window
         change-frame-single-window) <span style="color: #8b2252;">"frame-ctr-e2wm"</span> nil t nil
         '())

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the frame width single size</span>
  <span style="color: #b22222;">;;  </span><span style="color: #b22222;">C-u C-x - =&gt; e2wm OFF, single size width and double height, move center</span>
  (global-set-key (kbd <span style="color: #8b2252;">"C-x -"</span>) 'change-frame-single-window)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the frame width double size</span>
  <span style="color: #b22222;">;;  </span><span style="color: #b22222;">C-u C-x = =&gt; e2wm ON, double size width and height, move to the center</span>
  (global-set-key (kbd <span style="color: #8b2252;">"C-x ="</span>) 'change-frame-double-window)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c f s"</span>) 'change-frame-width-single)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c f d"</span>) 'change-frame-width-double))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline189" class="outline-3">
<h3 id="orgheadline189"><span class="section-number-3">12.5</span> [popwin.el] ポップアップウィンドウの制御</h3>
<div class="outline-text-3" id="text-12-5">
<p>
<a href="https://github.com/m2ym/popwin-el/">https://github.com/m2ym/popwin-el/</a><br  />
</p>

<p>
popwin:display-buffer を autoload してもうまくいかない．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(popwin-mode) <span style="color: #8b2252;">"popwin"</span> nil t nil
       '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">for emacs 24.1</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq special-display-function 'popwin:special-display-popup-window)</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq display-buffer-function 'popwin:display-buffer)</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">for emacs 24.3</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq special-display-alist 'popwin:special-display-popup-window)</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq display-buffer-alist 'popwin:display-buffer)</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">(push '("*sdic*" :position top) popwin:special-display-config)</span>

         (setq popwin:special-display-config
               (append
                '((<span style="color: #8b2252;">"CAPTURE-next.org"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom <span style="color: #483d8b;">:noselect</span> t)
                  (<span style="color: #8b2252;">"CAPTURE-org-ical.org"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom <span style="color: #483d8b;">:noselect</span> t)
                  (<span style="color: #8b2252;">"*Help*"</span>          <span style="color: #483d8b;">:height</span> 20 <span style="color: #483d8b;">:position</span> bottom)
                  (<span style="color: #8b2252;">"dict-app-result"</span> <span style="color: #483d8b;">:height</span> 20 <span style="color: #483d8b;">:position</span> bottom)
                  (<span style="color: #8b2252;">"*wclock*"</span>        <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                  (<span style="color: #8b2252;">"*Org Agenda*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                  (<span style="color: #8b2252;">"*Org Select*"</span>  <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                  (<span style="color: #8b2252;">"*Occur*"</span>       <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
<span style="color: #b22222;">;;;            </span><span style="color: #b22222;">(undo-tree-visualizer-buffer-name :height 10 :position top)</span>
<span style="color: #b22222;">;;;            </span><span style="color: #b22222;">(undo-tree-diff-buffer-name :height 20 :position bottom)</span>
                  (<span style="color: #8b2252;">"*eshell*"</span>      <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom))
                popwin:special-display-config))))
  (popwin-mode 1))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline193" class="outline-2">
<h2 id="orgheadline193"><span class="section-number-2">13</span> ユーティリティ関数</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-orgheadline191" class="outline-3">
<h3 id="orgheadline191"><span class="section-number-3">13.1</span> [pomodoro.el] ポモドーロの実践</h3>
<div class="outline-text-3" id="text-13-1">
<p>
<a href="https://twitter.com/syohex">@syohex</a> さん謹製の <a href="https://github.com/syohex/emacs-utils/blob/master/pomodoro.el">pomodoro.el</a> に少しカスタマイズしたおれおれ <a href="https://github.com/takaxp/emacs-utils/blob/master/pomodoro.el">pomodoro.el</a> を使っています．以下のように設定すると，ポモドーロの残り時間は表示せず，アイコンだけをモードラインに表示できます．残り時間は <code>M-x pomodoro:mode-line-time-display-toggle</code> すれば，いつでも表示できます．<br  />
</p>

<p>
<code>pomodoro:finish-work-hook</code> ， <code>pomodoro:finish-rest-hook</code> ， <code>pomodoro:long-rest-hook</code> にそれぞれ結びつけてあるのは，<a href="http://www.mactechlab.jp/products-report/16673.html">Macのスピーチ機能</a>です．この例では，Kyoko さんが指示を出してくれます．<br  />
</p>

<p>
<code>M-x pomodoro:start</code> すると，ポモドーロが始まり，8時間後に <code>pomodoro:stop</code> が呼ばれてポモドーロが終了します．<a href="http://www.pomodorotechnique.com/">pomodoro</a> は機械的に仕事をしたい人にピッタリです．人によっては <a href="http://ja.wikipedia.org/wiki/Getting_Things_Done">GTD</a> よりも取っ付きやすいと思います．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(pomodoro:start) <span style="color: #8b2252;">"pomodoro"</span> nil t nil
 '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;&#32066;&#20102;&#24460;&#12395;&#38283;&#12367;&#12501;&#12449;&#12452;&#12523;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;</span>
   (setq pomodoro:file nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#9679;&#12384;&#12369;&#12391;&#34920;&#29694;&#12377;&#12427;&#65288;&#27531;&#12426;&#26178;&#38291;&#34920;&#31034;&#12394;&#12375;&#65289;</span>
   (setq pomodoro:mode-line-time-display nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#9679;&#12398;&#32622;&#12365;&#25563;&#12360;</span>
   (setq pomodoro:mode-line-work-sign <span style="color: #8b2252;">"&#9679;"</span>)
   (setq pomodoro:mode-line-rest-sign pomodoro:mode-line-work-sign)
   (setq pomodoro:mode-line-long-rest-sign pomodoro:mode-line-work-sign)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#38263;&#12356;&#20241;&#25001;&#12395;&#20837;&#12427;&#12414;&#12391;&#12395;&#12509;&#12514;&#12489;&#12540;&#12525;&#12377;&#12427;&#22238;&#25968;</span>
   (setq pomodoro:iteration-for-long-rest 2)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;&#38306;&#36899;</span>
   (setq pomodoro:work-time 120     <span style="color: #b22222;">; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;</span>
         pomodoro:rest-time 20      <span style="color: #b22222;">; </span><span style="color: #b22222;">&#20241;&#25001;&#26178;&#38291;</span>
         pomodoro:long-rest-time 60 <span style="color: #b22222;">; </span><span style="color: #b22222;">&#38263;&#12356;&#20241;&#25001;&#26178;&#38291;</span>
         pomodoro:max-iteration 16) <span style="color: #b22222;">; </span><span style="color: #b22222;">&#12509;&#12514;&#12489;&#12540;&#12525;&#12377;&#12427;&#22238;&#25968;</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12510;&#12540;&#12398;&#34920;&#31034;&#12434;&#12494;&#12540;&#12510;&#12523;&#12501;&#12455;&#12452;&#12473;&#12395;&#12377;&#12427;</span>
   (set-face-bold-p 'pomodoro:timer-face nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#20013;&#65288;&#36196;&#65289;&#65292;&#20241;&#25001;&#20013;&#65288;&#38738;&#65289;&#65292;&#38263;&#12356;&#20241;&#25001;&#20013;&#65288;&#32209;&#65289;&#12395;&#12377;&#12427;</span>
   (set-face-foreground 'pomodoro:work-face <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #F53838;">#F53838</span><span style="color: #8b2252;">"</span>)
   (set-face-foreground 'pomodoro:rest-face <span style="color: #8b2252;">"</span><span style="color: #ffffff; background-color: #3869FA;">#3869FA</span><span style="color: #8b2252;">"</span>)
   (set-face-foreground 'pomodoro:long-rest-face <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #00B800;">#00B800</span><span style="color: #8b2252;">"</span>)

   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my:pomodoro-speak</span> nil)
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:pomodoro-speak-toggle</span> ()
     (interactive)
     (setq my:pomodoro-speak (not my:pomodoro-speak)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Mac &#12518;&#12540;&#12470;&#21521;&#12369;&#65294;Kyoko&#12373;&#12435;&#12395;&#25351;&#31034;&#12375;&#12390;&#12418;&#12425;&#12358;</span>
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">pomodoro:with-speak</span> nil)
   (<span style="color: #a020f0;">when</span> pomodoro:with-speak
     (add-hook 'pomodoro:finish-work-hook
               (<span style="color: #a020f0;">lambda</span> ()
                 (<span style="color: #a020f0;">let</span> ((script
                        (concat <span style="color: #8b2252;">"say -v Kyoko "</span>
                                (number-to-string (floor pomodoro:rest-time))
                                <span style="color: #8b2252;">"&#20998;&#38291;&#65292;&#20241;&#25001;&#12375;&#12429;"</span>)))
                   (<span style="color: #a020f0;">if</span> my:pomodoro-speak
                       (shell-command-to-string script)
                     (message <span style="color: #8b2252;">"%s"</span> script)))))

     (add-hook 'pomodoro:finish-rest-hook
               (<span style="color: #a020f0;">lambda</span> ()
                 (<span style="color: #a020f0;">let</span> ((script
                        (concat <span style="color: #8b2252;">"say -v Kyoko "</span>
                                (number-to-string (floor pomodoro:work-time))
                                <span style="color: #8b2252;">"&#20998;&#38291;&#65292;&#20316;&#26989;&#12375;&#12429;"</span>)))
                   (<span style="color: #a020f0;">if</span> my:pomodoro-speak
                       (shell-command-to-string script)
                     (message <span style="color: #8b2252;">"%s"</span> script)))))

     (add-hook 'pomodoro:long-rest-hook
               (<span style="color: #a020f0;">lambda</span> ()
                 (<span style="color: #a020f0;">let</span> ((script
                        (concat <span style="color: #8b2252;">"say -v Kyoko &#12371;&#12428;&#12363;&#12425;"</span>
                                (number-to-string
                                 (floor pomodoro:long-rest-time))
                                <span style="color: #8b2252;">"&#20998;&#38291;&#12398;&#20241;&#25001;&#12391;&#12377;"</span>)))
                   (<span style="color: #a020f0;">if</span> my:pomodoro-speak
                       (shell-command-to-string script)
                     (message <span style="color: #8b2252;">"%s"</span> script))))))

   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my:pomodoro-notify</span> ()
     (shell-command-to-string
      (concat <span style="color: #8b2252;">"terminal-notifier -title \"Pomodoro\" -message \""</span>
              <span style="color: #8b2252;">"DONE! This time slot has been finished!\""</span>)))
   (add-hook 'pomodoro:finish-work-hook 'my:pomodoro-notify)
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline192" class="outline-3">
<h3 id="orgheadline192"><span class="section-number-3">13.2</span> [utility.el] 自作してテスト中の便利関数群</h3>
<div class="outline-text-3" id="text-13-2">
<p>
関数定義を<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:utility.el">別ファイル</a>に分離して，Emacs起動の高速化を図っています．各関数を autoload の管理下において，必要なときにロードするように設定しています．<br  />
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
       '(takaxp:date takaxp:window-resizer eval-org-buffer
                     kyoko-mad-mode-toggle org2dokuwiki-cp-kill-ring
                     open-current-directory set-alarms-from-file
                     takaxp:open-file-ring reload-ical-export
                     show-org-buffer get-random-string init-auto-install
                     add-itemize-head insert-formatted-current-date
                     insert-formatted-current-time insert-formatted-signature
                     export-timeline-business export-timeline-private 
                     browse-url-chrome count-words-buffer do-test-applescript
                     delete-backup-files recursive-delete-backup-files
                     describe-timer)
       <span style="color: #8b2252;">"utility"</span> nil t)
  <span style="color: #b22222;">;;         </span><span style="color: #b22222;">'((message "Loading utility.el ... [done]")))</span>

  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f12&gt;"</span>) 'takaxp:open-file-ring)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c t"</span>) 'takaxp:date)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c f 4"</span>) 'takaxp:window-resizer))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline195" class="outline-2">
<h2 id="orgheadline195"><span class="section-number-2">14</span> お試し中</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-orgheadline194" class="outline-3">
<h3 id="orgheadline194"><span class="section-number-3">14.1</span> yascroll</h3>
<div class="outline-text-3" id="text-14-1">
<ul class="org-ul">
<li><a href="http://d.hatena.ne.jp/m2ym/20110401/1301617991">http://d.hatena.ne.jp/m2ym/20110401/1301617991</a><br  /></li>
<li>2015-03-15: smooth-scroll との組み合わせで重いため試用停止中<br  /></li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package yascroll
  <span style="color: #483d8b;">:disabled</span> t
  <span style="color: #483d8b;">:init</span>
  (global-yascroll-bar-mode 1)
  (setq yascroll:delay-to-hide 1)
  (setq yascroll:disabled-modes '(org))
  (set-face-foreground 'yascroll:thumb-fringe <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #b2cefb;">#b2cefb</span><span style="color: #8b2252;">"</span>)
  (set-face-background 'yascroll:thumb-fringe <span style="color: #8b2252;">"</span><span style="color: #000000; background-color: #b2cefb;">#b2cefb</span><span style="color: #8b2252;">"</span>)
  )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline196" class="outline-2">
<h2 id="orgheadline196"><span class="section-number-2">15</span> provide</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">provide</span> '<span style="color: #008b8b;">init</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Takaaki Ishikawa</p>
<p class="date">Created: 2015-06-05 Fri 00:53</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
