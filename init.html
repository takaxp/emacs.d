<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Configurations for GNU Emacs</title>
<!-- 2014-03-20 Thu 15:26 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Takaaki Ishikawa" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Configurations for GNU Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. はじめに</a></li>
<li><a href="#sec-2">2. 基本設定</a>
<ul>
<li><a href="#sec-2-1">2.1. init.el のヘッダ</a></li>
<li><a href="#sec-2-2">2.2. cl を使う</a></li>
<li><a href="#sec-2-3">2.3. リストで関数を渡せる autoload-if-found を使う</a></li>
<li><a href="#sec-2-4">2.4. [eval-after-autoload-func.el] 遅延読み込み</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1. マクロ版</a></li>
<li><a href="#sec-2-4-2">2.4.2. 関数版</a></li>
</ul>
</li>
<li><a href="#sec-2-5">2.5. パス設定</a></li>
<li><a href="#sec-2-6">2.6. 警告の抑制</a></li>
</ul>
</li>
<li><a href="#sec-3">3. コア設定</a>
<ul>
<li><a href="#sec-3-1">3.1. 言語／文字コード</a></li>
<li><a href="#sec-3-2">3.2. 日本語入力</a></li>
<li><a href="#sec-3-3">3.3. 検索</a></li>
<li><a href="#sec-3-4">3.4. 基本キーバインド</a></li>
<li><a href="#sec-3-5">3.5. ナローイングするか</a></li>
<li><a href="#sec-3-6">3.6. バッファの終わりでのnewlineを禁止する</a></li>
<li><a href="#sec-3-7">3.7. 常に最終行に一行追加する</a></li>
<li><a href="#sec-3-8">3.8. 長い文章を右端で常に折り返す</a></li>
<li><a href="#sec-3-9">3.9. バッファが外部から編集された場合に自動で再読み込みする</a></li>
<li><a href="#sec-3-10">3.10. 同じバッファ名が開かれた場合に区別する</a></li>
<li><a href="#sec-3-11">3.11. マウスで選択した領域を自動コピー</a></li>
</ul>
</li>
<li><a href="#sec-4">4. カーソル移動</a>
<ul>
<li><a href="#sec-4-1">4.1. バッファ内のカーソル移動</a></li>
<li><a href="#sec-4-2">4.2. バッファ間のカーソル移動</a></li>
<li><a href="#sec-4-3">4.3. スクロールを制御</a></li>
<li><a href="#sec-4-4">4.4. スクロールで表示を重複させる行数</a></li>
<li><a href="#sec-4-5">4.5. [SmoothScroll.el] カーソル固定でスクロールする</a>
<ul>
<li><a href="#sec-4-5-1">4.5.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-4-6">4.6. [point-undo.el] カーソル位置を簡単にたどる</a>
<ul>
<li><a href="#sec-4-6-1">4.6.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-4-7">4.7. [cycle-buffer.el] カレントバッファの表示切り替え</a>
<ul>
<li><a href="#sec-4-7-1">4.7.1. キーバインド</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-5">5. 編集サポート</a>
<ul>
<li><a href="#sec-5-1">5.1. 矩形編集／連番入力</a></li>
<li><a href="#sec-5-2">5.2. Yank時に装飾を取る</a></li>
<li><a href="#sec-5-3">5.3. ファイル保存時に時間を記録する</a></li>
<li><a href="#sec-5-4">5.4. 選択リージョンを使って検索</a></li>
<li><a href="#sec-5-5">5.5. ChangeLog モード</a></li>
<li><a href="#sec-5-6">5.6. テキストモード</a></li>
<li><a href="#sec-5-7">5.7. C/C++モード</a></li>
<li><a href="#sec-5-8">5.8. Infoモード</a></li>
<li><a href="#sec-5-9">5.9. スペルチェック</a>
<ul>
<li><a href="#sec-5-9-1">5.9.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-5-10">5.10. リアルタイムスペルチェック</a></li>
<li><a href="#sec-5-11">5.11. [latex-math-preview.el] TeX数式をプレビュー</a></li>
<li><a href="#sec-5-12">5.12. [po-mode.el] 翻訳ファイルの編集</a></li>
<li><a href="#sec-5-13">5.13. [word-count.el] リージョン内の文字をカウントする</a>
<ul>
<li><a href="#sec-5-13-1">5.13.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-5-14">5.14. [yatex.el] YaTeXモード</a></li>
<li><a href="#sec-5-15">5.15. [wclock.el] 世界時計</a></li>
<li><a href="#sec-5-16">5.16. [yasnippet.el] Emacs用のテンプレートシステム</a></li>
<li><a href="#sec-5-17">5.17. [sdic.el] 英辞郎で英単語を調べる</a>
<ul>
<li><a href="#sec-5-17-1">5.17.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-5-18">5.18. MacOSのdictionary.appでCOBUILD5の辞書をひく</a>
<ul>
<li><a href="#sec-5-18-1">5.18.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-5-19">5.19. [lookup.el] 辞書</a>
<ul>
<li><a href="#sec-5-19-1">5.19.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-5-20">5.20. [cacoo] Cacoo で描く</a></li>
<li><a href="#sec-5-21">5.21. [iedit] バッファ内の同じ文字列を一度に編集する</a></li>
<li><a href="#sec-5-22">5.22. [web-mode] HTML編集</a></li>
<li><a href="#sec-5-23">5.23. [zencoding-mode] HTML編集の高速化</a></li>
</ul>
</li>
<li><a href="#sec-6">6. 表示サポート</a>
<ul>
<li><a href="#sec-6-1">6.1. モードラインのモード名を短くする</a></li>
<li><a href="#sec-6-2">6.2. モードラインのNarrowを短くする</a></li>
<li><a href="#sec-6-3">6.3. モードラインの色をカスタマイズする</a>
<ul>
<li><a href="#sec-6-3-1">6.3.1. 色セット例</a></li>
</ul>
</li>
<li><a href="#sec-6-4">6.4. visible-bell のカスタマイズ</a></li>
<li><a href="#sec-6-5">6.5. 常に <b>scratch</b> を表示して起動する</a></li>
<li><a href="#sec-6-6">6.6. バッテリー情報をモードラインに表示する</a></li>
<li><a href="#sec-6-7">6.7. スクロールバーを非表示にする</a></li>
<li><a href="#sec-6-8">6.8. ツールバーを非表示にする</a></li>
<li><a href="#sec-6-9">6.9. 起動時のスプラッシュ画面を表示しない</a></li>
<li><a href="#sec-6-10">6.10. カーソル行の行数をモードラインに表示する</a></li>
<li><a href="#sec-6-11">6.11. カーソル行の関数名をモードラインに表示する</a></li>
<li><a href="#sec-6-12">6.12. 時刻をモードラインに表示する</a></li>
<li><a href="#sec-6-13">6.13. 対応するカッコをハイライトする</a></li>
<li><a href="#sec-6-14">6.14. 全角スペースと行末タブ／半角スペースを強調表示する</a></li>
<li><a href="#sec-6-15">6.15. [migemo.el] ローマ字入力で日本語を検索する</a></li>
<li><a href="#sec-6-16">6.16. [anything.el] 何でも絞り込みインターフェイス</a>
<ul>
<li><a href="#sec-6-16-1">6.16.1. キーバインド</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-7">7. メディアサポート</a>
<ul>
<li><a href="#sec-7-1">7.1. [bongo.el] Emacsのバッファで音楽ライブラリを管理する</a></li>
<li><a href="#sec-7-2">7.2. [GoogleMaps.el] GoogleMaps を Emacs 内で使う</a></li>
<li><a href="#sec-7-3">7.3. [org-google-weather.el] org-agenda に天気を表示する</a></li>
</ul>
</li>
<li><a href="#sec-8">8. 履歴／ファイル管理</a>
<ul>
<li><a href="#sec-8-1">8.1. Undoバッファを無限に取る</a></li>
<li><a href="#sec-8-2">8.2. バッファ保存時にバックアップファイルを生成する</a></li>
<li><a href="#sec-8-3">8.3. ミニバッファの履歴を保存しリストアする</a></li>
<li><a href="#sec-8-4">8.4. 履歴サイズを大きくする</a></li>
<li><a href="#sec-8-5">8.5. Emacs終了時に開いていたバッファを起動時に復元する</a></li>
<li><a href="#sec-8-6">8.6. 最近開いたファイルリストを保持</a></li>
<li><a href="#sec-8-7">8.7. 深夜にバッファを自動整理する</a></li>
<li><a href="#sec-8-8">8.8. [auto-save-buffers.el] 一定間隔でバッファを保存する</a></li>
<li><a href="#sec-8-9">8.9. [backup-dir.el] バックアップファイルを一箇所に集める</a></li>
<li><a href="#sec-8-10">8.10. [session.el] 様々な履歴を保存し復元に利用する</a></li>
<li><a href="#sec-8-11">8.11. [wakatime-mode.el] WakaTime を利用して作業記録する</a></li>
</ul>
</li>
<li><a href="#sec-9">9. 開発サポート</a>
<ul>
<li><a href="#sec-9-1">9.1. 便利キーバインド</a></li>
<li><a href="#sec-9-2">9.2. [gist.el] Gist インターフェイス</a></li>
<li><a href="#sec-9-3">9.3. [doxymacs.el] Doxygen のコメントを簡単に入力する</a></li>
<li><a href="#sec-9-4">9.4. [matlab.el] Matlab用の設定</a></li>
<li><a href="#sec-9-5">9.5. [auto-complete.el] 自動補完機能</a></li>
<li><a href="#sec-9-6">9.6. [auto-complete-clang.el] オムニ補完</a>
<ul>
<li><a href="#sec-9-6-1">9.6.1. 参考サイト</a></li>
</ul>
</li>
<li><a href="#sec-9-7">9.7. [hideshowvis.el] 関数の表示／非表示</a>
<ul>
<li><a href="#sec-9-7-1">9.7.1. キーバインド</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-10">10. Org Mode</a>
<ul>
<li><a href="#sec-10-1">10.1. 基本設定</a></li>
<li><a href="#sec-10-2">10.2. contribution を使う</a></li>
<li><a href="#sec-10-3">10.3. iCal との連携</a></li>
<li><a href="#sec-10-4">10.4. スピードコマンド</a></li>
<li><a href="#sec-10-5">10.5. Pomodoro</a></li>
<li><a href="#sec-10-6">10.6. face 関連</a></li>
<li><a href="#sec-10-7">10.7. TODOキーワードのカスタマイズ</a></li>
<li><a href="#sec-10-8">10.8. [org-agenda]</a>
<ul>
<li><a href="#sec-10-8-1">10.8.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-10-9">10.9. [appt.el] アラーム設定</a></li>
<li><a href="#sec-10-10">10.10. [org-capture] 高速にメモを取る</a></li>
<li><a href="#sec-10-11">10.11. [org-refile]</a></li>
<li><a href="#sec-10-12">10.12. [org-babel] 基本設定</a></li>
<li><a href="#sec-10-13">10.13. [org-babel] ソースブロックの入力キーをカスタマイズ</a></li>
<li><a href="#sec-10-14">10.14. [MobileOrg] iOS との連携</a></li>
<li><a href="#sec-10-15">10.15. [org-tree-slide.el] Org でプレゼンテーション</a></li>
<li><a href="#sec-10-16">10.16. [org-fstree] ディレクトリ構造を読み取る</a></li>
<li><a href="#sec-10-17">10.17. [calfw-org] calfw に org の予定を表示する</a></li>
<li><a href="#sec-10-18">10.18. [org-export-generic] エクスポート機能を拡張する</a></li>
<li><a href="#sec-10-19">10.19. [org-odt] ODT形式に出力</a></li>
<li><a href="#sec-10-20">10.20. [org-crypt] ツリーを暗号化する</a></li>
<li><a href="#sec-10-21">10.21. README を常に org-mode で開く</a></li>
<li><a href="#sec-10-22">10.22. その他</a>
<ul>
<li><a href="#sec-10-22-1">10.22.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-10-23">10.23. org-mode の latex エクスポート関数をオーバーライド</a></li>
</ul>
</li>
<li><a href="#sec-11">11. フォント／配色関連</a>
<ul>
<li><a href="#sec-11-1">11.1. 正規表現を見やすくする</a></li>
<li><a href="#sec-11-2">11.2. カーソル行に色をつける</a></li>
<li><a href="#sec-11-3">11.3. カーソルの色</a></li>
<li><a href="#sec-11-4">11.4. カーソルを点滅させない</a></li>
<li><a href="#sec-11-5">11.5. フォント設定</a>
<ul>
<li><a href="#sec-11-5-1">11.5.1. フォントのインストール方法</a></li>
<li><a href="#sec-11-5-2">11.5.2. フォントチェック用コード</a></li>
</ul>
</li>
<li><a href="#sec-11-6">11.6. フォントサイズを制御する</a>
<ul>
<li><a href="#sec-11-6-1">11.6.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-11-7">11.7. 行間を制御する</a></li>
<li><a href="#sec-11-8">11.8. パッチをカラフルに表示する</a></li>
<li><a href="#sec-11-9">11.9. 背景を黒系色にする</a></li>
<li><a href="#sec-11-10">11.10. [rainbow-mode.el] 配色のリアルタイム確認</a>
<ul>
<li><a href="#sec-11-10-1">11.10.1. 色一覧</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-12">12. フレーム／ウィンドウ制御</a>
<ul>
<li><a href="#sec-12-1">12.1. 起動時の設定</a></li>
<li><a href="#sec-12-2">12.2. [elscreen.el] Emacs バッファをタブ化</a></li>
<li><a href="#sec-12-3">12.3. [e2wm.el] 二画面表示</a></li>
<li><a href="#sec-12-4">12.4. [frame-ctr.el] キーボードでフレームの場所を移す</a>
<ul>
<li><a href="#sec-12-4-1">12.4.1. キーバインド</a></li>
</ul>
</li>
<li><a href="#sec-12-5">12.5. [popwin.el] ポップアップウィンドウの制御</a></li>
</ul>
</li>
<li><a href="#sec-13">13. ユーティリティ関数</a>
<ul>
<li><a href="#sec-13-1">13.1. [pomodoro.el] ポモドーロの実践</a></li>
<li><a href="#sec-13-2">13.2. [utility.el] 自作してテスト中の便利関数群</a></li>
</ul>
</li>
<li><a href="#sec-14">14. provide</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> はじめに</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>この文章は，<a href="https://gist.github.com/1369417">org2dokuwiki.pl</a>を使って生成しています．
</li>
<li><a href="https://github.com/takaxp/emacs.d/blob/master/init.el">init.el</a> 本体は，<a href="https://github.com/takaxp/emacs.d/">github</a> に公開しています．
</li>
<li><a href="https://github.com/takaxp/emacs.d/blob/master/init.org">init.org</a> から <a href="https://github.com/takaxp/emacs.d/blob/master/init.el">init.el</a>，<a href="https://github.com/takaxp/emacs.d/raw/master/init.pdf">init.pdf</a>，<a href="https://github.com/takaxp/emacs.d/raw/master/init.odt">init.odt</a>，<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:init.el">wiki</a> を生成しています．
</li>
<li>一部の関数定義を <a href="http://pastelwill.jp/wiki/doku.php?id=emacs:utility.el">utility.el</a> に分離しています．
</li>
<li>コピペだけで動かなかった場合は，ページ最下部のコメント欄にご意見をどうぞ．
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 基本設定</h2>
<div class="outline-text-2" id="text-2">
<p>
この設定群を利用するために設定です．おそらく記述しておかないと動きません．
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> init.el のヘッダ</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Configurations for Emacs</span>
<span style="color: #b22222;">;;;;                                       </span><span style="color: #b22222;">Takaaki ISHIKAWA  <a href="mailto:takaxp%40ieee.org">&lt;takaxp@ieee.org&gt;</a></span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Cite: http://www.mygooglest.com/fni/dot-emacs.html (GREAT!)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> cl を使う</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<a href="http://lisperblog.blogspot.com/2008/12/blog-post_18.html">http://lisperblog.blogspot.com/2008/12/blog-post_18.html</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">eval-when-compile</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cl</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> リストで関数を渡せる autoload-if-found を使う</h3>
<div class="outline-text-3" id="text-2-3">
<p>
<a href="http://d.hatena.ne.jp/jimo1001/20090921/1253525484">http://d.hatena.ne.jp/jimo1001/20090921/1253525484</a>
</p>

<p>
eval-after-load とのペアでマクロ化したバージョンもある（次章参照）．
</p>

<p>
<a href="http://e-arrows.sakura.ne.jp/2010/03/macros-in-emacs-el.html">http://e-arrows.sakura.ne.jp/2010/03/macros-in-emacs-el.html</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">autoload-if-found</span> (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type)
  <span style="color: #8b2252;">"set autoload iff. FILE has found."</span>
  (<span style="color: #a020f0;">if</span> (not (listp functions))
          (setq functions (list functions)))
  (and (locate-library file)
           (<span style="color: #a020f0;">progn</span>
                 (<span style="color: #a020f0;">dolist</span> (function functions)
                   (autoload function file docstring interactive type))
                 t )))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> [eval-after-autoload-func.el] 遅延読み込み</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Twitterでぼやいていたら<a href="https://twitter.com/cvmat">@cvmat</a>さんが降臨して次のマクロを作ってくださいました．感謝感謝．
</p>

<p>
<a href="https://gist.github.com/3513287">https://gist.github.com/3513287</a>
</p>

<p>
autoload-if-found で遅延読み込みすると，eval-after-load と組み合わせるので，どうしてもインデントが増えてしまう．
</p>

<p>
例えば，cycle-buffer を遅延読み込みしたい場合， <code>setq</code> で変数を書き換えするために随分とインデントが進んでいます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
           '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"cycle-buffer"</span>
        '(<span style="color: #a020f0;">progn</span>
           (setq cycle-buffer-allow-visible t)
           (setq cycle-buffer-show-length 12)
           (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>)))))
</pre>
</div>

<p>
これを，次の eval-after-autoload-func.el を使うと，非常にシンプルになる．行数も桁数もスッキリです．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t nil
 (setq cycle-buffer-allow-visible t)
 (setq cycle-buffer-show-length 12)
 (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>)))
</pre>
</div>
</div>

<div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> マクロ版</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
<a href="https://gist.github.com/3499459">https://gist.github.com/3499459</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">eval-after-autoload-if-found</span>
  (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type <span style="color: #228b22;">&amp;rest</span> after-body)
  <span style="color: #8b2252;">"Set up autoload and eval-after-load for FUNCTIONS iff. FILE has found."</span>
  `(<span style="color: #a020f0;">let*</span> ((functions ,functions)
                  (docstring ,docstring)
                  (interactive ,interactive)
                  (type ,type)
                  (file ,file))
         (<span style="color: #a020f0;">when</span> (locate-library file)
           (mapc (<span style="color: #a020f0;">lambda</span> (func)
                           (autoload func file docstring interactive type))
                         (<span style="color: #a020f0;">if</span> (listp functions)
                                 functions
                           (list functions)))
           ,@(<span style="color: #a020f0;">when</span> after-body
                   `((<span style="color: #a020f0;">eval-after-load</span> file '(<span style="color: #a020f0;">progn</span> ,@after-body))))
           t)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-4-2" class="outline-4">
<h4 id="sec-2-4-2"><span class="section-number-4">2.4.2</span> 関数版</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
<a href="https://gist.github.com/3513287">https://gist.github.com/3513287</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">eval-after-autoload-if-found</span> (functions file <span style="color: #228b22;">&amp;optional</span> docstring interactive type after-body)
  <span style="color: #8b2252;">"Set up autoload and eval-after-load for FUNCTIONS iff. FILE has found."</span>
  (<span style="color: #a020f0;">when</span> (locate-library file)
        (mapc (<span style="color: #a020f0;">lambda</span> (func)
                        (autoload func file docstring interactive type))
                  (<span style="color: #a020f0;">if</span> (listp functions)
                          functions
                        (list functions)))
        (<span style="color: #a020f0;">when</span> after-body
          (<span style="color: #a020f0;">eval-after-load</span> file `(<span style="color: #a020f0;">progn</span> ,@after-body)))
        t))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> パス設定</h3>
<div class="outline-text-3" id="text-2-5">
<p>
以下の2つ変数は，.emacsで <code>defconst</code> しています．APIの鍵などは， <code>private.el</code> なるファイルを別途置いて，このファイルにある変数を上書きするようにして記載しています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq default-path <span style="color: #8b2252;">"~/.emacs.d/"</span>)
(setq default-private-path <span style="color: #8b2252;">"~/.emacs.d/"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> 警告の抑制</h3>
<div class="outline-text-3" id="text-2-6">
<p>
起動時に警告が出てうっとうしい場合に使います．起動直後に呼ばれるように， <code>.emacs</code> の上の方に書いておくとよいと思います．
</p>

<p>
<a href="http://d.hatena.ne.jp/kitokitoki/20100425/p1">http://d.hatena.ne.jp/kitokitoki/20100425/p1</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq byte-compile-warnings
          '(free-vars unresolved callargs redefine obsolete noruntime
                                  cl-functions interactive-only make-local))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> コア設定</h2>
<div class="outline-text-2" id="text-3">
<p>
Emacs を操作して文書編集する上で欠かせない設定です．
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 言語／文字コード</h3>
<div class="outline-text-3" id="text-3-1">
<p>
徹底的にUTF-8に合わせます．
</p>

<p>
<code>save-buffer-coding-system</code> を設定すると， <code>buffer-file-coding-system</code> の値を無視して，指定した <code>save-buffer-coding-system</code> の値でバッファを保存する．つまり， <code>buffer-file-coding-system</code> に統一するなら設定不要．
</p>

<p>
<code>set-default-coding-systems</code> か <code>prefer-coding-system</code> を設定すると，同時に <code>file-name-coding-system=，=set-terminal-coding-system=，=set-keyboard-coding-system</code> も同時に設定される．=prefer-coding-system= は，文字コード自動判定の最上位判定項目を設定する．
</p>

<p>
<code>set-buffer-file-coding-system</code> は，Xとのデータやりとりを設定する．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8-unix)
(set-language-environment <span style="color: #8b2252;">"Japanese"</span>)
(set-locale-environment <span style="color: #8b2252;">"en_US.UTF-8"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">"ja_JP.UTF-8"</span>
(set-default-coding-systems 'utf-8-unix)
(set-selection-coding-system 'utf-8-unix)
(set-buffer-file-coding-system 'utf-8-unix)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">; </span><span style="color: #b22222;">(set-clipboard-coding-system 'utf-8) ; included by set-selection-coding-system</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(set-keyboard-coding-system 'utf-8) ; configured by prefer-coding-system</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(set-terminal-coding-system 'utf-8) ; configured by prefer-coding-system</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(setq buffer-file-coding-system 'utf-8) ; utf-8-unix</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(setq save-buffer-coding-system 'utf-8-unix) ; nil</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(set-buffer-process-coding-system 'utf-8 'utf-8)</span>
<span style="color: #b22222;">; </span><span style="color: #b22222;">(setq process-coding-system-alist</span>
<span style="color: #b22222;">;      </span><span style="color: #b22222;">(cons '("grep" utf-8 . utf-8) process-coding-system-alist))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> 日本語入力</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Emacs23用にインラインパッチを適用している場合に使います．
Lion でも使える自分用にカスタマイズした <a href="https://gist.github.com/1532344">inline-patch</a> を使っています．
</p>

<p>
Emacs24用には，Mavericks対応した<a href="https://gist.github.com/takaxp/9658281">パッチ</a>を使っています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;             </span><span style="color: #b22222;">(and (&gt;= emacs-major-version 24) (&lt;= emacs-minor-version 1)))</span>
        (<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (&gt;= emacs-major-version 24))
          (setq default-input-method <span style="color: #8b2252;">"MacOSX"</span>)
          (mac-add-key-passed-to-system 'shift))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> 検索</h3>
<div class="outline-text-3" id="text-3-3">
<p>
本文中のバッファがあるディレクトリを grep 検索します． <code>M-x ag</code> でさくっと検索できます．<a href="https://github.com/Wilfred/ag.el">ag.el</a> もありますが，まだ試していません．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ag</span> ()
  (interactive)
  (<span style="color: #a020f0;">let</span> ((grep-find-command <span style="color: #8b2252;">"ag --nogroup "</span>))
        (call-interactively 'grep-find)))
</pre>
</div>

<p>
検索には <code>The Silver Searcher</code> を使うので，あらかじめインストールしておく必要があります．MacPorts の場合，the_silver_searcher の名称で頒布されています． <code>exec-path</code> に <code>/opt/local/bin</code> が含まれていることを確認してください．
</p>

<pre class="example">
the_silver_searcher @0.18.1 (textproc)
    A code-searching tool similar to ack, but faster.
</pre>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> 基本キーバインド</h3>
<div class="outline-text-3" id="text-3-4">
<p>
次の機能にキーバインドを設定する．
</p>

<ul class="org-ul">
<li>Cmd+V でペースト（Mac用）
</li>
<li>Cmd と Option を逆にする（Mac用）
</li>
<li>削除
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eq window-system 'ns)
  (global-set-key (kbd <span style="color: #8b2252;">"M-v"</span>) 'yank)
  (setq ns-command-modifier 'meta)
  (setq ns-alternate-modifier 'super)
  (global-set-key [ns-drag-file] 'ns-find-file) <span style="color: #b22222;">; </span><span style="color: #b22222;">D&amp;D for Emacs23</span>
  (setq ns-pop-up-frames nil)) <span style="color: #b22222;">; </span><span style="color: #b22222;">D&amp;D for Emacs23</span>
(global-set-key [delete] 'delete-char)
(global-set-key [kp-delete] 'delete-char)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> ナローイングするか</h3>
<div class="outline-text-3" id="text-3-5">
<p>
ナローイングを有効にする．デフォルトは，ナローイングを知らないユーザが「データが消えた！」と勘違いしないように，無効になっている．
</p>

<p>
Org でナローイングを使う場合は，特に設定しなくてもよい．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(put 'narrow-to-region 'disabled nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> バッファの終わりでのnewlineを禁止する</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid adding a new line at the end of buffer</span>
(setq next-line-add-newlines nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><span class="section-number-3">3.7</span> 常に最終行に一行追加する</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Limit the final word to a line break code (automatically correct)</span>
(setq require-final-newline t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8"><span class="section-number-3">3.8</span> 長い文章を右端で常に折り返す</h3>
<div class="outline-text-3" id="text-3-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq truncate-lines nil)
(setq truncate-partial-width-windows nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-9" class="outline-3">
<h3 id="sec-3-9"><span class="section-number-3">3.9</span> バッファが外部から編集された場合に自動で再読み込みする</h3>
<div class="outline-text-3" id="text-3-9">
<p>
<code>auto-save-buffers</code> を使っていれば，バッファは常に保存された状態になるため，revert されてもわかりやすい．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-auto-revert-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-10" class="outline-3">
<h3 id="sec-3-10"><span class="section-number-3">3.10</span> 同じバッファ名が開かれた場合に区別する</h3>
<div class="outline-text-3" id="text-3-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">uniquify</span> nil t)
  (setq uniquify-buffer-name-style 'post-forward-angle-brackets))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-11" class="outline-3">
<h3 id="sec-3-11"><span class="section-number-3">3.11</span> マウスで選択した領域を自動コピー</h3>
<div class="outline-text-3" id="text-3-11">
<p>
マウスで選択すると，勝手にペーストボードにデータが流れます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-drag-copy-region t)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> カーソル移動</h2>
<div class="outline-text-2" id="text-4">
<p>
カーソルの移動は，次のポリシーに従っています．デフォルトではC-v/M-v で上下移動になっているが，M-v は windows のペーストに対応するので混乱を招くので使っていません．ページスクロールは標準の <code>cua-base.el</code> に記載されています．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">行移動</td>
<td class="left">C-n/C-p</td>
</tr>

<tr>
<td class="left">ページ移動（スクロール）</td>
<td class="left">M-n/M-p</td>
</tr>

<tr>
<td class="left">ウィンドウ移動</td>
<td class="left">C-M-n/C-M-p</td>
</tr>

<tr>
<td class="left">バッファ切り替え</td>
<td class="left">M-]/M-[</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> バッファ内のカーソル移動</h3>
<div class="outline-text-3" id="text-4-1">
<p>
先頭に移動，最終行に移動，ページ単位の進む，ページ単位の戻る，行数を指定して移動
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-M-t"</span>) 'beginning-of-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-b"</span>) 'end-of-buffer)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Backward page scrolling instead of M-v</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-p"</span>) 'scroll-down)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Frontward page scrolling instead of C-v</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-n"</span>) 'scroll-up)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move cursor to a specific line</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c g"</span>) 'goto-line)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> バッファ間のカーソル移動</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<code>C-c o</code> の代わりに，ウィンドウの移動をワンアクションで行う．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-M-p"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (other-window -1)))
(global-set-key (kbd <span style="color: #8b2252;">"C-M-n"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (other-window 1)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> スクロールを制御</h3>
<div class="outline-text-3" id="text-4-3">
<p>
一行づつスクロールさせます．デフォルトではバッファの端でスクロールすると，半画面移動します．また，上下の端にカーソルがどのくらい近づいたらスクロールとみなすかも指定できます．
</p>

<p>
<a href="http://marigold.sakura.ne.jp/devel/emacs/scroll/index.html">http://marigold.sakura.ne.jp/devel/emacs/scroll/index.html</a>
</p>

<p>
非ASCII文字を扱っているときに一行づつスクロールしない場合は，scroll-conservatively の値を1では大きい数字にすると直るかもしれません．
</p>

<p>
<a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a>
</p>

<p>
scroll-margin を指定すると，カーソルがウィンドウの端から離れた状態でスクロールされます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll window on a line-by-line basis</span>
(setq scroll-conservatively 1000)
(setq scroll-step 1)
(setq scroll-margin 0) <span style="color: #b22222;">; </span><span style="color: #b22222;">default=0</span>
</pre>
</div>

<p>
スクロール時のジャンプが気になる場合は次のパッケージを使うとよいです．
</p>

<p>
<a href="http://adamspiers.org/computing/elisp/smooth-scrolling.el">http://adamspiers.org/computing/elisp/smooth-scrolling.el</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(smooth-scrolling) <span style="color: #8b2252;">"smooth-scrolling"</span> nil t)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"smooth-scrolling"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq smooth-scroll-margin 1))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(smooth-scrolling) <span style="color: #8b2252;">"smooth-scrolling"</span> nil t nil
 '((setq smooth-scroll-margin 1)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> スクロールで表示を重複させる行数</h3>
<div class="outline-text-3" id="text-4-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll window on a page-by-pabe basis with N line overlapping</span>
(setq next-screen-context-lines 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> [SmoothScroll.el] カーソル固定でスクロールする</h3>
<div class="outline-text-3" id="text-4-5">
<p>
<a href="https://raw.github.com/takaxp/EmacsScripts/master/SmoothScroll.el">https://raw.github.com/takaxp/EmacsScripts/master/SmoothScroll.el</a>
<a href="https://github.com/pglotov/EmacsScripts/blob/master/SmoothScroll.el">https://github.com/pglotov/EmacsScripts/blob/master/SmoothScroll.el</a>
</p>

<p>
カーソル位置と行を固定してバッファを背景スクロールできます．
</p>

<p>
オリジナルのままだとコンパイル時に警告がでるので， <code>line-move-visual</code> で書き換えて使っています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(scroll-one-up scroll-one-down) <span style="color: #8b2252;">"smoothscroll"</span> nil t)
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload-if-found
 '(scroll-one-up scroll-one-down) <span style="color: #8b2252;">"smoothscroll"</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"s-&lt;up&gt;"</span>) 'scroll-one-down)
(global-set-key (kbd <span style="color: #8b2252;">"s-&lt;down&gt;"</span>) 'scroll-one-up)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> [point-undo.el] カーソル位置を簡単にたどる</h3>
<div class="outline-text-3" id="text-4-6">
<p>
autoload や autoload-if-found で定義すると，使いたい時に履歴が取れていないのでよろしくないです．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">point-undo</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1"><span class="section-number-4">4.6.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-6-1">
<p>
シングルキーを割り当てておくと使いやすいです．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">[point-undo.el] Move the cursor to the previous position</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f7&gt;"</span>) 'point-undo)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">[point-undo.el] Redo of point-undo</span>
(global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f7&gt;"</span>) 'point-redo)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> [cycle-buffer.el] カレントバッファの表示切り替え</h3>
<div class="outline-text-3" id="text-4-7">
<p>
<a href="http://www.emacswiki.org/emacs/download/cycle-buffer.el">http://www.emacswiki.org/emacs/download/cycle-buffer.el</a>
</p>

<p>
Cycle-buffer を使うと，バッファの履歴をスライドショーのようにたどれます．ミニバッファに前後の履歴が表示されるので，何回キーを押せばいいかの目安になります．それを超える場合には，おとなしくバッファリストを使います．直近数件のバッファをたどるのに便利です．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(cycle-buffer cycle-buffer-backward) <span style="color: #8b2252;">"cycle-buffer"</span> nil t nil
 '((setq cycle-buffer-allow-visible t)
   (setq cycle-buffer-show-length 12)
   (setq cycle-buffer-show-format '(<span style="color: #8b2252;">" &lt;(%s)&gt;"</span> . <span style="color: #8b2252;">" %s"</span>))))
</pre>
</div>
</div>

<div id="outline-container-sec-4-7-1" class="outline-4">
<h4 id="sec-4-7-1"><span class="section-number-4">4.7.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"M-]"</span>) 'cycle-buffer)
(global-set-key (kbd <span style="color: #8b2252;">"M-["</span>) 'cycle-buffer-backward)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> 編集サポート</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 矩形編集／連番入力</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Built-in の cua-base.el（CUA-mode）を使う．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(cua-mode t)
(setq cua-enable-cua-keys nil)
</pre>
</div>

<p>
矩形選択した後に， <code>M-n</code> を押すと，連番をふれる．開始値，増加値を入力してから，hoge%03d.pgm などとすれば，hoge001，hoge002，，，と入力される．これと，org-mode の表機能（ <code>C-c |</code> で選択部分を簡単に表にできる）を組み合わせれば，連番で数値をふったテーブルを容易に作れる．
</p>

<p>
なお，標準の rect.el に以下の機能が実装されている．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">矩形切り取り</td>
<td class="left">C-x r k</td>
</tr>

<tr>
<td class="left">矩形削除</td>
<td class="left">C-x r d</td>
</tr>

<tr>
<td class="left">矩形貼り付け</td>
<td class="left">C-x r y</td>
</tr>

<tr>
<td class="left">矩形先頭に文字を挿入</td>
<td class="left">C-x r t</td>
</tr>

<tr>
<td class="left">矩形を空白に変換する</td>
<td class="left">C-x r c</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Yank時に装飾を取る</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq yank-excluded-properties t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> ファイル保存時に時間を記録する</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Built-in の time-stamp.el を使う．
</p>

<p>
バッファの保存時にタイムスタンプを記録する．以下の設定では，バッファの先頭から10行以内に，"Last Update: " があると，"Last Update: 2011-12-31@12:00"のようにタイムスタンプが記録される．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'before-save-hook 'time-stamp)
(<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"time-stamp"</span>
  '(<span style="color: #a020f0;">progn</span>
         (setq time-stamp-start <span style="color: #8b2252;">"Last Update: "</span>)
         (setq time-stamp-format <span style="color: #8b2252;">"%04y-%02m-%02d@%02H:%02M"</span>)
         (setq time-stamp-end <span style="color: #8b2252;">"$"</span>)
         (setq time-stamp-line-limit 10))) <span style="color: #b22222;">; </span><span style="color: #b22222;">def=8</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> 選択リージョンを使って検索</h3>
<div class="outline-text-3" id="text-5-4">
<p>
検索語をミニバッファに入力するのが面倒なので，リージョンをそのまま検索語として利用します．
</p>

<p>
<a href="http://dev.ariel-networks.com/articles/emacs/part5/">http://dev.ariel-networks.com/articles/emacs/part5/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defadvice</span> <span style="color: #0000ff;">isearch-mode</span>
  (around isearch-mode-default-string
                  (forward <span style="color: #228b22;">&amp;optional</span> regexp op-fun recursive-edit word-p) activate)
  (<span style="color: #a020f0;">if</span> (and transient-mark-mode mark-active (not (eq (mark) (point))))
          (<span style="color: #a020f0;">progn</span>
                (isearch-update-ring (buffer-substring-no-properties (mark) (point)))
                (deactivate-mark)
                ad-do-it
                (<span style="color: #a020f0;">if</span> (not forward)
                        (isearch-repeat-backward)
                  (goto-char (mark))
                  (isearch-repeat-forward)))
        ad-do-it))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> ChangeLog モード</h3>
<div class="outline-text-3" id="text-5-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name <span style="color: #8b2252;">"Your NAME"</span>)
(setq user-mail-address <span style="color: #8b2252;">"your@address.com"</span>)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'change-log-mode-hook
                  '(<span style="color: #a020f0;">lambda</span>() (setq tab-width 4) (setq left-margin 4)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> テキストモード</h3>
<div class="outline-text-3" id="text-5-6">
<p>
<a href="http://d.hatena.ne.jp/NeoCat/20080211">http://d.hatena.ne.jp/NeoCat/20080211</a>
</p>

<p>
とは言っても，Org-modeを知ってから <code>.txt</code> もテキストモードで開かなくなったので，ほぼ無意味な設定となりました．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook
                  '(<span style="color: #a020f0;">lambda</span>()
                         (setq tab-width 4)
                         (setq tab-stop-list
                                   '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60
                                           64 68 72 76 80))
                         (setq indent-line-function 'tab-to-tab-stop)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> C/C++モード</h3>
<div class="outline-text-3" id="text-5-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-mode-alist
          (append '((<span style="color: #8b2252;">"\\.h\\'"</span> . c++-mode)) auto-mode-alist))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> Infoモード</h3>
<div class="outline-text-3" id="text-5-8">
<p>
Org-mode の日本語翻訳済みinfoを読むための設定．<a href="https://github.com/org-mode-doc-ja/org-ja">翻訳プロジェクト</a>で頒布しています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(info) <span style="color: #8b2252;">"info"</span> nil t nil
           '((add-to-list 'Info-additional-directory-list
                                          (expand-file-name <span style="color: #8b2252;">"~/devel/mygit/org-ja/work/"</span>))))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-info-ja</span> (<span style="color: #228b22;">&amp;optional</span> node)
        <span style="color: #8b2252;">"(Japanese) Read documentation for Org-mode in the info system.</span>
<span style="color: #8b2252;">  With optional NODE, go directly to that node."</span>
        (interactive)
        (info (format <span style="color: #8b2252;">"(org-ja)%s"</span> (or node <span style="color: #8b2252;">""</span>)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="section-number-3">5.9</span> スペルチェック</h3>
<div class="outline-text-3" id="text-5-9">
<p>
Built-in の ispell を使う．チェックエンジンは，aspell を利用する．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">'ns</td>
<td class="left">sudo port install aspell aspell-dict-en</td>
</tr>

<tr>
<td class="left">'x32</td>
<td class="left">installer.exe and aspell-en from <a href="http://aspell.net/win32/">http://aspell.net/win32/</a></td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Use aspell for spell checking instead of ispell.</span>
(<span style="color: #a020f0;">when</span> (executable-find <span style="color: #8b2252;">"aspell"</span>)
  (eval-after-autoload-if-found
   '(ispell-region) <span style="color: #8b2252;">"ispell"</span> nil t nil
   '((setq-default ispell-program-name <span style="color: #8b2252;">"aspell"</span>)
         (<span style="color: #a020f0;">when</span> (eq window-system 'w32)
           (setq-default ispell-program-name
                                         <span style="color: #8b2252;">"C:/Program Files/Aspell/bin/aspell.exe"</span>))
         <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq ispell-grep-command "grep")</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">for English and Japanese mixed</span>

         (add-to-list 'ispell-skip-region-alist '(<span style="color: #8b2252;">"[</span><span style="color: #8b2252;">^</span><span style="color: #8b2252;">\000-\377]"</span>))
         (setq ispell-dictionarry <span style="color: #8b2252;">"english"</span>)
         (setq ispell-personal-dictionary
                   (concat default-private-path <span style="color: #8b2252;">".aspell.en.pws"</span>))

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">This will also avoid an IM-OFF issue for flyspell-mode.</span>
         <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq ispell-aspell-supports-utf8 t)</span>
         <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq ispell-encoding8-command t)</span>
         (setq ispell-local-dictionary-alist
                   '((nil <span style="color: #8b2252;">"[a-zA-Z]"</span> <span style="color: #8b2252;">"[</span><span style="color: #8b2252;">^</span><span style="color: #8b2252;">a-zA-Z]"</span> <span style="color: #8b2252;">"'"</span> t
                                  (<span style="color: #8b2252;">"-d"</span> <span style="color: #8b2252;">"en"</span> <span style="color: #8b2252;">"--encoding=utf-8"</span>) nil utf-8))))))
</pre>
</div>
</div>

<div id="outline-container-sec-5-9-1" class="outline-4">
<h4 id="sec-5-9-1"><span class="section-number-4">5.9.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Spell checking within a specified region</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c 0"</span>) 'ispell-region)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5-10" class="outline-3">
<h3 id="sec-5-10"><span class="section-number-3">5.10</span> リアルタイムスペルチェック</h3>
<div class="outline-text-3" id="text-5-10">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/FlySpell">flyspell.el</a> を使います．
</p>

<p>
重いので現在は使っていません．
</p>

<p>
<a href="http://www.morishima.net/~naoto/fragments/archives/2005/12/20/flyspell/">http://www.morishima.net/~naoto/fragments/archives/2005/12/20/flyspell/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">dolist</span>
        (hook
         '(text-mode-hook change-log-mode-hook c++-mode-hook
                                          latex-mode-hook org-mode-hook))
  (add-hook hook (<span style="color: #a020f0;">lambda</span> () (flyspell-mode 1))))

(add-hook 'c++-mode-hook
                  (<span style="color: #a020f0;">lambda</span> () (flyspell-prog-mode)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Auto complete &#12392;&#12398;&#34909;&#31361;&#12434;&#22238;&#36991;</span>
(ac-flyspell-workaround)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-11" class="outline-3">
<h3 id="sec-5-11"><span class="section-number-3">5.11</span> [latex-math-preview.el] TeX数式をプレビュー</h3>
<div class="outline-text-3" id="text-5-11">
<p>
<a href="http://www.emacswiki.org/emacs/latex-math-preview.el">http://www.emacswiki.org/emacs/latex-math-preview.el</a>
<a href="http://transitive.info/software/latex-math-preview/">http://transitive.info/software/latex-math-preview/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'latex-math-preview <span style="color: #8b2252;">"latex-math-preview"</span> nil t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-12" class="outline-3">
<h3 id="sec-5-12"><span class="section-number-3">5.12</span> [po-mode.el] 翻訳ファイルの編集</h3>
<div class="outline-text-3" id="text-5-12">
<p>
<a href="http://www.emacswiki.org/emacs/PoMode">http://www.emacswiki.org/emacs/PoMode</a>
<a href="http://www.emacswiki.org/emacs/po-mode+.el">http://www.emacswiki.org/emacs/po-mode+.el</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'po-mode "po-mode+" nil nil)</span>
(autoload 'po-mode <span style="color: #8b2252;">"po-mode"</span> nil t)
(setq auto-mode-alist
          (cons '(<span style="color: #8b2252;">"\\.po[tx]?\\'</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">\\.po\\."</span> . po-mode)
                        auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-13" class="outline-3">
<h3 id="sec-5-13"><span class="section-number-3">5.13</span> [word-count.el] リージョン内の文字をカウントする</h3>
<div class="outline-text-3" id="text-5-13">
<p>
有効な頒布元に変更があった．<a href="http://www.emacswiki.org/emacs/WordCount">word-count.el</a> から新しい頒布元にたどりつける．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(word-count-mode) <span style="color: #8b2252;">"word-count"</span> <span style="color: #8b2252;">"Minor mode to count words."</span> t)
</pre>
</div>
</div>

<div id="outline-container-sec-5-13-1" class="outline-4">
<h4 id="sec-5-13-1"><span class="section-number-4">5.13.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-13-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"M-+"</span>) 'word-count-mode)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5-14" class="outline-3">
<h3 id="sec-5-14"><span class="section-number-3">5.14</span> [yatex.el] YaTeXモード</h3>
<div class="outline-text-3" id="text-5-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'yatex-mode <span style="color: #8b2252;">"yatex"</span> <span style="color: #8b2252;">"Yet Another LaTeX mode"</span> t)
  (setq auto-mode-alist
        (cons (cons <span style="color: #8b2252;">"\\.tex$"</span> 'yatex-mode) auto-mode-alist))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable auto line break</span>
  (add-hook 'yatex-mode-hook
            '(<span style="color: #a020f0;">lambda</span> ()
               (setq auto-fill-function nil)))
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"yatex"</span>
    '(<span style="color: #a020f0;">progn</span>
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">1=Shift JIS, 2=JIS, 3=EUC, 4=UTF-8</span>
       (setq YaTeX-kanji-code 4))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(yatex-mode) <span style="color: #8b2252;">"yatex"</span> <span style="color: #8b2252;">"Yet Another LaTeX mode"</span> t nil
           '((setq YaTeX-kanji-code 4))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">1=Shift JIS, 2=JIS, 3=EUC, 4=UTF-8</span>

  (setq auto-mode-alist
                (cons (cons <span style="color: #8b2252;">"\\.tex$"</span> 'yatex-mode) auto-mode-alist))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable auto line break</span>
  (add-hook 'yatex-mode-hook
                        '(<span style="color: #a020f0;">lambda</span> ()
                           (setq auto-fill-function nil))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-15" class="outline-3">
<h3 id="sec-5-15"><span class="section-number-3">5.15</span> [wclock.el] 世界時計</h3>
<div class="outline-text-3" id="text-5-15">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs">http://pastelwill.jp/wiki/doku.php?id=emacs</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 'wclock <span style="color: #8b2252;">"wclock"</span> nil t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-16" class="outline-3">
<h3 id="sec-5-16"><span class="section-number-3">5.16</span> [yasnippet.el] Emacs用のテンプレートシステム</h3>
<div class="outline-text-3" id="text-5-16">
<p>
<a href="https://github.com/capitaomorte/yasnippet">https://github.com/capitaomorte/yasnippet</a>
</p>

<ul class="org-ul">
<li><a href="http://yasnippet-doc-jp.googlecode.com/svn/trunk/doc-jp/index.html">http://yasnippet-doc-jp.googlecode.com/svn/trunk/doc-jp/index.html</a>
</li>
<li><a href="http://d.hatena.ne.jp/IMAKADO/20080401/1206715770">http://d.hatena.ne.jp/IMAKADO/20080401/1206715770</a>
</li>
<li><a href="http://coderepos.org/share/browser/config/yasnippet">http://coderepos.org/share/browser/config/yasnippet</a>
</li>
<li><a href="https://github.com/RickMoynihan/yasnippet-org-mode">https://github.com/RickMoynihan/yasnippet-org-mode</a>
</li>
</ul>

<p>
<a href="http://orgmode.org/manual/Conflicts.html">Org-modeとの衝突を避ける</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">                (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">yas-org-very-safe-expand</span> ()
                  (<span style="color: #a020f0;">let</span> ((yas-fallback-behavior 'return-nil)) (yas-expand)))
                (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">yasnippet</span> nil t)
                  (setq yas-verbosity 2)
                  (setq yas-snippet-dirs
                                '(<span style="color: #8b2252;">"~/Dropbox/emacs.d/yas-dict"</span>
                                  <span style="color: #8b2252;">"~/devel/git/yasnippet/snippets"</span>))
                  <span style="color: #b22222;">;;        </span><span style="color: #b22222;">(yas-global-mode 1)</span>
                  (custom-set-variables '(yas-trigger-key <span style="color: #8b2252;">"TAB"</span>))
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">(yas-global-mode 1)</span>
                  ) <span style="color: #b22222;">; </span><span style="color: #b22222;">ver.8</span>


                (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'c-mode-common-hook))
                  (add-hook hook 'yas-minor-mode-on))
                (add-hook 'emacs-lisp-mode-hook
                                  '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal <span style="color: #8b2252;">"*scratch*"</span> (buffer-name))
                                                                (yas-minor-mode-on))))
                (add-hook 'org-mode-hook
                                  '(<span style="color: #a020f0;">lambda</span> ()
                                         (yas-minor-mode-on)
                                         <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-cycle (&lt;TAB&gt;) &#12392;&#12398;&#34909;&#31361;&#12434;&#36991;&#12369;&#12427;</span>
                                         (setq yas-trigger-symbol [tab])
                                         (add-to-list 'org-tab-first-hook 'yas-org-very-safe-expand)
                                         (define-key yas-keymap [tab] 'yas-next-field)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-17" class="outline-3">
<h3 id="sec-5-17"><span class="section-number-3">5.17</span> [sdic.el] 英辞郎で英単語を調べる</h3>
<div class="outline-text-3" id="text-5-17">
<p>
<a href="http://www.namazu.org/~tsuchiya/sdic/index.html">http://www.namazu.org/~tsuchiya/sdic/index.html</a>
</p>

<p>
Emacs から辞書を使う．lookup を使う方法もあるが，Emacsから使うのは英辞郎に限定．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(sdic-describe-word sdic-describe-word-at-point)
       <span style="color: #8b2252;">"sdic"</span> nil t)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"sdic"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq sdic-face-color <span style="color: #8b2252;">"#3333FF"</span>)
       (setq sdic-default-coding-system 'utf-8)
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (English =&gt; Japanese)</span>
       (setq sdic-eiwa-dictionary-list
             '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/EIJI-128.sdic"</span>)))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (Japanese =&gt; English)</span>
       (setq sdic-waei-dictionary-list
             '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/WAEI-128.sdic"</span>))))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(sdic-describe-word sdic-describe-word-at-point) <span style="color: #8b2252;">"sdic"</span> nil t nil
 '((setq sdic-face-color <span style="color: #8b2252;">"#3333FF"</span>)
   (setq sdic-default-coding-system 'utf-8)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (English =&gt; Japanese)</span>
   (setq sdic-eiwa-dictionary-list
                 '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/EIJI-128.sdic"</span>)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Dictionary (Japanese =&gt; English)</span>
   (setq sdic-waei-dictionary-list
                 '((sdicf-client <span style="color: #8b2252;">"~/Dropbox/Dic/EIJIRO6/WAEI-128.sdic"</span>)))))
</pre>
</div>
</div>

<div id="outline-container-sec-5-17-1" class="outline-4">
<h4 id="sec-5-17-1"><span class="section-number-4">5.17.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-17-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12540;&#12477;&#12523;&#12398;&#20301;&#32622;&#12398;&#33521;&#21336;&#35486;&#12398;&#24847;&#21619;&#12434;&#35519;&#12409;&#12427;</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-M-w"</span>) 'sdic-describe-word-at-point)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12511;&#12491;&#12496;&#12483;&#12501;&#12449;&#12395;&#33521;&#21336;&#35486;&#12434;&#20837;&#12428;&#12390;&#33521;&#36766;&#37070;&#12434;&#20351;&#12358;</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c w"</span>) 'sdic-describe-word)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5-18" class="outline-3">
<h3 id="sec-5-18"><span class="section-number-3">5.18</span> MacOSのdictionary.appでCOBUILD5の辞書をひく</h3>
<div class="outline-text-3" id="text-5-18">
<p>
OS標準の辞書アプリ（dictionary.app）を経由して，バッファにCOBUILD5のデータを流し込むことができます．
</p>

<ul class="org-ul">
<li><a href="http://sakito.jp/mac/dictionary.html#emacs">辞書(Dictionary).appを使い倒そう</a>
</li>
</ul>

<p>
以下の関数を準備します．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">dictionary</span> ()
 <span style="color: #8b2252;">"dictionary.app"</span>
 (interactive)

 (<span style="color: #a020f0;">let</span> ((editable (not buffer-read-only))
       (pt (<span style="color: #a020f0;">save-excursion</span> (mouse-set-point last-nonmenu-event)))
       beg end)

   (<span style="color: #a020f0;">if</span> (and mark-active
            (&lt;= (region-beginning) pt) (&lt;= pt (region-end)) )
       (setq beg (region-beginning)
             end (region-end))
     (<span style="color: #a020f0;">save-excursion</span>
       (goto-char pt)
       (setq end (<span style="color: #a020f0;">progn</span> (forward-word) (point)))
       (setq beg (<span style="color: #a020f0;">progn</span> (backward-word) (point)))
       ))

   (<span style="color: #a020f0;">let</span> ((word (buffer-substring-no-properties beg end))
         (win (selected-window))
         (tmpbuf <span style="color: #8b2252;">" *dict-process*"</span>))
     (pop-to-buffer tmpbuf)
     (erase-buffer)
     (insert word <span style="color: #8b2252;">"\n"</span>)
     (start-process <span style="color: #8b2252;">"dict-process"</span> tmpbuf <span style="color: #8b2252;">"dict.py"</span> word)
     (select-window win)
     )
 ))
</pre>
</div>

<p>
これでカーソル以下の単語の情報が別ウィンドウに出ます．チェックし終わったら <code>C-x 1</code> (delete-other-windows) で表示を閉じます． <code>q</code> で閉じられるようにしたり，ツールチップで表示したりもできるはずです．
</p>

<p>
マスタカさんのナイスソリューションをまだ試していないので，こちらの方がエレガントかもしれません．
</p>

<ul class="org-ul">
<li><a href="http://masutaka.net/chalow/2011-05-18-1.html">Emacs で Mac の辞書を sdic っぽく使う </a>
</li>
<li><a href="http://masutaka.net/chalow/2012-09-17-1.html">EmacsからMacの辞書をお手軽に使う</a>
</li>
</ul>

<p>
なお，COBUILD5の辞書データをdictionary.appで引けるようにするには以下の操作が必要です．
</p>

<ul class="org-ul">
<li><a href="http://safx-dev.blogspot.jp/2012/02/collins-cobuld-5dictionaryapp.html">Collins COBULD 5をDictionary.appで利用できるようにする</a>
</li>
</ul>

<p>
私の場合は，できあがった辞書を <code>/Library/Dictionaries/</code> 以下に置いています．その状態で dictionary.app の設定で辞書の優先順位を変えることで，常にCOBUILD5の情報を引っ張り出せます．
</p>
</div>

<div id="outline-container-sec-5-18-1" class="outline-4">
<h4 id="sec-5-18-1"><span class="section-number-4">5.18.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-18-1">
<p>
sdic 用の設定と衝突しないように気をつけます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12540;&#12477;&#12523;&#12398;&#20301;&#32622;&#12398;&#33521;&#21336;&#35486;&#12398;&#24847;&#21619;&#12434;&#35519;&#12409;&#12427;</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-M-w"</span>) 'dictionary)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5-19" class="outline-3">
<h3 id="sec-5-19"><span class="section-number-3">5.19</span> [lookup.el] 辞書</h3>
<div class="outline-text-3" id="text-5-19">
<p>
最近使っていません．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">.lookup/cache.el</span>
(setq lookup-init-directory <span style="color: #8b2252;">"~/env/dot_files/.lookup"</span>)

(autoload 'lookup <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-region <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-word <span style="color: #8b2252;">"lookup"</span> nil t)
(autoload 'lookup-select-dictionaries <span style="color: #8b2252;">"lookup"</span> nil t)

(setq lookup-search-modules
          '((<span style="color: #8b2252;">"default"</span>
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/cobuild"</span> <span style="color: #483d8b;">:priority</span> t)
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/wordbank"</span> <span style="color: #483d8b;">:priority</span> t)
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/ldoce4"</span> <span style="color: #483d8b;">:priority</span> t)
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/bank"</span> <span style="color: #483d8b;">:priority</span> t)
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/colloc"</span> <span style="color: #483d8b;">:priority</span> t)
                 (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/activ"</span> <span style="color: #483d8b;">:priority</span> t))))

(setq lookup-agent-attributes
          '((<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5"</span>
                 (dictionaries <span style="color: #8b2252;">"cobuild"</span> <span style="color: #8b2252;">"wordbank"</span>))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4"</span>
                 (dictionaries <span style="color: #8b2252;">"ldoce4"</span> <span style="color: #8b2252;">"bank"</span> <span style="color: #8b2252;">"colloc"</span> <span style="color: #8b2252;">"activ"</span>))))

(setq lookup-dictionary-attributes
          '((<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/cobuild"</span>
                 (title . <span style="color: #8b2252;">"COBUILD 5th Edition"</span>)
                 (methods exact prefix))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/COBUILD5/wordbank"</span>
                 (title . <span style="color: #8b2252;">"Wordbank"</span>)
                 (methods))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/ldoce4"</span>
                 (title . <span style="color: #8b2252;">"Longman 4th Edition"</span>)
                 (methods exact prefix))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/bank"</span>
                 (title . <span style="color: #8b2252;">"LDOCE4 Examples and Phrases"</span>)
                 (methods exact prefix menu))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/colloc"</span>
                 (title . <span style="color: #8b2252;">"LDOCE4 Collocation"</span>)
                 (methods exact prefix))
                (<span style="color: #8b2252;">"ndeb:/Users/taka/Dropbox/Dic/LDOCE4/activ"</span>
                 (title . <span style="color: #8b2252;">"Longman Activator"</span>)
                 (methods exact prefix menu))))

(setq lookup-default-dictionary-options
          '((<span style="color: #483d8b;">:stemmer</span> .  stem-english)))
(setq lookup-use-kakasi nil)

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">lookup for dictionary (require EB Library, eblook, and lookup.el)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">package download: http://sourceforge.net/projects/lookup</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://lookup.sourceforge.net/docs/ja/index.shtml#Top</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.bookshelf.jp/texi/lookup/lookup-guide.html#SEC_Top</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(load "lookup-autoloads") ; for 1.99</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup "lookup" nil t)</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-region "lookup" nil t)</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-word "lookup" nil t)</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(autoload 'lookup-select-dictionaries "lookup" nil t)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Search Agents</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">ndeb option requries "eblook" command</span>
                                                                                <span style="color: #b22222;">; </span><span style="color: #b22222;">Use expand-file-name!</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq lookup-search-agents `((ndeb ,(concat homedir "/Dropbox/Dic/COBUILD5"))</span>
                                                                                <span style="color: #b22222;">;                            </span><span style="color: #b22222;">(ndeb ,(concat homedir "/Dropbox/Dic/LDOCE4"))))</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq lookup-use-bitmap nil)</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(setq ndeb-program-name "/usr/bin/eblook")</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">(when (eq window-system 'ns)</span>
                                                                                <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-program-name "/opt/local/bin/eblook")</span>
                                                                                <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-program-arguments '("-q" "-e" "euc-jp"))</span>
                                                                                <span style="color: #b22222;">;  </span><span style="color: #b22222;">(setq ndeb-process-coding-system 'utf-8)) ; utf-8-hfs</span>
</pre>
</div>
</div>
<div id="outline-container-sec-5-19-1" class="outline-4">
<h4 id="sec-5-19-1"><span class="section-number-4">5.19.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-5-19-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"&lt;f6&gt;"</span>) 'lookup-word)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-20" class="outline-3">
<h3 id="sec-5-20"><span class="section-number-3">5.20</span> [cacoo] Cacoo で描く</h3>
<div class="outline-text-3" id="text-5-20">
<p>
画像をリサイズしてバッファに表示する用途にも使える．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'toggle-cacoo-minor-mode <span style="color: #8b2252;">"cacoo"</span> nil t)
  (global-set-key (kbd <span style="color: #8b2252;">"M--"</span>) 'toggle-cacoo-minor-mode)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"cacoo"</span>
    '(<span style="color: #a020f0;">progn</span>
       (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cacoo-plugins</span>))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(toggle-cacoo-minor-mode) <span style="color: #8b2252;">"cacoo"</span> nil t nil
           '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">cacoo-plugins</span>)))

  (global-set-key (kbd <span style="color: #8b2252;">"M--"</span>) 'toggle-cacoo-minor-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-21" class="outline-3">
<h3 id="sec-5-21"><span class="section-number-3">5.21</span> [iedit] バッファ内の同じ文字列を一度に編集する</h3>
<div class="outline-text-3" id="text-5-21">
<p>
<a href="http://emacswiki.org/emacs/iedit.el">iedit.el</a> を使うと，バッファ内の同じ文字列を一度に編集することができる．部分重複のない変数名を置き換えるときに有用な場合がある．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">iedit</span> nil t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-22" class="outline-3">
<h3 id="sec-5-22"><span class="section-number-3">5.22</span> [web-mode] HTML編集</h3>
<div class="outline-text-3" id="text-5-22">
<p>
HTML編集をするなら <a href="http://web-mode.org/">web-mode</a> がお勧めです．古いHTMLモードを使っている方は，移行時期です．以下の <code>my-web-indent-fold</code> では， タブキーを打つたびにタグでくくられた領域を展開／非表示して整形します．Org-mode っぽい動作になりますが，操作の度にバッファに変更が加わったと判断されるので好みが分かれると思います．自動保存を有効にしているとそれほど気になりません．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(web-mode) <span style="color: #8b2252;">"web-mode"</span> <span style="color: #8b2252;">"web-mode"</span> t nil
 '((<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-web-indent-fold</span> ()
         (interactive)
         (web-mode-fold-or-unfold)
         (web-mode-buffer-indent)
         (indent-for-tab-command))
   (define-key web-mode-map (kbd <span style="color: #8b2252;">"&lt;tab&gt;"</span>) 'my-web-indent-fold)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">web-mode &#12391;&#38283;&#12367;&#12501;&#12449;&#12452;&#12523;&#12398;&#25313;&#24373;&#23376;&#12434;&#25351;&#23450;</span>
(setq auto-mode-alist
          (append '((<span style="color: #8b2252;">"\\.phtml\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.tpl\\.php\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.jsp\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.as[cp]x\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.erb\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.mustache\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.djhtml\\'"</span> . web-mode)
                                (<span style="color: #8b2252;">"\\.html?\\'"</span> . web-mode))
                          auto-mode-alist))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#33394;&#12398;&#35373;&#23450;</span>
(custom-set-faces
 <span style="color: #b22222;">;; </span><span style="color: #b22222;">custom-set-faces was added by Custom.</span>
 <span style="color: #b22222;">;; </span><span style="color: #b22222;">If you edit it by hand, you could mess it up, so be careful.</span>
 <span style="color: #b22222;">;; </span><span style="color: #b22222;">Your init file should contain only one such instance.</span>
 <span style="color: #b22222;">;; </span><span style="color: #b22222;">If there is more than one, they won't work right.</span>
 '(web-mode-comment-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#D9333F"</span>))))
 '(web-mode-css-at-rule-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF7F00"</span>))))
 '(web-mode-css-pseudo-class-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF7F00"</span>))))
 '(web-mode-css-rule-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#A0D8EF"</span>))))
 '(web-mode-doctype-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#82AE46"</span>))))
 '(web-mode-html-attr-name-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#C97586"</span>))))
 '(web-mode-html-attr-value-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#82AE46"</span>))))
 '(web-mode-html-tag-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"##4682ae"</span> <span style="color: #483d8b;">:weight</span> bold))))
 '(web-mode-server-comment-face ((t (<span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#D9333F"</span>)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-23" class="outline-3">
<h3 id="sec-5-23"><span class="section-number-3">5.23</span> [zencoding-mode] HTML編集の高速化</h3>
<div class="outline-text-3" id="text-5-23">
<p>
zencoding でタグ打ちを効率化します．
</p>

<ul class="org-ul">
<li><a href="http://www.emacswiki.org/emacs/ZenCoding">http://www.emacswiki.org/emacs/ZenCoding</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'sgml-mode-hook 'zencoding-mode)
(add-hook 'html-mode-hook 'zencoding-mode)
(add-hook 'web-mode-hook 'zencoding-mode)
(eval-after-autoload-if-found
 '(zencoding-mode zencoding-expand-line) <span style="color: #8b2252;">"zencoding-mode"</span> <span style="color: #8b2252;">"Zen-coding"</span> t nil
 '((define-key zencoding-mode-keymap (kbd <span style="color: #8b2252;">"M-&lt;return&gt;"</span>) 'zencoding-expand-line)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 表示サポート</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> モードラインのモード名を短くする</h3>
<div class="outline-text-3" id="text-6-1">
<p>
自作した <code>mode-name-abbrev.el</code> を使っています．不具合も多いので非公開 ;-)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">mode-name-abbrev</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> モードラインのNarrowを短くする</h3>
<div class="outline-text-3" id="text-6-2">
<p>
標準では「Narrow」と表示されますが，「N」に短縮します．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-narrow-display</span> <span style="color: #8b2252;">" N"</span>)
(setq mode-line-modes
          (mapcar (<span style="color: #a020f0;">lambda</span> (entry)
                                (<span style="color: #a020f0;">if</span> (and (stringp entry)
                                                 (string= entry <span style="color: #8b2252;">"%n"</span>))
                                        '(<span style="color: #483d8b;">:eval</span> (<span style="color: #a020f0;">if</span> (and (= 1 (point-min))
                                                                 (= (1+ (buffer-size)) (point-max))) <span style="color: #8b2252;">""</span>
                                                  my-narrow-display)) entry))
                          mode-line-modes))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> モードラインの色をカスタマイズする</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-face-attribute 'mode-line nil <span style="color: #483d8b;">:overline</span> <span style="color: #8b2252;">"#203e6f"</span> <span style="color: #483d8b;">:box</span> nil)
(set-face-foreground 'mode-line <span style="color: #8b2252;">"#203e6f"</span>)
(set-face-background 'mode-line <span style="color: #8b2252;">"#b2cefb"</span>)
(set-face-attribute 'mode-line-inactive nil <span style="color: #483d8b;">:overline</span> <span style="color: #8b2252;">"#94bbf9"</span> <span style="color: #483d8b;">:box</span> nil)
(set-face-foreground 'mode-line-inactive  <span style="color: #8b2252;">"#94bbf9"</span>)
(set-face-background 'mode-line-inactive <span style="color: #8b2252;">"#d8e6fd"</span>)
</pre>
</div>
</div>

<div id="outline-container-sec-6-3-1" class="outline-4">
<h4 id="sec-6-3-1"><span class="section-number-4">6.3.1</span> 色セット例</h4>
<div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li>青／白
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">background</td>
<td class="left">foreground</td>
<td class="left">overline</td>
</tr>

<tr>
<td class="left">active</td>
<td class="left">558BE2</td>
<td class="left">FFFFFF</td>
<td class="left">566f99</td>
</tr>

<tr>
<td class="left">inactive</td>
<td class="left">94bbf9</td>
<td class="left">EFEFEF</td>
<td class="left">a4bfea</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>青
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">background</td>
<td class="left">foreground</td>
<td class="left">overline</td>
</tr>

<tr>
<td class="left">active</td>
<td class="left">b2cefb</td>
<td class="left">203e6f</td>
<td class="left">203e6f</td>
</tr>

<tr>
<td class="left">inactive</td>
<td class="left">94bbf9</td>
<td class="left">94bbf9</td>
<td class="left">94bbf9</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>緑
</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">background</td>
<td class="left">foreground</td>
<td class="left">overline</td>
</tr>

<tr>
<td class="left">active</td>
<td class="left">b1fbd6</td>
<td class="left">206f47</td>
<td class="left">206f47</td>
</tr>

<tr>
<td class="left">inactive</td>
<td class="left">95f9c7</td>
<td class="left">95f9c7</td>
<td class="left">95f9c7</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> visible-bell のカスタマイズ</h3>
<div class="outline-text-3" id="text-6-4">
<p>
<a href="http://www.emacswiki.org/emacs/MilesBader">http://www.emacswiki.org/emacs/MilesBader</a> を参考にカスタマイズしている．
</p>

<p>
visibl-bell を使うと，操作ミスで発生するビープ音を，視覚的な表示に入れ替えられる．しかし，デフォルトではバッファ中央に黒い四角が表示されて少々鬱陶しいので，ミニバッファの点滅に変更する
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'echo-area-bell <span style="color: #8b2252;">"echo-area-bell"</span> nil t)
        (setq visible-bell t)
        (setq ring-bell-function 'echo-area-bell))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
   '(echo-area-bell) <span style="color: #8b2252;">"echo-area-bell"</span> nil t nil
   '((setq visible-bell t)
         (setq ring-bell-function 'echo-area-bell)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 常に <b>scratch</b> を表示して起動する</h3>
<div class="outline-text-3" id="text-6-5">
<p>
<code>session.el</code> や <code>desktop.el</code> を使っていても，いつも <code>*scratch*</code> バッファを表示する．そうじゃないと安心できない人向け．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Start Emacs with scratch buffer even though it call session.el/desktop.el</span>
(add-hook 'emacs-startup-hook '(<span style="color: #a020f0;">lambda</span> () (switch-to-buffer <span style="color: #8b2252;">"*scratch*"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> バッテリー情報をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show battery information on the mode line.</span>
(display-battery-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> スクロールバーを非表示にする</h3>
<div class="outline-text-3" id="text-6-7">
<p>
スクロールバーを非表示にするには，nil を指定します．
右側に表示したい場合は，'right とします．
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show scroll bar or not</span>
(set-scroll-bar-mode nil) <span style="color: #b22222;">; </span><span style="color: #b22222;">'right</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8"><span class="section-number-3">6.8</span> ツールバーを非表示にする</h3>
<div class="outline-text-3" id="text-6-8">
<p>
ツールバーは使わないので非表示にします．
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable to show the tool bar.</span>
(tool-bar-mode 0)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9"><span class="section-number-3">6.9</span> 起動時のスプラッシュ画面を表示しない</h3>
<div class="outline-text-3" id="text-6-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable to show the splash window at startup</span>
(setq inhibit-startup-screen t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10"><span class="section-number-3">6.10</span> カーソル行の行数をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show line number in the mode line.</span>
(line-number-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-11" class="outline-3">
<h3 id="sec-6-11"><span class="section-number-3">6.11</span> カーソル行の関数名をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-11">
<ul class="org-ul">
<li>emacs24.3 で重く感じるので外している．
</li>
</ul>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show function name in the mode line.</span>
(which-function-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-12" class="outline-3">
<h3 id="sec-6-12"><span class="section-number-3">6.12</span> 時刻をモードラインに表示する</h3>
<div class="outline-text-3" id="text-6-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show clock in in the mode line</span>
(display-time-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-13" class="outline-3">
<h3 id="sec-6-13"><span class="section-number-3">6.13</span> 対応するカッコをハイライトする</h3>
<div class="outline-text-3" id="text-6-13">
<p>
Built-in の paren.el が利用できる．拡張版として <a href="http://www.emacswiki.org/emacs/mic-paren.el">mic-paren.el</a> があり，現在はこれを利用している．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">mic-paren</span> nil t)
          (paren-activate)
          (setq paren-sexp-mode nil)
          (set-face-foreground 'paren-face-match <span style="color: #8b2252;">"#FFFFFF"</span>)
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">Deep blue: #6666CC, orange: #FFCC66</span>
          (set-face-background 'paren-face-match <span style="color: #8b2252;">"66CC66"</span>))
</pre>
</div>

<p>
paren.el の場合は以下の設定．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq show-paren-delay 0)
(show-paren-mode t)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq show-paren-style 'expression) ; &#12459;&#12483;&#12467;&#20869;&#12418;&#24375;&#35519;</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">(set-face-background 'show-paren-match-face "#5DA4ff") ; &#12459;&#12540;&#12477;&#12523;&#12424;&#12426;&#28611;&#12356;&#38738;</span>
(set-face-background 'show-paren-match-face <span style="color: #8b2252;">"#a634ff"</span>)
(set-face-foreground 'show-paren-match-face <span style="color: #8b2252;">"#FFFFFF"</span>)
(set-face-underline-p 'show-paren-match-face nil)
(setq show-paren-style 'parenthesis)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-14" class="outline-3">
<h3 id="sec-6-14"><span class="section-number-3">6.14</span> 全角スペースと行末タブ／半角スペースを強調表示する</h3>
<div class="outline-text-3" id="text-6-14">
<p>
<a href="http://ubulog.blogspot.jp/2007/09/emacs_09.html">http://ubulog.blogspot.jp/2007/09/emacs_09.html</a>
</p>

<p>
英語で原稿を書く時に全角スペースが入っているを苦労するので，強調表示して編集中でも気づくようにします．また，行末のタブや半角スペースも無駄なので，入り込まないように強調しています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12473;&#12506;&#12540;&#12473;</span>
  (<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my-face-b-1</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"gray"</span> <span style="color: #483d8b;">:bold</span> t <span style="color: #483d8b;">:underline</span> <span style="color: #8b2252;">"red"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12502;&#12384;&#12369;&#12398;&#34892;</span>
  (<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my-face-b-2</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"orange"</span> <span style="color: #483d8b;">:bold</span> t <span style="color: #483d8b;">:underline</span> <span style="color: #8b2252;">"red"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#21322;&#35282;&#12473;&#12506;&#12540;&#12473;</span>
  (<span style="color: #a020f0;">defface</span> <span style="color: #a0522d;">my-face-b-3</span> '((t (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"orange"</span>))) nil <span style="color: #483d8b;">:group</span> 'font-lock-highlighting-faces)
  (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-face-b-1</span> 'my-face-b-1)
  (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-face-b-2</span> 'my-face-b-2)
  (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-face-b-3</span> 'my-face-b-3)
  (<span style="color: #a020f0;">defadvice</span> <span style="color: #0000ff;">font-lock-mode</span> (before my-font-lock-mode ())
        (font-lock-add-keywords
         major-mode
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">"[\t]+$" &#34892;&#26411;&#12398;&#12479;&#12502;</span>
         '((<span style="color: #8b2252;">"</span><span style="color: #8b2252; background-color: #bebebe; font-weight: bold; text-decoration: underline;">&#12288;</span><span style="color: #8b2252;">"</span> 0 my-face-b-1 append)
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">("[ ]+$" 0 my-face-b-3 append)</span>
           (<span style="color: #8b2252;">"[\t]+$"</span> 0 my-face-b-2 append))))
  (ad-enable-advice 'font-lock-mode 'before 'my-font-lock-mode)
  (ad-activate 'font-lock-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-15" class="outline-3">
<h3 id="sec-6-15"><span class="section-number-3">6.15</span> [migemo.el] ローマ字入力で日本語を検索する</h3>
<div class="outline-text-3" id="text-6-15">
<p>
<a href="http://0xcc.net/migemo/#download">http://0xcc.net/migemo/#download</a>
</p>

<p>
以下は，<a href="http://www.kaoriya.net/software/cmigemo">cmigemo</a> を使う設定です．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (autoload-if-found 'migemo-init <span style="color: #8b2252;">"migemo"</span> nil t)
           (executable-find <span style="color: #8b2252;">"cmigemo"</span>))
  (add-hook 'isearch-mode-hook 'migemo-init)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"migemo"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq completion-ignore-case t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">case-independent</span>
       (setq migemo-command <span style="color: #8b2252;">"cmigemo"</span>)
       (setq migemo-options '(<span style="color: #8b2252;">"-q"</span> <span style="color: #8b2252;">"--emacs"</span> <span style="color: #8b2252;">"-i"</span> <span style="color: #8b2252;">"\a"</span>))
       (setq migemo-dictionary <span style="color: #8b2252;">"/usr/local/share/migemo/utf-8/migemo-dict"</span>)
       (setq migemo-user-dictionary nil)
       (setq migemo-regex-dictionary nil)
       (setq migemo-use-pattern-alist t)
       (setq migemo-use-frequent-pattern-alist t)
       (setq migemo-pattern-alist-length 1024)
       (setq migemo-coding-system 'utf-8-unix))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span>
        (eval-after-autoload-if-found
         '(migemo-init) <span style="color: #8b2252;">"migemo"</span> nil t nil
         '((setq completion-ignore-case t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">case-independent</span>
           (setq migemo-command <span style="color: #8b2252;">"cmigemo"</span>)
           (setq migemo-options '(<span style="color: #8b2252;">"-q"</span> <span style="color: #8b2252;">"--emacs"</span> <span style="color: #8b2252;">"-i"</span> <span style="color: #8b2252;">"\a"</span>))
           (setq migemo-dictionary <span style="color: #8b2252;">"/usr/local/share/migemo/utf-8/migemo-dict"</span>)
           (setq migemo-user-dictionary nil)
           (setq migemo-regex-dictionary nil)
           (setq migemo-use-pattern-alist t)
           (setq migemo-use-frequent-pattern-alist t)
           (setq migemo-pattern-alist-length 1024)
           (setq migemo-coding-system 'utf-8-unix)))

  (<span style="color: #a020f0;">when</span> (executable-find <span style="color: #8b2252;">"cmigemo"</span>)
        (add-hook 'isearch-mode-hook 'migemo-init)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-16" class="outline-3">
<h3 id="sec-6-16"><span class="section-number-3">6.16</span> [anything.el] 何でも絞り込みインターフェイス</h3>
<div class="outline-text-3" id="text-6-16">
<p>
<a href="http://svn.coderepos.org/share/lang/elisp/anything-c-moccur/trunk/anything-c-moccur.el">http://svn.coderepos.org/share/lang/elisp/anything-c-moccur/trunk/anything-c-moccur.el</a>
<a href="http://d.hatena.ne.jp/IMAKADO/20080724/1216882563">http://d.hatena.ne.jp/IMAKADO/20080724/1216882563</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(anything-other-buffer anything-complete
         anything-M-x anything-c-moccur-occur-by-moccur)
       <span style="color: #8b2252;">"anything-startup"</span> nil t)

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything</span> ()
    (interactive)
    (anything-other-buffer
     '(anything-c-source-recentf
       anything-c-source-file-name-history
       anything-c-source-buffers
       anything-c-source-emacs-commands
       anything-c-source-locate)
     <span style="color: #8b2252;">" *my-anything*"</span>))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything-buffer</span> ()
    (interactive)
    (anything-other-buffer
     '(anything-c-source-buffers)
     <span style="color: #8b2252;">" *my-anthing-buffer*"</span>))

  (<span style="color: #a020f0;">when</span> (eq window-system 'ns)
    (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything-spotlight</span> ()
      <span style="color: #8b2252;">"Spotlight search with anything.el"</span>
      (interactive)
      (anything-other-buffer
       '(anything-c-source-mac-spotlight)
       <span style="color: #8b2252;">" *anything-spotlight*"</span>)))

  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"anything-startup"</span>
    '(<span style="color: #a020f0;">progn</span>

       (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">anything-c-moccur</span> nil t)
       <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq moccur-split-word t)</span>
       <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq anything-c-locate-options `("locate" "-w"))</span>

       <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x install-elisp-from-emacswiki recentf-ext.el</span>
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.emacswiki.org/cgi-bin/wiki/download/recentf-ext.el</span>
       <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(autoload-if-found 'recentf-ext "recentf-ext" nil t)</span>
       (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">recentf-ext</span> nil t)

       (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">migemo</span> nil t)
         (setq moccur-use-migemo t))

       <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x anything-grep-by-name</span>
       (setq anything-grep-alist
             '((<span style="color: #8b2252;">"Org-files"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/"</span>))
               (<span style="color: #8b2252;">".emacs.d"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.el"</span> <span style="color: #8b2252;">"~/.emacs.d/"</span>))
               (<span style="color: #8b2252;">"ChangeLog"</span> (<span style="color: #8b2252;">"egrep -Hin %s ChangeLog"</span> <span style="color: #8b2252;">"~/"</span>))))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">("Spotlight" ("mdfind %s -onlyin ~/Dropbox/Documents/Library/" ""))))</span>

       (setq anything-candidate-number-limit 50) <span style="color: #b22222;">; </span><span style="color: #b22222;">50</span>
       (setq anything-input-idle-delay 0.1)      <span style="color: #b22222;">; </span><span style="color: #b22222;">0.1</span>
       (setq anything-idle-delay 0.5)            <span style="color: #b22222;">; </span><span style="color: #b22222;">0.5</span>
       (setq anything-quick-update nil))))       <span style="color: #b22222;">; </span><span style="color: #b22222;">nil</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(anything-other-buffer anything-complete anything-M-x anything-c-moccur-occur-by-moccur) <span style="color: #8b2252;">"anything-startup"</span> nil t nil
           '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">anything-c-moccur</span> nil t)
                 <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq moccur-split-word t)</span>
                 <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq anything-c-locate-options `("locate" "-w"))</span>

                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x install-elisp-from-emacswiki recentf-ext.el</span>
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.emacswiki.org/cgi-bin/wiki/download/recentf-ext.el</span>
                 <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(autoload-if-found 'recentf-ext "recentf-ext" nil t)</span>
                 (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">recentf-ext</span> nil t)

                 (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">migemo</span> nil t)
                   (setq moccur-use-migemo t))
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-x anything-grep-by-name</span>
                 (setq anything-grep-alist
                           '((<span style="color: #8b2252;">"Org-files"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/"</span>))
                                 (<span style="color: #8b2252;">".emacs.d"</span> (<span style="color: #8b2252;">"egrep -Hin %s *.el"</span> <span style="color: #8b2252;">"~/.emacs.d/"</span>))
                                 (<span style="color: #8b2252;">"ChangeLog"</span> (<span style="color: #8b2252;">"egrep -Hin %s ChangeLog"</span> <span style="color: #8b2252;">"~/"</span>))))))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">("Spotlight" ("mdfind %s -onlyin ~/Dropbox/Documents/Library/" ""))))</span>

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything</span> ()
        (interactive)
        (anything-other-buffer
         '(anything-c-source-recentf
           anything-c-source-file-name-history
           anything-c-source-buffers
           anything-c-source-emacs-commands
           anything-c-source-locate)
         <span style="color: #8b2252;">" *my-anything*"</span>))
  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything-buffer</span> ()
        (interactive)
        (anything-other-buffer
         '(anything-c-source-buffers)
         <span style="color: #8b2252;">" *my-anthing-buffer*"</span>))

  (<span style="color: #a020f0;">when</span> (eq window-system 'ns)
        (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-anything-spotlight</span> ()
          <span style="color: #8b2252;">"Spotlight search with anything.el"</span>
          (interactive)
          (anything-other-buffer
           '(anything-c-source-mac-spotlight)
           <span style="color: #8b2252;">" *anything-spotlight*"</span>)))

  (setq anything-candidate-number-limit 50) <span style="color: #b22222;">; </span><span style="color: #b22222;">50</span>
  (setq anything-input-idle-delay 0.1)      <span style="color: #b22222;">; </span><span style="color: #b22222;">0.1</span>
  (setq anything-idle-delay 0.5)            <span style="color: #b22222;">; </span><span style="color: #b22222;">0.5</span>
  (setq anything-quick-update nil))        <span style="color: #b22222;">; </span><span style="color: #b22222;">nil</span>
</pre>
</div>
</div>

<div id="outline-container-sec-6-16-1" class="outline-4">
<h4 id="sec-6-16-1"><span class="section-number-4">6.16.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-6-16-1">
<p>
普通に anything-startup を呼んでいる場合には，anything-M-xを設定する必要はない．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Show ibuffer powered by anything</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-x"</span>) 'anything-M-x)
(global-set-key (kbd <span style="color: #8b2252;">"C-c o"</span>) 'anything-c-moccur-occur-by-moccur)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-r"</span>) 'my-anything)
(global-set-key (kbd <span style="color: #8b2252;">"C-M-s"</span>) 'my-anything-spotlight)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-b"</span>) 'my-anything-buffer)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> メディアサポート</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> [bongo.el] Emacsのバッファで音楽ライブラリを管理する</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs">iTunes の代わりに Emacs を使う</a>
</p>

<p>
autoload を設定すると， <code>*.bango-playlist</code> や <code>*.bongo-library</code> から起動できないので，明示的に require している．なお，bongo-mplayer を使う場合，bongo を先にrequireするとうまく動作しない（bongo.el の最後で，bongo-mplayer が provide されているからだと思われる）．
</p>

<p>
以下の設定では，autoload で使いつつ，=M-x init-bongo= でプレイリストを読み込んでいる．これならば，Emacs起動時は軽量で，かつ，プレイリストの訪問で Bongo を開始できる．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">    <span style="color: #b22222;">;;  </span><span style="color: #b22222;">(require 'bongo)</span>
  (<span style="color: #a020f0;">when</span> (autoload-if-found 'bongo <span style="color: #8b2252;">"bongo-mplayer"</span> nil t)
    (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-bongo</span> ()
      (interactive)
      (bongo)
      (find-file <span style="color: #8b2252;">"~/Desktop/next/Tidy/hoge.bongo-playlist"</span>))
    (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"bongo-mplayer"</span>
      '(<span style="color: #a020f0;">progn</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Volume control</span>
<span style="color: #b22222;">;         </span><span style="color: #b22222;">(require volume.el nil t)</span>
         (setq bongo-mplayer-extra-arguments '(<span style="color: #8b2252;">"-volume"</span> <span style="color: #8b2252;">"1"</span>))
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid error when editing bongo buffers</span>
         (setq yank-excluded-properties nil)
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Use mplayer</span>
         (setq bongo-enabled-backends '(mplayer)))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(bongo) <span style="color: #8b2252;">"bongo-mplayer"</span> nil t nil
           '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">Volume control</span>
                 <span style="color: #b22222;">;;         </span><span style="color: #b22222;">(require volume.el nil t)</span>
                 (setq bongo-mplayer-extra-arguments '(<span style="color: #8b2252;">"-volume"</span> <span style="color: #8b2252;">"1"</span>))
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">Avoid error when editing bongo buffers</span>
                 (setq yank-excluded-properties nil)
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">Use mplayer</span>
                 (setq bongo-enabled-backends '(mplayer))))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-bongo</span> ()
        (interactive)
        (bongo)
        (find-file <span style="color: #8b2252;">"~/Desktop/next/Tidy/hoge.bongo-playlist"</span>)))
</pre>
</div>

<p>
org-player.el を使えば，org-mode のバッファから Bongo を操作できる．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 'org-mode <span style="color: #8b2252;">"org-player"</span> nil t)
</pre>
</div>

<p>
音量コントロールには，<a href="https://github.com/dbrock/volume-el">volume.el</a>が必要です．設定がうまくいかないので保留中
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(autoload 'volume <span style="color: #8b2252;">"volume"</span> <span style="color: #8b2252;">"Tweak your sound card volume."</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> [GoogleMaps.el] GoogleMaps を Emacs 内で使う</h3>
<div class="outline-text-3" id="text-7-2">
<p>
<a href="http://julien.danjou.info/software/google-maps.el">http://julien.danjou.info/software/google-maps.el</a>
</p>

<p>
<code>M-x gogole-maps</code> で起動します．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">google-maps</span> nil t)
(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-location-google-maps</span> nil t)
</pre>
</div>

<p>
<code>+/-</code> でズーム， <code>矢印</code> で移動， <code>q</code> で終了します．また， <code>w</code> でURLを取得してコピー， <code>t</code> で地図の種別を変更できます．
</p>

<p>
Org-mode を使っている場合には， <code>C-c M-L</code> で表示されるプロンプトで検索すると，プロパティにそのキーワードが記録されます．後から <code>C-c M-l</code> すれば，いつでも地図を表示できるようになります．
</p>
</div>
</div>
<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> [org-google-weather.el] org-agenda に天気を表示する</h3>
<div class="outline-text-3" id="text-7-3">
<p>
<a href="http://julien.danjou.info/software/google-weather.el">http://julien.danjou.info/software/google-weather.el</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">google-weather</span> nil t)
(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-google-weather</span> nil t)
 '(org-google-weather-use-google-icons t))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> 履歴／ファイル管理</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Undoバッファを無限に取る</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq undo-outer-limit nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> バッファ保存時にバックアップファイルを生成する</h3>
<div class="outline-text-3" id="text-8-2">
<p>
バッファが保存されるとき，必ずバックアップを生成する．
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Backup the buffer whenever the buffer is saved</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-s"</span>)
                                '(<span style="color: #a020f0;">lambda</span> () (interactive) (save-buffer 16)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> ミニバッファの履歴を保存しリストアする</h3>
<div class="outline-text-3" id="text-8-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(savehist-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> 履歴サイズを大きくする</h3>
<div class="outline-text-3" id="text-8-4">
<p>
tで無限大に指定する．
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq history-length 1000)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> Emacs終了時に開いていたバッファを起動時に復元する</h3>
<div class="outline-text-3" id="text-8-5">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/DeskTop">desktop.el</a> を使う．
</p>

<p>
org バッファを CONTENT view で大量に開いていると，再起動が非常に遅くなるので利用を中止した．代替手段として，session.el と recentf の組み合わせがある．最近利用したファイルとそのカーソル位置が保持されるため，最後に訪問していたファイルを比較的簡単に復元できる．頻繁に復元するバッファには，別途キーバインドを割り当てておけば問題ない．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found
       '(desktop-save desktop-clear desktop-load-default desktop-remove)
       <span style="color: #8b2252;">"desktop"</span> nil t)
  (desktop-save-mode 1)
  (setq desktop-files-not-to-save <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">^/tmp</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/var</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/ssh:</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(desktop-save desktop-clear desktop-load-default desktop-remove)
 <span style="color: #8b2252;">"desktop"</span> nil t nil
 '((desktop-save-mode 1)
   (setq desktop-files-not-to-save <span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">^/tmp</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/var</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">^/ssh:</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6"><span class="section-number-3">8.6</span> 最近開いたファイルリストを保持</h3>
<div class="outline-text-3" id="text-8-6">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/RecentFiles">recentf.el</a> を使う．
</p>

<p>
<a href="http://d.hatena.ne.jp/tomoya/20110217/1297928222">http://d.hatena.ne.jp/tomoya/20110217/1297928222</a>
</p>

<p>
session.el でも履歴管理できるが，anything のソースとして使っているので併用している．
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．
</p>

<p>
recentf-auto-cleanup を ='mode= にすると起動時にファイルのクリーニングが行われるてしまうので，='never= で回避し，アイドルタイマーで対応する．これだけで50[ms]ほど起動を高速化できる．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'recentf-mode)
(<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"recentf"</span>
  '(<span style="color: #a020f0;">progn</span>
         (setq recentf-max-saved-items 2000)
         (setq recentf-save-file
                   (expand-file-name <span style="color: #8b2252;">"~/.emacs.d/.recentf"</span>))
         (setq recentf-auto-cleanup 'never) <span style="color: #b22222;">; </span><span style="color: #b22222;">default = 'mode</span>
         (run-with-idle-timer 300 t 'recentf-save-list)
         (run-with-idle-timer 600 t 'recentf-cleanup)
         (setq recentf-exclude
                   '(<span style="color: #8b2252;">"^/tmp\\.*"</span> <span style="color: #8b2252;">"^/private\\.*"</span> <span style="color: #8b2252;">"^/var/folders\\.*"</span> <span style="color: #8b2252;">"/TAGS$"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7"><span class="section-number-3">8.7</span> 深夜にバッファを自動整理する</h3>
<div class="outline-text-3" id="text-8-7">
<p>
<a href="http://www.emacswiki.org/emacs-zh/CleanBufferList">http://www.emacswiki.org/emacs-zh/CleanBufferList</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">midnight</span> nil t)
  (setq clean-buffer-list-buffer-names
                (append clean-buffer-list-kill-buffer-names
                                '(<span style="color: #8b2252;">"note.txt"</span>)))
  (setq clean-buffer-list-delay-general 1)
  (setq clean-buffer-list-delay-special 10))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8"><span class="section-number-3">8.8</span> [auto-save-buffers.el] 一定間隔でバッファを保存する</h3>
<div class="outline-text-3" id="text-8-8">
<p>
<a href="http://0xcc.net/misc/auto-save/">http://0xcc.net/misc/auto-save/</a>
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-save-buffers</span> nil t)
  (run-with-idle-timer 1.5 t 'auto-save-buffers))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-9" class="outline-3">
<h3 id="sec-8-9"><span class="section-number-3">8.9</span> [backup-dir.el] バックアップファイルを一箇所に集める</h3>
<div class="outline-text-3" id="text-8-9">
<p>
<a href="http://www.emacswiki.org/emacs/BackupDirectory">http://www.emacswiki.org/emacs/BackupDirectory</a>
<a href="http://www.northbound-train.com/emacs-hosted/backup-dir.el">http://www.northbound-train.com/emacs-hosted/backup-dir.el</a>
<a href="http://www.northbound-train.com/emacs.html">http://www.northbound-train.com/emacs.html</a>
</p>

<p>
起動直後から有効にするので，autolad-if-load で括る必要はない．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(make-variable-buffer-local 'backup-inhibited)
(setq backup-files-store-dir <span style="color: #8b2252;">"~/env/emacs_backup"</span>)
(<span style="color: #a020f0;">unless</span> (file-directory-p backup-files-store-dir) 
  (message <span style="color: #8b2252;">"!!! %s does not exist. !!!"</span> backup-files-store-dir)
  (sleep-for 1))
(<span style="color: #a020f0;">when</span> (and (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">backup-dir</span> nil t)
                   (file-directory-p backup-files-store-dir))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">backup path</span>
  (setq bkup-backup-directory-info '((t <span style="color: #8b2252;">"~/env/emacs_backup"</span> ok-create)))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">for tramp</span>
  (setq tramp-bkup-backup-directory-info bkup-backup-directory-info)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">generation properties</span>
  (setq delete-old-versions t
                kept-old-versions 0
                kept-new-versions 5
                version-control t))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-10" class="outline-3">
<h3 id="sec-8-10"><span class="section-number-3">8.10</span> [session.el] 様々な履歴を保存し復元に利用する</h3>
<div class="outline-text-3" id="text-8-10">
<p>
<a href="http://emacs-session.sourceforge.net/">http://emacs-session.sourceforge.net/</a>
</p>

<ul class="org-ul">
<li>入力履歴の保持（検索語，表示したバッファ履歴）
</li>
<li>保存時のカーソル位置の保持
</li>
<li>キルリングの保持
</li>
<li>変更が加えられたファイル履歴の保持
</li>
</ul>

<p>
M-x session-save-session
</p>

<p>
session-undo-check を指定していると，保存時ではなくバッファを閉じるときの状態を保持する．
</p>

<p>
Org-mode と併用する場合は，my-org-reveal-session-jump の設定が必須．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'session-initialize <span style="color: #8b2252;">"session"</span> nil t)
  (add-hook 'after-init-hook 'session-initialize)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"session"</span>
    '(<span style="color: #a020f0;">progn</span>
       (add-to-list 'session-globals-exclude 'org-mark-ring)
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">Change save point of session.el</span>
       (setq session-save-file (expand-file-name <span style="color: #8b2252;">"~/Dropbox/.session"</span>))
       (setq session-initialize '(de-saveplace session keys menus places)
             session-globals-include '((kill-ring 100)
                                       (session-file-alist 100 t)
                                       (file-name-history 200)
                                       search-ring regexp-search-ring))
       (setq session-undo-check -1))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">FIXME</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq session-set-file-name-exclude-regexp</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">"^/private/\\.\\*"))</span>
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">"[/\\]\\.overview\\|[/\\]\\.session\\|News[/\\]\\|^/private\\.*\\|^/var/folders\\.*"))</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           'session-initialize <span style="color: #8b2252;">"session"</span> nil t nil
           '((add-to-list 'session-globals-exclude 'org-mark-ring)
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">Change save point of session.el</span>
                 (setq session-save-file (expand-file-name <span style="color: #8b2252;">"~/Dropbox/.session"</span>))
                 (setq session-initialize '(de-saveplace session keys menus places)
                           session-globals-include '((kill-ring 100)
                                                                                 (session-file-alist 100 t)
                                                                                 (file-name-history 200)
                                                                                 search-ring regexp-search-ring))
                 (setq session-undo-check -1)))

  (add-hook 'after-init-hook 'session-initialize))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">FIXME</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq session-set-file-name-exclude-regexp</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">"^/private/\\.\\*"))</span>
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">"[/\\]\\.overview\\|[/\\]\\.session\\|News[/\\]\\|^/private\\.*\\|^/var/folders\\.*"))</span>
</pre>
</div>

<p>
次はテスト中．orgバッファを開いたらカーソル位置をorg-revealしたいが，time-stampなどと組み合わせたり，org-tree-slideと組み合わせていると，うまくいかない．バッファを表示した時に org-reveal (C-c C-r) を打つのをサボりたいだけなのだが．．．
</p>

<p>
<a href="http://www.emacswiki.org/emacs/EmacsSession">http://www.emacswiki.org/emacs/EmacsSession</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'session-initialize <span style="color: #8b2252;">"session"</span> nil t)
  (add-hook 'after-init-hook 'session-initialize)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"session"</span>
        '(<span style="color: #a020f0;">progn</span>
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">For Org-mode</span>
           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-maybe-reveal</span> ()
                 (interactive)
                 (<span style="color: #a020f0;">when</span> (and (or (memq major-mode '(org-mode outline-mode))
                                                (and (boundp 'outline-minor-mominor-de)
                                                         outline-minor-mode))
                                        (outline-invisible-p))
                   (<span style="color: #a020f0;">if</span> (eq major-mode 'org-mode)
                           (org-reveal)
                         (show-subtree))))

           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-org-reveal-session-jump</span> ()
                 (message <span style="color: #8b2252;">"call!"</span>)
                 (<span style="color: #a020f0;">when</span> (and (eq major-mode 'org-mode)
                                        (outline-invisible-p))
                   (org-reveal)))

           <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-x C-/</span>
           (add-hook 'session-after-jump-to-last-change-hook
                                 'my-maybe-reveal))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-11" class="outline-3">
<h3 id="sec-8-11"><span class="section-number-3">8.11</span> [wakatime-mode.el] WakaTime を利用して作業記録する</h3>
<div class="outline-text-3" id="text-8-11">
<ol class="org-ol">
<li><a href="https://www.wakati.me/">https://www.wakati.me/</a>（API発行とログGUI表示）
</li>
<li><a href="https://github.com/wakatime/wakatime">https://github.com/wakatime/wakatime</a>（ログ記録用スクリプト）
</li>
<li><a href="https://github.com/nyuhuhuu/wakatime-mode">https://github.com/nyuhuhuu/wakatime-mode</a>（Emacs用プラグイン）
</li>
</ol>

<p>
利用開始前に，ログ表示サイトでルールをカスタマイズしておくとよい．例えば，拡張子が <code>.org</code> なファイルの場合，言語設定を <code>Text</code> にする，という具合に．すると，グラフ表示がわかりやすくなる．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">wakatime-mode</span> nil t)
    (setq wakatime-api-key <span style="color: #8b2252;">"&lt;insert your own api key&gt;"</span>)
    (setq wakatime-cli-path <span style="color: #8b2252;">"/Users/taka/Dropbox/emacs.d/bin/wakatime-cli.py"</span>)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12377;&#12409;&#12390;&#12398;&#12496;&#12483;&#12501;&#12449;&#12391;&#35370;&#21839;&#26178;&#12395;&#35352;&#37682;&#12434;&#38283;&#22987;</span>
<span style="color: #b22222;">;    </span><span style="color: #b22222;">(global-wakatime-mode)</span>
    )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 開発サポート</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> 便利キーバインド</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-;"</span>) 'comment-dwim) <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-; is the defualt</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-c c"</span>) 'compile)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> [gist.el] Gist インターフェイス</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found '(gist) <span style="color: #8b2252;">"gist"</span> nil t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> [doxymacs.el] Doxygen のコメントを簡単に入力する</h3>
<div class="outline-text-3" id="text-9-3">
<p>
<a href="http://doxymacs.sourceforge.net/">http://doxymacs.sourceforge.net/</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'doxymacs-mode <span style="color: #8b2252;">"doxymacs"</span> nil t)
  (add-hook 'c-mode-common-hook 'doxymacs-mode)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"doxymacs"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq doxymacs-doxygen-style <span style="color: #8b2252;">"JavaDoc"</span>)
       (add-hook 'font-lock-mode-hook
                 '(<span style="color: #a020f0;">lambda</span> () (interactive)
                    (<span style="color: #a020f0;">when</span> (or (eq major-mode 'c-mode) (eq major-mode 'c++-mode))
                      (doxymacs-font-lock))))
       (define-key doxymacs-mode-map (kbd <span style="color: #8b2252;">"C-c C-s"</span>) 'ff-find-other-file))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           'doxymacs-mode <span style="color: #8b2252;">"doxymacs"</span> nil t nil
           '((setq doxymacs-doxygen-style <span style="color: #8b2252;">"JavaDoc"</span>)
                 (add-hook 'font-lock-mode-hook
                                   '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                          (<span style="color: #a020f0;">when</span> (or (eq major-mode 'c-mode)
                                                                (eq major-mode 'c++-mode))
                                                (doxymacs-font-lock))))
                 (define-key doxymacs-mode-map (kbd <span style="color: #8b2252;">"C-c C-s"</span>) 'ff-find-other-file)))
  (add-hook 'c-mode-common-hook 'doxymacs-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> [matlab.el] Matlab用の設定</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (= emacs-major-version 23))
  (autoload 'matlab-mode <span style="color: #8b2252;">"matlab"</span> <span style="color: #8b2252;">"Enter Matlab mode."</span> t)
  (setq auto-mode-alist (cons '(<span style="color: #8b2252;">"\\.m\\'"</span> . matlab-mode) auto-mode-alist))
  (autoload 'matlab-shell <span style="color: #8b2252;">"matlab"</span> <span style="color: #8b2252;">"Interactive Matlab mode."</span> t))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> [auto-complete.el] 自動補完機能</h3>
<div class="outline-text-3" id="text-9-5">
<p>
<a href="http://cx4a.org/software/auto-complete/manual.ja.html">http://cx4a.org/software/auto-complete/manual.ja.html</a>
</p>

<ul class="org-ul">
<li>辞書データを使う（ <code>ac-dictionary-directories</code> ）
</li>
<li>auto-complete.el, auto-complete-config.el, fuzzy.el, popup.el を使う．
</li>
<li><a href="http://cx4a.org/software/auto-complete/manual.ja.html">日本語マニュアル</a>
</li>
<li>ac-auto-start を 4 にしておけば，3文字までは TAB を yasnippet に渡せる．
</li>
</ul>

<p>
Org-mode ユーザにとって <code>TAB</code> は非常に重要なコマンド．そこに <code>auto-complete</code> と <code>yasnippet</code> が <code>TAB</code> を奪いに来るので，住み分けが重要になる．=ac-auto-start= を=4=にすると，&lt;s=TAB= によるソースブロックの短縮入力を <code>yasnippet</code> で実行できる（この目的だけならば=3=を指定してもいい）．&lt;sys などと4文字入力すると，=auto-complete= が動いて &lt;system&gt; などを補完してくれる．もちろん，見出しで <code>TAB</code> を押すときには，ツリーの表示／非表示の切り替えになる．
</p>

<p>
情報源については，<a href="http://cx4a.org/software/auto-complete/manual.ja.html#.E6.A8.99.E6.BA.96.E6.83.85.E5.A0.B1.E6.BA.90">オンラインマニュアル</a>を参照のこと．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">                (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-complete-config</span> nil t)
                  (ac-config-default)
                  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-org-mode-setup</span> ()
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(message " &gt;&gt; ac-org-mode-setup")</span>
                        (setq ac-sources '(
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-abbrev ; Emacs &#12398;&#30053;&#35486;</span>
                <span style="color: #b22222;">;;;                         </span><span style="color: #b22222;">ac-source-css-property ; heavy</span>
                                                           ac-source-dictionary <span style="color: #b22222;">; </span><span style="color: #b22222;">&#36766;&#26360;</span>
                                                           ac-source-features
                                                           ac-source-filename
                                                           ac-source-files-in-current-dir
                                                           ac-source-functions
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-gtags</span>
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-imenu </span>
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-semantic</span>
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-symbols </span>
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-variables</span>
  <span style="color: #b22222;">;;                             </span><span style="color: #b22222;">ac-source-yasnippet</span>
                                                           )))
                  (add-hook 'org-mode-hook 'ac-org-mode-setup)
                  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-default-setup</span> ()
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(message " &gt;&gt; ac-default-setup")</span>
                        (setq ac-sources '(ac-source-abbrev
                                                           ac-source-dictionary
                                                           ac-source-words-in-same-mode-buffers)))
          <span style="color: #b22222;">;      </span><span style="color: #b22222;">(setq ac-sources (append '(ac-source-abbrev</span>
          <span style="color: #b22222;">;                                 </span><span style="color: #b22222;">ac-source-dictionary</span>
          <span style="color: #b22222;">;                                 </span><span style="color: #b22222;">ac-source-words-in-same-mode-buffers)</span>
          <span style="color: #b22222;">;                               </span><span style="color: #b22222;">ac-sources)))</span>
                  (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'objc-mode-hook))
                        (add-hook hook 'ac-default-setup))
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">*scratch* &#12496;&#12483;&#12501;&#12449;&#12391;&#12399;&#28961;&#21177;&#21270;</span>
                  (add-hook 'lisp-mode-hook
                                        '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal <span style="color: #8b2252;">"*scratch*"</span> (buffer-name))
                                                                  (ac-default-setup))))
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">ac-modes &#12395;&#12354;&#12427;&#12513;&#12472;&#12515;&#12540;&#12514;&#12540;&#12489;&#12391;&#26377;&#21177;&#12395;&#12377;&#12427;</span>
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">lisp, c, c++, java, perl, cperl, python, makefile, sh, fortran, f90</span>
                  (global-auto-complete-mode t)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#36861;&#21152;&#12398;&#12513;&#12472;&#12515;&#12540;&#12514;&#12540;&#12489;&#12434;&#35373;&#23450;</span>
                  (add-to-list 'ac-modes 'objc-mode)
                  (add-to-list 'ac-modes 'org-mode)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#36766;&#26360;</span>
                  (add-to-list 'ac-dictionary-directories (concat default-path <span style="color: #8b2252;">"ac-dict"</span>))
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">n&#25991;&#23383;&#20197;&#19978;&#12391;&#35036;&#23436;&#34920;&#31034;&#12377;&#12427;&#65288;"&lt;s TAB" &#12398;&#22580;&#21512; yasnippet &#12364;&#21628;&#12400;&#12428;&#12427;&#65289;</span>
                  (setq ac-auto-start 4)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">n&#31186;&#24460;&#12395;&#12513;&#12491;&#12517;&#12540;&#12434;&#34920;&#31034;</span>
                  (setq ac-auto-show-menu 1.0)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12484;&#12540;&#12523;&#12481;&#12483;&#12503;&#12398;&#34920;&#31034;</span>
                  (setq ac-use-quick-help t)
                  (setq ac-quick-help-delay 2.0)
                  (setq ac-quick-help-height 10)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-n/C-p &#12391;&#12513;&#12491;&#12517;&#12540;&#12434;&#12383;&#12393;&#12427;</span>
                  (setq ac-use-menu-map t)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">TAB &#12391;&#35036;&#23436;&#65288;org-mode &#12391;&#12418;&#21177;&#12367;&#12424;&#12358;&#12395;&#12377;&#12427;&#65289;</span>
                  (define-key ac-completing-map [tab] 'ac-complete)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">RET &#12391;&#12398;&#35036;&#23436;&#12434;&#31105;&#27490;</span>
                  (define-key ac-completing-map <span style="color: #8b2252;">"\r"</span> nil)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#35036;&#23436;&#12513;&#12491;&#12517;&#12540;&#12398;&#34920;&#31034;&#31934;&#24230;&#12434;&#39640;&#12417;&#12427;</span>
                  (setq popup-use-optimized-column-computation nil))
                  <span style="color: #b22222;">;;</span><span style="color: #b22222;">(setq ac-candidate-max 10)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><span class="section-number-3">9.6</span> [auto-complete-clang.el] オムニ補完</h3>
<div class="outline-text-3" id="text-9-6">
<p>
C++バッファでメソッドを補完対象とする．try-catch を使っている場合， <code>-fcxx-exceptions</code> オプションが必要で，これはプリコンパイルヘッダを生成する時も同じだ．この設定では， <code>~/Dropbox/emacs.d/</code> 以下に <code>stdafx.pch</code> を生成する必要があるため，以下のコマンドを用いてプリコンパイルヘッダを生成する．ヘッダファイルのパスを適切に与えれば，Boostや自作のライブラリも補完対象に設定できる．
</p>

<p>
現状では，補完直後にデフォルトの引数がすべて書き込まれてしまう．なんかうまいことしたいものだ．
</p>

<div class="org-src-container">

<pre class="src src-sh">clang -cc1 -x c++-header -fcxx-exceptions ./stdafx.h -emit-pch -o ./stdafx.pch -I/opt/local/include -I/opt/local/include/netpbm
</pre>
</div>

<p>
以下の設定は，先に <code>auto-complete.el</code> に関する設定を読み込んでいることを前提としている．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">                (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">auto-complete-clang</span> nil t)
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">ac-cc-mode-setup &#12398;&#12458;&#12540;&#12496;&#12540;&#12521;&#12452;&#12489;</span>
                  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ac-cc-mode-setup</span> ()
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(message " &gt;&gt; Auto-complete-clang")</span>
                        <span style="color: #b22222;">;;      </span><span style="color: #b22222;">(setq ac-clang-prefix-header "stdafx.pch")</span>
<span style="color: #b22222;">;;            </span><span style="color: #b22222;">(setq ac-auto-start 0)</span>
                        (setq ac-clang-prefix-header <span style="color: #8b2252;">"~/.emacs.d/stdafx.pch"</span>)
                        (setq ac-clang-flags '(<span style="color: #8b2252;">"-w"</span> <span style="color: #8b2252;">"-ferror-limit"</span> <span style="color: #8b2252;">"1"</span>
                                                                   <span style="color: #8b2252;">"-fcxx-exceptions"</span>))
                        (setq ac-sources '(ac-source-clang
                                                           ac-source-yasnippet
                                                           ac-source-gtags))
                        )
                  (add-hook 'c-mode-common-hook 'ac-cc-mode-setup))
</pre>
</div>

<p>
次のコードを hoge.cpp として保存し， <code>v</code> と <code>t</code> について補完できれば， <code>STL</code> と <code>Boost</code> のプリコンパイルヘッダが有効になっていることを確認できる．
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;iostream&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;vector&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;boost/timer.hpp&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>(){
  <span style="color: #008b8b;">std</span>::<span style="color: #228b22;">vector</span>&lt;<span style="color: #228b22;">int</span>&gt; <span style="color: #a0522d;">v</span>;
  v; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#12371;&#12371;</span>
  <span style="color: #008b8b;">boost</span>::<span style="color: #228b22;">timer</span> <span style="color: #a0522d;">t</span>;
  cout &lt;&lt; t; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#12371;&#12371;</span>
  <span style="color: #a020f0;">return</span> 1;
}
</pre>
</div>
</div>
<div id="outline-container-sec-9-6-1" class="outline-4">
<h4 id="sec-9-6-1"><span class="section-number-4">9.6.1</span> 参考サイト</h4>
<div class="outline-text-4" id="text-9-6-1">
<ul class="org-ul">
<li><a href="http://d.hatena.ne.jp/kenbell1988/20120428/1335609313">http://d.hatena.ne.jp/kenbell1988/20120428/1335609313</a>
</li>
<li><a href="http://d.hatena.ne.jp/whitypig/20110306/1299416655">http://d.hatena.ne.jp/whitypig/20110306/1299416655</a>
</li>
<li><a href="http://d.hatena.ne.jp/yano-htn/?of=30">http://d.hatena.ne.jp/yano-htn/?of=30</a>
</li>
<li><a href="http://www.nomtats.com/2010/11/auto-completeelemacs.html">http://www.nomtats.com/2010/11/auto-completeelemacs.html</a>
</li>
<li><a href="http://www.plugmasters.com.br/plugfeed/post/73768/awesome-cc-autocompletion-in-emacs">http://www.plugmasters.com.br/plugfeed/post/73768/awesome-cc-autocompletion-in-emacs</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-9-7" class="outline-3">
<h3 id="sec-9-7"><span class="section-number-3">9.7</span> [hideshowvis.el] 関数の表示／非表示</h3>
<div class="outline-text-3" id="text-9-7">
<p>
<a href="http://www.emacswiki.org/emacs/hideshowvis.el">http://www.emacswiki.org/emacs/hideshowvis.el</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (= emacs-major-version 23))
  (autoload 'hideshowvis-enable <span style="color: #8b2252;">"hideshowvis"</span> <span style="color: #8b2252;">"Highlight foldable regions"</span>)
  (autoload 'hideshowvis-minor-mode <span style="color: #8b2252;">"hideshowvis"</span>
        <span style="color: #8b2252;">"Will indicate regions foldable with hideshow in the fringe."</span> 'interactive)
  (add-hook 'emacs-lisp-mode-hook
                        '(<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">unless</span> (equal <span style="color: #8b2252;">"*scratch*"</span> (buffer-name))
                                                  (hideshowvis-enable))))
  (<span style="color: #a020f0;">dolist</span> (hook (list 'perl-mode-hook 'c-mode-common-hook))
        (add-hook hook 'hideshowvis-enable)))
</pre>
</div>
</div>
<div id="outline-container-sec-9-7-1" class="outline-4">
<h4 id="sec-9-7-1"><span class="section-number-4">9.7.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-9-7-1">
<p>
Hide or show current block of souces
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-("</span>) 'hs-hide-block)
(global-set-key (kbd <span style="color: #8b2252;">"C-)"</span>) 'hs-show-block)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Org Mode</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> 基本設定</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(
<span style="color: #b22222;">;         </span><span style="color: #b22222;">(require 'org-install)</span>
   (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-extension</span> nil t)
   (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-habit</span>)
   (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-mobile</span>)

   (setq auto-mode-alist
                 (cons (cons <span style="color: #8b2252;">"\\.org$"</span> 'org-mode) auto-mode-alist))
   (push '(<span style="color: #8b2252;">"\\.txt\\'"</span> . org-mode) auto-mode-alist)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set checksum program path for windows</span>
   (<span style="color: #a020f0;">when</span> (eq window-system 'w32)
         (setq org-mobile-checksum-binary <span style="color: #8b2252;">"~/Dropbox/do/cksum.exe"</span>))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org &#12501;&#12449;&#12452;&#12523;&#12398;&#38598;&#20013;&#31649;&#29702;</span>
   (setq org-directory <span style="color: #8b2252;">"~/Dropbox/org/"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set default table export format</span>
   (setq org-table-export-default-format <span style="color: #8b2252;">"orgtbl-to-csv"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Toggle inline images display at startup</span>
   (setq org-startup-with-inline-images t)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">dvipng</span>
   (setq org-export-with-LaTeX-fragments t)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org&#12496;&#12483;&#12501;&#12449;&#20869;&#12398;&#20840;&#12390;&#12398;&#21205;&#30340;&#12502;&#12525;&#12483;&#12463;&#12434;&#20445;&#23384;&#30452;&#21069;&#12395;&#22793;&#26356;&#12377;&#12427;</span>
   (add-hook 'before-save-hook 'org-update-all-dblocks)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12540;&#12459;&#12452;&#12502;&#12501;&#12449;&#12452;&#12523;&#12398;&#21517;&#31216;&#12434;&#25351;&#23450;</span>
   (setq org-archive-location <span style="color: #8b2252;">"%s_archive::"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12512;&#12473;&#12479;&#12531;&#12503;&#12395;&#12424;&#12427;&#12525;&#12464;&#21454;&#38598;&#35373;&#23450;</span>
   (setq org-log-done t) <span style="color: #b22222;">; </span><span style="color: #b22222;">t &#12391;&#12399;&#12394;&#12367;&#65292;'(done), '(state) &#12434;&#25351;&#23450;&#12391;&#12365;&#12427;</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12525;&#12464;&#12434;&#12489;&#12525;&#12450;&#12540;&#12395;&#20837;&#12428;&#12427;</span>
   (setq org-log-into-drawer t)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12531;&#12480;&#12540;&#12473;&#12467;&#12450;&#12434;&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#12375;&#12394;&#12356;&#65288;_{}&#12391;&#26126;&#31034;&#30340;&#12395;&#34920;&#29694;&#12391;&#12365;&#12427;&#65289;</span>
   (setq org-export-with-sub-superscripts nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12510;&#12540;&#12398;&#38899;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(lsetq org-clock-sound "");</span>
  ))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> contribution を使う</h3>
<div class="outline-text-3" id="text-10-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq load-path (append '(<span style="color: #8b2252;">"~/devel/git/org-mode/contrib/lisp"</span>) load-path))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-3" class="outline-3">
<h3 id="sec-10-3"><span class="section-number-3">10.3</span> iCal との連携</h3>
<div class="outline-text-3" id="text-10-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">~/Dropbox/Public &#12399;&#31532;&#19977;&#32773;&#12395;&#25506;&#32034;&#12373;&#12428;&#12427;&#21487;&#33021;&#24615;&#12364;&#12354;&#12427;&#12398;&#12391;&#35201;&#27880;&#24847;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">default = ~/org.ics</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e i org-export-icalendar-this-file</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e I org-export-icalendar-all-agenda-files</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">C-c C-e c org-export-icalendar-all-combine-agenda-files</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-combined-agenda-icalendar-file "~/Dropbox/Public/orgAgenda.ics")</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">iCal &#12398;&#35500;&#26126;&#25991;</span>
   (setq org-icalendar-combined-description <span style="color: #8b2252;">"OrgMode&#12398;&#12473;&#12465;&#12472;&#12517;&#12540;&#12523;&#20986;&#21147;"</span>)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12459;&#12524;&#12531;&#12480;&#12540;&#12395;&#36969;&#20999;&#12394;&#12479;&#12452;&#12512;&#12478;&#12540;&#12531;&#12434;&#35373;&#23450;&#12377;&#12427;&#65288;google &#29992;&#12395;&#12399; nil &#12364;&#24517;&#35201;&#65289;</span>
   (setq org-icalendar-timezone <span style="color: #8b2252;">"Asia/Tokyo"</span>)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">DONE &#12395;&#12394;&#12387;&#12383; TODO &#12399;&#12450;&#12472;&#12455;&#12531;&#12480;&#12363;&#12425;&#38500;&#22806;&#12377;&#12427;</span>
   (setq org-icalendar-include-todo t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#65288;&#36890;&#24120;&#12399;&#65292;&lt;&gt;--&lt;&gt; &#12391;&#21306;&#38291;&#20184;&#12365;&#20104;&#23450;&#12434;&#12388;&#12367;&#12427;&#65294;&#38750;&#25913;&#34892;&#20837;&#21147;&#12391;&#26085;&#20184;&#12364;Note&#12395;&#20837;&#12425;&#12394;&#12356;&#65289;</span>
   (setq org-icalendar-use-scheduled '(event-if-todo))
  <span style="color: #b22222;">;;; </span><span style="color: #b22222;">DL &#20184;&#12365;&#12391;&#32066;&#26085;&#20104;&#23450;&#12395;&#12377;&#12427;&#65306;&#32224;&#12417;&#20999;&#12426;&#26085;&#65288;&#12473;&#12479;&#12531;&#12503;&#12391;&#26178;&#38291;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#12371;&#12392;&#65289;</span>
   <span style="color: #b22222;">;;         </span><span style="color: #b22222;">(setq org-icalendar-use-deadline '(event-if-todo event-if-not-todo))</span>
   (setq org-icalendar-use-deadline '(event-if-todo))
   (<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ox-icalendar</span> nil t)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-ox-icalendar</span> ()
           (interactive)
           (<span style="color: #a020f0;">with-current-buffer</span>
                   (find-file-noselect <span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span>)
                 (org-icalendar-export-to-ics)
   <span style="color: #b22222;">;;; </span><span style="color: #b22222;">&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#24460;&#12395;&#65292;AppleScript &#12391;&#26032;&#12375;&#12356;&#12459;&#12524;&#12531;&#12480;&#12540;&#12434;&#12522;&#12525;&#12540;&#12489;&#12373;&#12379;&#12427;</span>
   <span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-hook 'org-after-save-iCalendar-file-hook</span>
   <span style="color: #b22222;">;;         </span><span style="color: #b22222;">(lambda ()</span>
   <span style="color: #b22222;">;;           </span><span style="color: #b22222;">(shell-command</span>
   <span style="color: #b22222;">;;         </span><span style="color: #b22222;">"osascript -e 'tell application \"iCal\" to reload calendars'")))</span>
                 (<span style="color: #a020f0;">let</span> ((result
                                (shell-command
                                 <span style="color: #8b2252;">"scp -o ConnectTimeout=5 ~/Dropbox/org/org-ical.ics orz:~/public_html/ical"</span>)))
                   (<span style="color: #a020f0;">if</span> (eq result 0) (message <span style="color: #8b2252;">"Uploading ... [DONE]"</span>)
                         (message <span style="color: #8b2252;">"Uploading ... [MISS]"</span>))))))
   ))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-4" class="outline-3">
<h3 id="sec-10-4"><span class="section-number-3">10.4</span> スピードコマンド</h3>
<div class="outline-text-3" id="text-10-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-use-speed-commands t)
   (setq org-speed-commands-user
                 (quote ((<span style="color: #8b2252;">"n"</span> . show-next-org)
                                 (<span style="color: #8b2252;">"t"</span> . show-today-org))))
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">show-next-org</span> () (show-org-buffer <span style="color: #8b2252;">"next.org"</span>))
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">show-today-org</span> () (show-org-buffer <span style="color: #8b2252;">"today.org"</span>))
))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-5" class="outline-3">
<h3 id="sec-10-5"><span class="section-number-3">10.5</span> Pomodoro</h3>
<div class="outline-text-3" id="text-10-5">
<p>
<a href="http://orgmode.org/worg/org-gtd-etc.html">http://orgmode.org/worg/org-gtd-etc.html</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
          'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
          '(  
           (add-to-list 'org-modules 'org-timer)
           (setq org-timer-default-timer 25)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-clock-in-hook</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">'(lamda ()</span>
<span style="color: #b22222;">;;                </span><span style="color: #b22222;">(if (not org-timer-current-timer)</span>
<span style="color: #b22222;">;;                    </span><span style="color: #b22222;">(org-timer-set-timer '(16)))))</span>

           (setq growl-pomodoro-default-task-name <span style="color: #8b2252;">"doing the task"</span>)
           (setq growl-pomodoro-task-name 'growl-pomodoro-default-task-name)

           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">set-growl-pomodoro-task-name</span> ()
                 (interactive <span style="color: #8b2252;">"P"</span>)
                 (setq growl-pomodoro-task-name
                           (read-from-minibuffer <span style="color: #8b2252;">"Task Name: "</span> growl-pomodoro-default-task-name)))
           (add-hook 'org-timer-set-hook 'set-growl-pomodoro-task-name)

           (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">growl-pomodoro-timer</span> ()
                 (interactive)
                 (shell-command-to-string
                  (concat <span style="color: #8b2252;">"growlnotify -s -a Emacs -t \"++ Pomodoro ++\" -m \""</span>
                                  <span style="color: #8b2252;">"The end of "</span> growl-pomodoro-task-name <span style="color: #8b2252;">"!\""</span>))
                 (shell-command-to-string
                  <span style="color: #b22222;">;   </span><span style="color: #b22222;">(concat "say The end of " growl-pomodoro-task-name)</span>
                  (concat <span style="color: #8b2252;">"say -v Kyoko "</span> growl-pomodoro-task-name)
                  ))
           (add-hook 'org-timer-done-hook 'growl-pomodoro-timer)
))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-6" class="outline-3">
<h3 id="sec-10-6"><span class="section-number-3">10.6</span> face 関連</h3>
<div class="outline-text-3" id="text-10-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '( 
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Font lock &#12434;&#20351;&#12358;</span>
   (global-font-lock-mode 1)
   (add-hook 'org-mode-hook 'turn-on-font-lock)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12454;&#12451;&#12531;&#12489;&#12454;&#12398;&#31471;&#12391;&#25240;&#12426;&#36820;&#12377;&#65288;&#24819;&#23450;&#12392;&#36870;&#12398;&#25391;&#12427;&#33310;&#12356;&#65294;&#12393;&#12371;&#12363;&#12395;&#12496;&#12464;&#12364;&#12354;&#12427;&#65289;</span>
   (setq org-startup-truncated nil)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12469;&#12502;&#12484;&#12522;&#12540;&#20197;&#19979;&#12398; * &#12434;&#30053;&#24335;&#34920;&#31034;&#12377;&#12427;</span>
   (setq org-hide-leading-stars t)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color setting for TODO keywords</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color for priorities</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-priority-faces</span>
   <span style="color: #b22222;">;;  </span><span style="color: #b22222;">'(("?A" :foreground "#E01B4C" :background "#FFFFFF" :weight bold)</span>
   <span style="color: #b22222;">;;    </span><span style="color: #b22222;">("?B" :foreground "#1739BF" :background "#FFFFFF" :weight bold)</span>
   <span style="color: #b22222;">;;    </span><span style="color: #b22222;">("?C" :foreground "#575757" :background "#FFFFFF" :weight bold)))</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Color setting for Tags</span>

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">#CC3333     </span>

   (setq org-todo-keyword-faces
                 '((<span style="color: #8b2252;">"FOCUS"</span>   <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF0000"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#FFCC66"</span>)
                   (<span style="color: #8b2252;">"CHECK"</span>   <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF9900"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#FFF0F0"</span> <span style="color: #483d8b;">:underline</span> t)
                   (<span style="color: #8b2252;">"ICAL"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#33CC66"</span>)
                   (<span style="color: #8b2252;">"WAIT"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#33CC66"</span>)
                   (<span style="color: #8b2252;">"EDIT"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF33CC"</span>)
                   (<span style="color: #8b2252;">"READ"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#9933CC"</span>)
                   (<span style="color: #8b2252;">"MAIL"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC3300"</span>)
                   (<span style="color: #8b2252;">"PLAN"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF6600"</span>)
                   (<span style="color: #8b2252;">"REV1"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#3366FF"</span>)
                   (<span style="color: #8b2252;">"REV2"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#3366FF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#99CCFF"</span>)
                   (<span style="color: #8b2252;">"REV3"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#3366FF"</span>)
                   (<span style="color: #8b2252;">"STOP"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#9999CC"</span>)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(:foreground "#0000FF" :bold t)     ; default. do NOT put this bottom    </span>
   (setq org-tag-faces
                 '((<span style="color: #8b2252;">"Achievement"</span> <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#66CC66"</span>)
                   (<span style="color: #8b2252;">"Report"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#66CC66"</span>)
                   (<span style="color: #8b2252;">"Background"</span>  <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#66CC99"</span>)
                   (<span style="color: #8b2252;">"Chore"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#6699CC"</span>)
                   (<span style="color: #8b2252;">"Domestic"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#6666CC"</span>)
                   (<span style="color: #8b2252;">"Doing"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF0000"</span>)   
                   (<span style="color: #8b2252;">"Ongoing"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC6666"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">for non scheduled/reminder</span>
                   (<span style="color: #8b2252;">"Repeat"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">for interval tasks</span>
                   (<span style="color: #8b2252;">"Mag"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#9966CC"</span>)
                   (<span style="color: #8b2252;">"buy"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#9966CC"</span>)
                   (<span style="color: #8b2252;">"pay"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC6699"</span>)
                   (<span style="color: #8b2252;">"secret"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF0000"</span>)
                   (<span style="color: #8b2252;">"note"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#6633CC"</span>)
                   (<span style="color: #8b2252;">"Implements"</span>  <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"Coding"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span>)
                   (<span style="color: #8b2252;">"Editing"</span>     <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"work"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"Survey"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"Home"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"Open"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#CC9999"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"Blog"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF33CC"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#9966CC"</span>)
                   (<span style="color: #8b2252;">"Test"</span>        <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FF0000"</span> <span style="color: #483d8b;">:weight</span> bold)
                   (<span style="color: #8b2252;">"DEBUG"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#9966CC"</span>)
                   (<span style="color: #8b2252;">"EVENT"</span>       <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#9966CC"</span>)
                   (<span style="color: #8b2252;">"Thinking"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#96A9FF"</span>)
                   (<span style="color: #8b2252;">"Schedule"</span>    <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#FF7D7D"</span>)
                   (<span style="color: #8b2252;">"OUTPUT"</span>      <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#FFFFFF"</span> <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"#66CC99"</span>)
                   (<span style="color: #8b2252;">"Log"</span>         <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#008500"</span>)))))
<span style="color: #b22222;">;;</span><span style="color: #b22222;">#5BDF8D</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-7" class="outline-3">
<h3 id="sec-10-7"><span class="section-number-3">10.7</span> TODOキーワードのカスタマイズ</h3>
<div class="outline-text-3" id="text-10-7">
<p>
キーワードには日本語も使えます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-todo-keywords
                 '((sequence <span style="color: #8b2252;">"TODO(t)"</span> <span style="color: #8b2252;">"FOCUS(f)"</span> <span style="color: #8b2252;">"ICAL(c)"</span> <span style="color: #8b2252;">"|"</span> <span style="color: #8b2252;">"DONE(d)"</span>)
                   (sequence <span style="color: #8b2252;">"READ(r)"</span> <span style="color: #8b2252;">"EDIT(e)"</span> <span style="color: #8b2252;">"MAIL(m)"</span> <span style="color: #8b2252;">"PLAN(p)"</span> <span style="color: #8b2252;">"|"</span>)
                   (sequence <span style="color: #8b2252;">"CHECK(C)"</span> <span style="color: #8b2252;">"WAIT(w)"</span> <span style="color: #8b2252;">"STOP(s)"</span> <span style="color: #8b2252;">"|"</span>)
                   (sequence <span style="color: #8b2252;">"REV1(1)"</span> <span style="color: #8b2252;">"REV2(2)"</span> <span style="color: #8b2252;">"REV3(3)"</span> <span style="color: #8b2252;">"|"</span>)))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Global counting of TODO items</span>
   (setq org-hierarchical-todo-statistics nil)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Global counting of checked TODO items</span>
   (setq org-hierarchical-checkbox-statistics nil)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">block-update-time</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-dblock-write:block-update-time</span> (params)
         (<span style="color: #a020f0;">let</span> ((fmt (or (plist-get params <span style="color: #483d8b;">:format</span>) <span style="color: #8b2252;">"%Y-%m-%d"</span>)))
           (insert <span style="color: #8b2252;">""</span> (format-time-string fmt (current-time)))))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12377;&#12409;&#12390;&#12398;&#12481;&#12455;&#12483;&#12463;&#12508;&#12483;&#12463;&#12473;&#12398; cookies &#12434;&#26356;&#26032;&#12377;&#12427;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">do-org-update-statistics-cookies</span> ()
         (interactive)
         (org-update-statistics-cookies 'all))
   ))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-8" class="outline-3">
<h3 id="sec-10-8"><span class="section-number-3">10.8</span> [org-agenda]</h3>
<div class="outline-text-3" id="text-10-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-agenda <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(  
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the view span as day in an agenda view, the default is week</span>
   (setq org-agenda-span 'day)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#12395;&#35686;&#21578;&#12434;&#34920;&#31034;&#12377;&#12427;&#26399;&#38291;</span>
   (setq org-deadline-warning-days 7)
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#12499;&#12517;&#12540;&#12391;FOLLOW&#12434;&#35373;&#23450;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-agenda-start-with-follow-mode t)</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Customized Time Grid</span>
   (setq org-agenda-time-grid
                 '((daily today require-timed)
                   <span style="color: #8b2252;">"----------------"</span>
                   (800 1000 1200 1400 1600 1800 2000 2200 2400 2600)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12472;&#12455;&#12531;&#12480;&#20316;&#25104;&#23550;&#35937;&#65288;&#25351;&#23450;&#12375;&#12394;&#12356;&#12392;agenda&#12364;&#29983;&#25104;&#12373;&#12428;&#12394;&#12356;&#65289;</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12371;&#12371;&#12434;&#38291;&#36949;&#12358;&#12392;&#65292;MobileOrg, iCal export &#12418;&#12358;&#12414;&#12367;&#12356;&#12363;&#12394;&#12356;</span>
   (setq org-agenda-files
                 '(<span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/next.org"</span>
                   <span style="color: #8b2252;">"~/Dropbox/org/today.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/buffer.org"</span>
                   <span style="color: #8b2252;">"~/Dropbox/org/work.org"</span> <span style="color: #8b2252;">"~/Dropbox/org/research.org"</span>))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#29305;&#23450;&#12479;&#12464;&#12434;&#25345;&#12388;&#12484;&#12522;&#12540;&#12522;&#12473;&#12488;&#12434;&#19968;&#30330;&#31227;&#21205;&#65288;org-tags-view, org-tree-slide&#65289;</span>
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-doing-tag</span> <span style="color: #8b2252;">"Doing"</span>)
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-sparse-doing-tree</span> ()
         (interactive)
         (org-tags-view nil my-doing-tag))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">Doing&#12479;&#12464;&#12434;&#12488;&#12464;&#12523;&#12377;&#12427;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-toggle-doing-tag</span> ()
         (interactive)
         (<span style="color: #a020f0;">when</span> (eq major-mode 'org-mode)
           (<span style="color: #a020f0;">save-excursion</span>
                 (<span style="color: #a020f0;">save-restriction</span>
                   (<span style="color: #a020f0;">unless</span> (org-at-heading-p)
                         (outline-previous-heading))
                   (<span style="color: #a020f0;">if</span> (string-match
                                (concat <span style="color: #8b2252;">":"</span> my-doing-tag <span style="color: #8b2252;">":"</span>) (org-get-tags-string))
                           (org-toggle-tag my-doing-tag 'off)
                         (org-toggle-tag my-doing-tag 'on))
                   (org-reveal)))))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#31227;&#21205;&#30452;&#24460;&#12395;agenda&#12496;&#12483;&#12501;&#12449;&#12434;&#38281;&#12376;&#12427;&#65288;&#12484;&#12522;&#12540;&#12398;&#20869;&#23481;&#12399;SPACE&#12391;&#30906;&#35469;&#21487;&#65289;</span>
   (org-defkey org-agenda-mode-map [(tab)]
                           '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                  (org-agenda-goto)
                                  (<span style="color: #a020f0;">with-current-buffer</span> <span style="color: #8b2252;">"*Org Agenda*"</span>
                                        (org-agenda-quit))))))
</pre>
</div>
</div>

<div id="outline-container-sec-10-8-1" class="outline-4">
<h4 id="sec-10-8-1"><span class="section-number-4">10.8.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-10-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"&lt;f11&gt;"</span>) 'my-toggle-doing-tag)
(define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c &lt;f11&gt;"</span>) 'my-sparse-doing-tree)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-10-9" class="outline-3">
<h3 id="sec-10-9"><span class="section-number-3">10.9</span> [appt.el] アラーム設定</h3>
<div class="outline-text-3" id="text-10-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  (eval-after-autoload-if-found
                'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
                '(  
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12450;&#12521;&#12540;&#12512;&#34920;&#31034;&#12434;&#26377;&#21177;&#12395;&#12377;&#12427;</span>
(appt-activate 1)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">window &#12434; &#12501;&#12524;&#12540;&#12512;&#20869;&#12395;&#34920;&#31034;&#12377;&#12427;</span>
(setq appt-display-format 'window)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">window &#12434;&#32153;&#32154;&#34920;&#31034;&#12377;&#12427;&#26178;&#38291;[s]</span>
(setq appt-display-duration 3)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12499;&#12540;&#12503;&#38899;&#12398;&#26377;&#28961;</span>
(setq appt-audible t)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20309;&#20998;&#21069;&#12363;&#12425;&#35686;&#21578;&#34920;&#31034;&#12434;&#38283;&#22987;&#12377;&#12427;&#12363;[m]</span>
(setq appt-message-warning-time 3)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12514;&#12540;&#12489;&#12521;&#12452;&#12531;&#12395;&#12450;&#12521;&#12540;&#12512;&#12434;&#34920;&#31034;&#12377;&#12427;</span>
(setq appt-display-mode-line t)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">org-agenda &#12398;&#20869;&#23481;&#12434;&#12450;&#12521;&#12540;&#12512;&#12395;&#30331;&#37682;&#12377;&#12427;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(org-agenda-to-appt t '((headline "TODO")))</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20445;&#23384;&#26178;&#12395;&#12450;&#12521;&#12540;&#12512;&#12434;&#30331;&#37682;</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">(lambda() (add-hook 'before-save-hook</span>
<span style="color: #b22222;">;;                            </span><span style="color: #b22222;">'org-agenda-to-appt t '((headline "TODO")))))</span>
))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-10" class="outline-3">
<h3 id="sec-10-10"><span class="section-number-3">10.10</span> [org-capture] 高速にメモを取る</h3>
<div class="outline-text-3" id="text-10-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-capture <span style="color: #8b2252;">"org-capture"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(  
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">2010-06-13 &#12398;&#24418;&#24335;&#12391;&#12399;&#65292;&#12479;&#12464;&#12392;&#12375;&#12390;&#35469;&#35672;&#12373;&#12428;&#12394;&#12356;</span>
   (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">get-current-date-tags</span> () (format-time-string <span style="color: #8b2252;">"%Y%m%d"</span>))
   (setq org-default-notes-file (concat org-directory <span style="color: #8b2252;">"next.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-words-notes-file</span> (concat org-directory <span style="color: #8b2252;">"words.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-notes-file</span> (concat org-directory <span style="color: #8b2252;">"note.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-research-file</span> (concat org-directory <span style="color: #8b2252;">"research.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-buffer-file</span> (concat org-directory <span style="color: #8b2252;">"buffer.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-today-file</span> (concat org-directory <span style="color: #8b2252;">"today.org"</span>))
   (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">org-capture-ical-file</span> (concat org-directory <span style="color: #8b2252;">"org-ical.org"</span>))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">see org.pdf:p73</span>
   (setq org-capture-templates
                 `((<span style="color: #8b2252;">"t"</span> <span style="color: #8b2252;">"TODO &#38917;&#30446;&#12434; INBOX &#12395;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
                        (file+headline nil <span style="color: #8b2252;">"INBOX"</span>) <span style="color: #8b2252;">"** TODO %?\n\t"</span>)
                   (<span style="color: #8b2252;">"c"</span> <span style="color: #8b2252;">"&#21516;&#26399;&#12459;&#12524;&#12531;&#12480;&#12540;&#12395;&#12456;&#12531;&#12488;&#12522;&#12540;"</span> entry
                        (file+headline ,org-capture-ical-file <span style="color: #8b2252;">"Schedule"</span>)
                        <span style="color: #8b2252;">"** TODO %?\n\t"</span>) 
                   (<span style="color: #8b2252;">"d"</span> <span style="color: #8b2252;">"Doing&#12479;&#12464;&#20184;&#12365;&#12398;&#12479;&#12473;&#12463;&#12434;Inbox&#12395;&#25237;&#12370;&#12427;"</span> entry
                        (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
                        <span style="color: #8b2252;">"** TODO %? :Doing:\n  - \n"</span>)
                   (<span style="color: #8b2252;">"l"</span> <span style="color: #8b2252;">"&#26412;&#26085;&#12398;&#12481;&#12455;&#12483;&#12463;&#12522;&#12473;&#12488;"</span> entry
                        (file+headline ,org-capture-today-file <span style="color: #8b2252;">"Today"</span>)
                        <span style="color: #8b2252;">"** FOCUS &#26412;&#26085;&#12398;&#12481;&#12455;&#12483;&#12463;&#12522;&#12473;&#12488; %T\n&#65288;&#36215;&#24202;&#26178;&#38291;&#12398;&#35352;&#37682;&#65289;[[http://www.hayaoki-seikatsu.com/users/takaxp/][&#26089;&#36215;&#12365;&#26085;&#35352;]] \n&#65288;&#26397;&#39135;&#65289;\n  - [ ] %?\n&#65288;&#26172;&#39135;&#65289;\n&#65288;&#24112;&#23429;&#65295;&#22805;&#39135;&#65289;\n----\n&#65288;&#30740;&#31350;&#36895;&#22577;&#65289;\n  - [ ] \n"</span>)
                   (<span style="color: #8b2252;">"i"</span> <span style="color: #8b2252;">"&#12450;&#12452;&#12487;&#12451;&#12450;&#12434;&#26360;&#12365;&#36796;&#12416;"</span> entry (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
                        <span style="color: #8b2252;">"** %?\n  - \n\t%U"</span>)
                   (<span style="color: #8b2252;">"b"</span> <span style="color: #8b2252;">"Bug &#12479;&#12464;&#20184;&#12365;&#12398; TODO &#38917;&#30446;&#12434;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
                        (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
                        <span style="color: #8b2252;">"** TODO %? :bug:\n %i\n %a %t"</span>)
                   (<span style="color: #8b2252;">"w"</span> ,(concat <span style="color: #8b2252;">"&#33521;&#21336;&#35486;&#12434; "</span> org-capture-words-notes-file
                                                 <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>) entry
                                                 (file+headline ,org-capture-words-notes-file <span style="color: #8b2252;">"WORDS"</span>)
                                                 <span style="color: #8b2252;">"** %? :%(get-current-date-tags):\n&#12300;&#12301;\n  - "</span>)
                   (<span style="color: #8b2252;">"g"</span> ,(concat <span style="color: #8b2252;">"&#33521;&#35486;&#12494;&#12540;&#12488;&#12434; "</span> org-capture-words-notes-file
                                                 <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
                        entry (file+headline ,org-capture-words-notes-file <span style="color: #8b2252;">"GRAMMER"</span>)
                        <span style="color: #8b2252;">"** %? :%(get-current-date-tags):\n\n%U"</span>)
                   (<span style="color: #8b2252;">"T"</span> <span style="color: #8b2252;">"&#26178;&#38291;&#20184;&#12365;&#12456;&#12531;&#12488;&#12522;&#12540;"</span> entry (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
                        <span style="color: #8b2252;">"** %? %T--\n"</span>)
                   (<span style="color: #8b2252;">"n"</span> <span style="color: #8b2252;">"&#12494;&#12540;&#12488;&#12392;&#12375;&#12390;INBOX&#12395;&#36028;&#12426;&#20184;&#12369;&#12427;"</span> entry
                        (file+headline nil <span style="color: #8b2252;">"INBOX"</span>)
                        <span style="color: #8b2252;">"** %? :note:\n\t%U"</span>)
                   (<span style="color: #8b2252;">"D"</span> <span style="color: #8b2252;">"&#12300;&#12489;&#12521;&#12483;&#12459;&#12540;365&#12398;&#37329;&#35328;&#12301;&#12434;&#12494;&#12540;&#12488;&#12377;&#12427;"</span> entry
                        (file+headline ,org-capture-notes-file <span style="color: #8b2252;">"The Daily Drucker"</span>)
                        <span style="color: #8b2252;">"** &#12300;%?&#12301;\nDrucker) \n  - \n  - \nACTION POINT:\n  - \nQUESTION:\n  - \n"</span>)
                   (<span style="color: #8b2252;">"r"</span> ,(concat <span style="color: #8b2252;">"&#30740;&#31350;&#12494;&#12540;&#12488;&#12434; "</span> org-capture-research-file
                                                 <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
                        entry (file+headline ,org-capture-research-file <span style="color: #8b2252;">"Survey"</span>)
                        <span style="color: #8b2252;">"** %? :note:\n# \n  - \n\t%U"</span>)
                   (<span style="color: #8b2252;">"`"</span> ,(concat <span style="color: #8b2252;">"&#12494;&#12540;&#12488;&#12434;&#12496;&#12483;&#12501;&#12449; "</span> org-capture-buffer-file
                                                 <span style="color: #8b2252;">" &#12395;&#26360;&#12365;&#36796;&#12416;"</span>)
                        entry (file+headline ,org-capture-buffer-file <span style="color: #8b2252;">"Buffer"</span>)
                        <span style="color: #8b2252;">"** %(get-random-string 16) %U\n\n%?\n\n----"</span>)))
   ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-11" class="outline-3">
<h3 id="sec-10-11"><span class="section-number-3">10.11</span> [org-refile]</h3>
<div class="outline-text-3" id="text-10-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-refile <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq org-refile-targets
                 (quote ((<span style="color: #8b2252;">"org-ical.org"</span> <span style="color: #483d8b;">:level</span> . 1)
                                 (<span style="color: #8b2252;">"next.org"</span> <span style="color: #483d8b;">:level</span> . 1)
                                 (<span style="color: #8b2252;">"sleep.org"</span> <span style="color: #483d8b;">:level</span> . 1))))
           ))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-10-12" class="outline-3">
<h3 id="sec-10-12"><span class="section-number-3">10.12</span> [org-babel] 基本設定</h3>
<div class="outline-text-3" id="text-10-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
'((setq org-confirm-babel-evaluate nil)
  (setq org-src-fontify-natively t)
  (setq org-src-tab-acts-natively t)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#23455;&#35013;&#28168;&#12415;&#12398;&#35328;&#35486;&#12395;&#22909;&#12365;&#12394;&#21517;&#21069;&#12434;&#32016;&#20184;&#12369;&#12427;</span>
  (add-to-list 'org-src-lang-modes '(<span style="color: #8b2252;">"zsh"</span> . sh))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-13" class="outline-3">
<h3 id="sec-10-13"><span class="section-number-3">10.13</span> [org-babel] ソースブロックの入力キーをカスタマイズ</h3>
<div class="outline-text-3" id="text-10-13">
<p>
ソースブロックを入力するときは， &lt;+ <code>TAB</code> でテンプレートを高速に入力できます．しかし，利用する言語までは指定できないので，特定の内容について対応するコマンドを割り当てて起きます．以下の例では， &lt;S+ <code>TAB</code> で <code>emacs-lisp</code> を， &lt;C+ <code>TAB</code> でコメントブロックを指定できます．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((add-to-list 'org-structure-template-alist
                                '(<span style="color: #8b2252;">"C"</span> <span style="color: #8b2252;">"#+BEGIN_COMMENT\n?\n#+END_COMMENT"</span> <span style="color: #8b2252;">""</span>))
   (add-to-list 'org-structure-template-alist
                                '(<span style="color: #8b2252;">"S"</span> <span style="color: #8b2252;">"#+BEGIN_SRC emacs-lisp\n?\n#+END_SRC"</span> <span style="color: #8b2252;">"&lt;src lang=\"emacs-lisp\"&gt;\n\n&lt;/src&gt;"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-14" class="outline-3">
<h3 id="sec-10-14"><span class="section-number-3">10.14</span> [MobileOrg] iOS との連携</h3>
<div class="outline-text-3" id="text-10-14">
<p>
<a href="http://orgmode.org/manual/Setting-up-the-staging-area.html">http://orgmode.org/manual/Setting-up-the-staging-area.html</a>
</p>


<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '(
<span style="color: #b22222;">;</span><span style="color: #b22222;">(setq org-mobile-files '("~/Dropbox/org/next.org" "1.org" "2.org"))</span>
(setq org-mobile-files '(<span style="color: #8b2252;">"~/Dropbox/org/next.org"</span>))
<span style="color: #b22222;">;</span><span style="color: #b22222;">(setq org-mobile-force-id-on-agenda-items nil)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set a file to capture data from iOS devices</span>
(setq org-mobile-inbox-for-pull (concat org-directory <span style="color: #8b2252;">"captured.org"</span>))

<span style="color: #b22222;">; </span><span style="color: #b22222;">Upload location stored org files (index.org will be created)</span>
(setq org-mobile-directory <span style="color: #8b2252;">"~/Dropbox/Apps/MobileOrg/"</span>)

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Menu to push or pull org files using MobileOrg</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-mobile-sync</span> ()
  (interactive)
  (<span style="color: #a020f0;">let</span>
          (org-mobile-sync-type
           (read-from-minibuffer <span style="color: #8b2252;">"How do you sync the org files? (pull or push) "</span>))
        (message <span style="color: #8b2252;">"%s"</span> org-mobile-sync-type)
        (<span style="color: #a020f0;">cond</span>
         ((string= <span style="color: #8b2252;">"pull"</span> org-mobile-sync-type)(org-mobile-pull))
         ((string= <span style="color: #8b2252;">"push"</span> org-mobile-sync-type)(org-mobile-push)))))

))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-15" class="outline-3">
<h3 id="sec-10-15"><span class="section-number-3">10.15</span> [org-tree-slide.el] Org でプレゼンテーション</h3>
<div class="outline-text-3" id="text-10-15">
<p>
<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:org-tree-slide">http://pastelwill.jp/wiki/doku.php?id=emacs:org-tree-slide</a>
</p>

<p>
Doing タグのトグルに <code>f11</code> を割り当てたので，コンテンツモードへの切り替えは，異なるキーバインドに変更．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Org-tree-slide</span>
(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           'org-tree-slide-mode <span style="color: #8b2252;">"org-tree-slide"</span> nil t nil
           '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&lt;f8&gt;/&lt;f9&gt;/&lt;f10&gt;/&lt;f11&gt; are assigned to control org-tree-slide</span>
                 (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;f9&gt;"</span>)
                   'org-tree-slide-move-previous-tree)
                 (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;f10&gt;"</span>)
                   'org-tree-slide-move-next-tree)
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">(define-key org-tree-slide-mode-map (kbd "&lt;f11&gt;")</span>
                 <span style="color: #b22222;">;;   </span><span style="color: #b22222;">'org-tree-slide-content)</span>
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">reset the default setting</span>
                 (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;left&gt;"</span>)  'backward-char)
                 (define-key org-tree-slide-mode-map (kbd <span style="color: #8b2252;">"&lt;right&gt;"</span>) 'forward-char)
                 (org-tree-slide-narrowing-control-profile)
                 <span style="color: #b22222;">;;         </span><span style="color: #b22222;">(org-tree-slide-presentation-profile)</span>
                 (setq org-tree-slide-skip-outline-level 5)
                 (setq org-tree-slide-skip-done nil)))
  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f8&gt;"</span>) 'org-tree-slide-mode)
  (global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f8&gt;"</span>) 'org-tree-slide-skip-done-toggle))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-16" class="outline-3">
<h3 id="sec-10-16"><span class="section-number-3">10.16</span> [org-fstree] ディレクトリ構造を読み取る</h3>
<div class="outline-text-3" id="text-10-16">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> nil t nil
 '((<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-fstree</span> nil t)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-17" class="outline-3">
<h3 id="sec-10-17"><span class="section-number-3">10.17</span> [calfw-org] calfw に org の予定を表示する</h3>
<div class="outline-text-3" id="text-10-17">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'cfw:open-org-calendar <span style="color: #8b2252;">"calfw-org"</span> <span style="color: #8b2252;">"Rich calendar for org-mode"</span> t nil
 '(
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">icalendar &#12392;&#12398;&#36899;&#32080;</span>
   (setq cfw:org-icalendars '(<span style="color: #8b2252;">"~/Dropbox/org/org-ical.org"</span>))

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">org &#12391;&#20351;&#12358;&#34920;&#12395;&#12501;&#12455;&#12452;&#12473;&#12434;&#32113;&#19968;</span>
   (setq cfw:fchar-junction ?+
                 cfw:fchar-vertical-line ?|
                 cfw:fchar-horizontal-line ?-
                 cfw:fchar-left-junction ?|
                 cfw:fchar-right-junction ?|
                 cfw:fchar-top-junction ?+
                 cfw:fchar-top-left-corner ?|
                 cfw:fchar-top-right-corner ?| )))

<span style="color: #b22222;">;;         </span><span style="color: #b22222;">(add-hook 'window-configuration-change-hook 'cfw:resize-calendar)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun cfw:resize-calendar ()</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(interactive)</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(when (eq major-mode 'cfw:calendar-mode)</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(cfw:refresh-calendar-buffer nil)</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(message "Calendar resized.")))</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">(defun open-calfw-agenda-org ()</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(interactive)</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">(cfw:open-org-calendar))</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-agenda-custom-commands</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">'(("w" todo "FOCUS")</span>
<span style="color: #b22222;">;;         </span><span style="color: #b22222;">("G" open-calfw-agenda-org "Graphical display in calfw"))))))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-18" class="outline-3">
<h3 id="sec-10-18"><span class="section-number-3">10.18</span> [org-export-generic] エクスポート機能を拡張する</h3>
<div class="outline-text-3" id="text-10-18">
<p>
<code>org-set-generic-type</code> を使うことで，エクスポート機能を好みに拡張できる．contrib の中の <code>org-export-generic.el</code> が必要なので注意する．
</p>

<p>
<code>org-set-generic-type</code> を <code>.emacs</code> に追記した後， <code>C-c C-e g &lt;key-binding&gt;</code> とすればよい． <code>&lt;key-binding&gt;</code> は <code>org-set-generic-type</code> で設定する値である．2つ目は，Markdown へのエクスポーターである．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-export-generic <span style="color: #8b2252;">"org-mode"</span> nil t nil
 '(
   (org-set-generic-type
        <span style="color: #8b2252;">"textile"</span>
        '(<span style="color: #483d8b;">:file-suffix</span>
          <span style="color: #8b2252;">".textile"</span>
          <span style="color: #483d8b;">:key-binding</span> ?T
          <span style="color: #483d8b;">:title-format</span>    <span style="color: #8b2252;">"Title: %s\n\n"</span>
          <span style="color: #b22222;">;;   </span><span style="color: #b22222;">:date-format     "Date: %s\n"</span>
          <span style="color: #483d8b;">:date-export</span> nil
          <span style="color: #483d8b;">:toc-export</span>      nil
          <span style="color: #483d8b;">:author-export</span>   nil
          <span style="color: #483d8b;">:tags-export</span>     nil
          <span style="color: #483d8b;">:drawers-export</span>  nil
          <span style="color: #483d8b;">:date-export</span>     t
          <span style="color: #483d8b;">:timestamps-export</span>  t
          <span style="color: #483d8b;">:priorities-export</span>  nil
          <span style="color: #483d8b;">:todo-keywords-export</span> t
          <span style="color: #483d8b;">:body-line-fixed-format</span> <span style="color: #8b2252;">"\t%s\n"</span>
                                                                                <span style="color: #b22222;">;</span><span style="color: #b22222;">:body-list-prefix "\n"</span>
          <span style="color: #483d8b;">:body-list-format</span> <span style="color: #8b2252;">"* %s"</span>
          <span style="color: #483d8b;">:body-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
          <span style="color: #483d8b;">:body-bullet-list-prefix</span> (<span style="color: #8b2252;">"* "</span> <span style="color: #8b2252;">"** "</span> <span style="color: #8b2252;">"*** "</span> <span style="color: #8b2252;">"**** "</span> <span style="color: #8b2252;">"***** "</span>)
          <span style="color: #483d8b;">:body-number-list-format</span> <span style="color: #8b2252;">"# %s"</span>
          <span style="color: #483d8b;">:body-number-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
          <span style="color: #483d8b;">:header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
          <span style="color: #483d8b;">:body-section-header-prefix</span> (<span style="color: #8b2252;">"h1. "</span> <span style="color: #8b2252;">"h2. "</span> <span style="color: #8b2252;">"h3. "</span> <span style="color: #8b2252;">"h4. "</span> <span style="color: #8b2252;">"h5. "</span> <span style="color: #8b2252;">"h6. "</span>)
          <span style="color: #483d8b;">:body-section-header-format</span> <span style="color: #8b2252;">"%s"</span>
          <span style="color: #483d8b;">:body-section-header-suffix</span> (<span style="color: #8b2252;">"\n\n"</span>)
          <span style="color: #483d8b;">:body-header-section-numbers</span> nil
          <span style="color: #483d8b;">:body-header-section-number-format</span> <span style="color: #8b2252;">"%s) "</span>
          <span style="color: #483d8b;">:body-line-format</span> <span style="color: #8b2252;">"%s\n"</span>
          <span style="color: #483d8b;">:body-newline-paragraph</span> <span style="color: #8b2252;">"\n"</span>
          <span style="color: #483d8b;">:bold-format</span> <span style="color: #8b2252;">"*%s*"</span>
          <span style="color: #483d8b;">:italic-format</span> <span style="color: #8b2252;">"_%s_"</span>
          <span style="color: #483d8b;">:underline-format</span> <span style="color: #8b2252;">"+%s+"</span>
          <span style="color: #483d8b;">:strikethrough-format</span> <span style="color: #8b2252;">"-%s-"</span>
          <span style="color: #483d8b;">:verbatim-format</span> <span style="color: #8b2252;">"`%s`"</span>
          <span style="color: #483d8b;">:code-format</span> <span style="color: #8b2252;">"@%s@"</span>
          <span style="color: #483d8b;">:body-line-wrap</span>   75
          <span style="color: #483d8b;">:blockquote-start</span> <span style="color: #8b2252;">"\n&lt;pre&gt;\n"</span>
          <span style="color: #483d8b;">:blockquote-end</span> <span style="color: #8b2252;">"\n&lt;/pre&gt;\n"</span>
          ))

   (org-set-generic-type
   <span style="color: #8b2252;">"markdown"</span> 
   '(<span style="color: #483d8b;">:file-suffix</span>
         <span style="color: #8b2252;">".markdown"</span>
         <span style="color: #483d8b;">:key-binding</span>     ?M
         <span style="color: #483d8b;">:title-format</span>    <span style="color: #8b2252;">"Title: %s\n"</span>
         <span style="color: #483d8b;">:date-format</span>     <span style="color: #8b2252;">"Date: %s\n"</span>
         <span style="color: #483d8b;">:toc-export</span>      nil
         <span style="color: #483d8b;">:author-export</span>   t
         <span style="color: #483d8b;">:tags-export</span>     nil
         <span style="color: #483d8b;">:drawers-export</span>  nil
         <span style="color: #483d8b;">:date-export</span>     t
         <span style="color: #483d8b;">:timestamps-export</span>  t
         <span style="color: #483d8b;">:priorities-export</span>  nil
         <span style="color: #483d8b;">:todo-keywords-export</span> t
         <span style="color: #483d8b;">:body-line-fixed-format</span> <span style="color: #8b2252;">"\t%s\n"</span>
         <span style="color: #b22222;">;;</span><span style="color: #b22222;">:body-list-prefix "\n"</span>
         <span style="color: #483d8b;">:body-list-format</span> <span style="color: #8b2252;">"- %s"</span>
         <span style="color: #483d8b;">:body-list-suffix</span> <span style="color: #8b2252;">"\n"</span>
         <span style="color: #483d8b;">:header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
         <span style="color: #483d8b;">:body-section-header-prefix</span> (<span style="color: #8b2252;">""</span> <span style="color: #8b2252;">""</span> <span style="color: #8b2252;">"### "</span> <span style="color: #8b2252;">"#### "</span> <span style="color: #8b2252;">"##### "</span> <span style="color: #8b2252;">"###### "</span>)
         <span style="color: #483d8b;">:body-section-header-format</span> <span style="color: #8b2252;">"%s\n"</span>
         <span style="color: #483d8b;">:body-section-header-suffix</span> (?= ?- <span style="color: #8b2252;">""</span>)
         <span style="color: #483d8b;">:body-header-section-numbers</span> nil
         <span style="color: #483d8b;">:body-header-section-number-format</span> <span style="color: #8b2252;">"%s) "</span>
         <span style="color: #483d8b;">:body-line-format</span> <span style="color: #8b2252;">"%s\n"</span>
         <span style="color: #483d8b;">:body-newline-paragraph</span> <span style="color: #8b2252;">"\n"</span>
         <span style="color: #483d8b;">:bold-format</span> <span style="color: #8b2252;">"**%s**"</span>
         <span style="color: #483d8b;">:italic-format</span> <span style="color: #8b2252;">"_%s_"</span>
         <span style="color: #483d8b;">:verbatim-format</span> <span style="color: #8b2252;">"`%s`"</span>
         <span style="color: #483d8b;">:code-format</span> <span style="color: #8b2252;">"`%s`"</span>
         <span style="color: #483d8b;">:body-line-wrap</span>   75
         ))
   ))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-19" class="outline-3">
<h3 id="sec-10-19"><span class="section-number-3">10.19</span> [org-odt] ODT形式に出力</h3>
<div class="outline-text-3" id="text-10-19">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(org-odt) <span style="color: #8b2252;">"org-odt"</span> nil t nil
 '((setq org-export-odt-styles-file
         (concat (getenv <span style="color: #8b2252;">"HOME"</span>) <span style="color: #8b2252;">"/Dropbox/emacs.d/config/style.ott"</span>))
   (setq org-export-odt-preferred-output-format <span style="color: #8b2252;">"pdf"</span>)
   (setq org-export-odt-convert-processes
         '((<span style="color: #8b2252;">"LibreOffice"</span>
            <span style="color: #8b2252;">"/Applications/LibreOffice.app/Contents/MacOS/soffice --headless --convert-to %f%x --outdir %d %i"</span>)
           (<span style="color: #8b2252;">"unoconv"</span> <span style="color: #8b2252;">"unoconv -f %f -o %d %i"</span>)))))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(ox-odt) <span style="color: #8b2252;">"ox-odt"</span> nil t nil
 '((setq org-odt-styles-file
                 (concat (getenv <span style="color: #8b2252;">"HOME"</span>) <span style="color: #8b2252;">"/Dropbox/emacs.d/config/style.ott"</span>))
   (setq org-odt-preferred-output-format <span style="color: #8b2252;">"pdf"</span>)
   (setq org-odt-convert-processes
                 '((<span style="color: #8b2252;">"LibreOffice"</span>
                        <span style="color: #8b2252;">"/Applications/LibreOffice.app/Contents/MacOS/soffice --headless --convert-to %f%x --outdir %d %i"</span>)
                   (<span style="color: #8b2252;">"unoconv"</span> <span style="color: #8b2252;">"unoconv -f %f -o %d %i"</span>)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-20" class="outline-3">
<h3 id="sec-10-20"><span class="section-number-3">10.20</span> [org-crypt] ツリーを暗号化する</h3>
<div class="outline-text-3" id="text-10-20">
<p>
<code>M-x org-encrypt-entry</code> でカーソル位置のツリーを暗号化できます．復号は， <code>M-x org-decrypt-entry</code> にて．ただし，バッファのバックアップファイルが生成されていることに気をつけてください．自分の場合は，バックアップファイルは外部ホストに同期されない設定にしてあるので，とりあえず問題なしと考えています．
</p>

<p>
<code>M-x org-encrypt-entries</code> で，特定のタグが付けられたツリーを一括処理することもできますが，私は安全性を考慮して使っていません．
</p>

<p>
なお，実戦投入には十分なテストをしてからの方がよいでしょう．org バッファを外部ホストと同期している場合，転送先のホストでも暗号化／復号ができるかを確認するべきです．他方のホストでツリーにドロワーが付くと，復号できなくなったりします．その時は慌てずにプロパティのドロワーを削除すればOKです．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">org-crypt</span> nil t)
  (setq org-crypt-key <span style="color: #8b2252;">"&lt;insert your key&gt;"</span>)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-encrypt-entries &#12398;&#24433;&#38911;&#12434;&#21463;&#12369;&#12427;&#12479;&#12464;&#12434;&#25351;&#23450;</span>
  (setq org-tags-exclude-from-inheritance (quote (<span style="color: #8b2252;">"secret"</span>)))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#33258;&#21205;&#20445;&#23384;&#12398;&#30906;&#35469;&#12434;&#28961;&#21177;&#12395;</span>
  (setq org-crypt-disable-auto-save 'nil))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-21" class="outline-3">
<h3 id="sec-10-21"><span class="section-number-3">10.21</span> README を常に org-mode で開く</h3>
<div class="outline-text-3" id="text-10-21">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
'((push '(<span style="color: #8b2252;">"[rR][eE][aA][dD][mM][eE]"</span> . org-mode) auto-mode-alist)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-22" class="outline-3">
<h3 id="sec-10-22"><span class="section-number-3">10.22</span> その他</h3>
<div class="outline-text-3" id="text-10-22">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
 '((setq alarm-table <span style="color: #8b2252;">"~/Dropbox/org/today.org"</span>)
   (run-at-time <span style="color: #8b2252;">"00:00"</span> nil 'set-alarms-from-file alarm-table)))
</pre>
</div>
</div>

<div id="outline-container-sec-10-22-1" class="outline-4">
<h4 id="sec-10-22-1"><span class="section-number-4">10.22.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-10-22-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           'org-mode <span style="color: #8b2252;">"org"</span> <span style="color: #8b2252;">"Org Mode"</span> t nil
           '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">(org-transpose-element) &#12364;&#21106;&#12426;&#24403;&#12390;&#12425;&#12428;&#12390;&#12356;&#12427;&#12398;&#12391;&#21462;&#12426;&#36820;&#12377;&#65294;</span>
                 (org-defkey org-mode-map <span style="color: #8b2252;">"\C-\M-t"</span> 'beginning-of-buffer)

                 <span style="color: #b22222;">;;</span><span style="color: #b22222;">(define-key org-mode-map (kbd "C-c 1")</span>
                 <span style="color: #b22222;">;;  </span><span style="color: #b22222;">'org-export-icalendar-combine-agenda-files)</span>
                 (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c 1"</span>) 'my-ox-icalendar)
                 (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c 2"</span>) 'do-org-update-statistics-cookies)
                 (define-key org-mode-map (kbd <span style="color: #8b2252;">"C-c m"</span>) 'org-mobile-sync)
                 (define-key org-mode-map (kbd <span style="color: #8b2252;">"&lt;f5&gt;"</span>) 'org-narrow-to-subtree)
                 (define-key org-mode-map (kbd <span style="color: #8b2252;">"S-&lt;f5&gt;"</span>) 'widen)))

  (global-set-key (kbd <span style="color: #8b2252;">"C-M-o"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                                                   (show-org-buffer <span style="color: #8b2252;">"next.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-c"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                                                   (show-org-buffer <span style="color: #8b2252;">"org-ical.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-9"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                                                   (show-org-buffer <span style="color: #8b2252;">"buffer.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-M-0"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive)
                                                                   (show-org-buffer <span style="color: #8b2252;">"today.org"</span>)))
  (global-set-key (kbd <span style="color: #8b2252;">"C-c l"</span>) 'org-store-link)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c a"</span>) 'org-agenda)
  (global-set-key (kbd <span style="color: #8b2252;">"C-c r"</span>) 'org-capture))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-10-23" class="outline-3">
<h3 id="sec-10-23"><span class="section-number-3">10.23</span> org-mode の latex エクスポート関数をオーバーライド</h3>
<div class="outline-text-3" id="text-10-23">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Tex export (org-mode -&gt; tex with beamer class) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq org-export-latex-classes</span>
<span style="color: #b22222;">;;   </span><span style="color: #b22222;">'(("article"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{article}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\paragraph{%s}" . "\\paragraph*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subparagraph{%s}" . "\\subparagraph*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("report"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{report}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\part{%s}" . "\\part*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\chapter{%s}" . "\\chapter*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("book"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass[11pt]{book}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[T1]{fontenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{soul}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\part{%s}" . "\\part*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\chapter{%s}" . "\\chapter*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\section{%s}" . "\\section*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsection{%s}" . "\\subsection*{%s}")</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">("\\subsubsection{%s}" . "\\subsubsection*{%s}"))</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">("beamer"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">"\\documentclass{beamer}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage[AUTO]{inputenc}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{graphicx}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{longtable}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{float}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{wrapfig}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{amssymb}</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">\\usepackage{hyperref}"</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">org-beamer-sectioning)))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> フォント／配色関連</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> 正規表現を見やすくする</h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(set-face-foreground 'font-lock-regexp-grouping-backslash <span style="color: #8b2252;">"#66CC99"</span>)
(set-face-foreground 'font-lock-regexp-grouping-construct <span style="color: #8b2252;">"#9966CC"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2"><span class="section-number-3">11.2</span> カーソル行に色をつける</h3>
<div class="outline-text-3" id="text-11-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Color of the current line</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Cite: http://murakan.cocolog-nifty.com/blog/2009/01/emacs-tips-1d45.html</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">see also http://www.emacswiki.org/cgi-bin/emacs/highlight-current-line.el</span>
(global-hl-line-mode t)
(set-face-background 'hl-line <span style="color: #8b2252;">"#DEEDFF"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3"><span class="section-number-3">11.3</span> カーソルの色</h3>
<div class="outline-text-3" id="text-11-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Cursor (see also takaxp-mac.el)</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">(add-to-list 'default-frame-alist '(cursor-type . (hbar . 5)))</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">(add-to-list 'default-frame-alist '(cursor-type . bar))</span>

<span style="color: #b22222;">;</span><span style="color: #b22222;">(add-hook 'window-configuration-change-hook</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">update-cursor-color</span> ()
  (interactive)
  (<span style="color: #a020f0;">if</span> current-input-method (set-cursor-color <span style="color: #8b2252;">"#91C3FF"</span>)
        (set-cursor-color <span style="color: #8b2252;">"#AAAAAA"</span>)))
(update-cursor-color)
(run-with-idle-timer 10 t 'update-cursor-color)

(add-hook 'input-method-activate-hook
                  (<span style="color: #a020f0;">lambda</span> () (set-cursor-color <span style="color: #8b2252;">"#91C3FF"</span>)))
(add-hook 'input-method-inactivate-hook
                  (<span style="color: #a020f0;">lambda</span> () (set-cursor-color <span style="color: #8b2252;">"#AAAAAA"</span>)))

(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (= emacs-major-version 23))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">when IME is ON</span>
  (mac-set-input-method-parameter
   <span style="color: #8b2252;">"com.google.inputmethod.Japanese.base"</span> 'title <span style="color: #8b2252;">"G"</span>))

(<span style="color: #a020f0;">when</span> (and (eq window-system 'ns) (&gt;= emacs-major-version 24))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">when IME is ON</span>
  (mac-set-input-method-parameter
   <span style="color: #8b2252;">"com.google.inputmethod.Japanese.base"</span> 'title <span style="color: #8b2252;">"&#12464;"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4"><span class="section-number-3">11.4</span> カーソルを点滅させない</h3>
<div class="outline-text-3" id="text-11-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable cursor blink</span>
(blink-cursor-mode -1)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5"><span class="section-number-3">11.5</span> フォント設定</h3>
<div class="outline-text-3" id="text-11-5">
<p>
表のような利用環境に対して，個別に設定を施しています．WindowsとLinuxは安定版のEmacs23で，Macは開発版のCocoaEmacs23です．MacではEmacs24でもうまく表示できています．
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">ASCII</td>
<td class="left">日本語</td>
</tr>

<tr>
<td class="left">Mac</td>
<td class="left">Monaco</td>
<td class="left">ヒラギノ丸ゴ</td>
</tr>

<tr>
<td class="left">Windows</td>
<td class="left">Inconsolata</td>
<td class="left">メイリオ</td>
</tr>

<tr>
<td class="left">Linux</td>
<td class="left">Inconsolata</td>
<td class="left">MigMix</td>
</tr>
</tbody>
</table>

<p>
<a href="http://d.hatena.ne.jp/setoryohei/20110117/1295336454">http://d.hatena.ne.jp/setoryohei/20110117/1295336454</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-ja-font-setter</span> (spec)
        (set-fontset-font nil 'japanese-jisx0208 spec)
        (set-fontset-font nil 'katakana-jisx0201 spec)
        (set-fontset-font nil 'japanese-jisx0212 spec)
        (set-fontset-font nil '(#x0080 . #x024F) spec)
        (set-fontset-font nil '(#x0370 . #x03FF) spec)
        (set-fontset-font nil 'mule-unicode-0100-24ff spec))

  (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-ascii-font-setter</span> (spec)
        (set-fontset-font nil 'ascii spec))      

  (<span style="color: #a020f0;">cond</span>
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">CocoaEmacs</span>
   ((eq window-system 'ns)
        (<span style="color: #a020f0;">when</span> (or (= emacs-major-version 23) (= emacs-major-version 24))
          (<span style="color: #a020f0;">let</span>
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">1) Monaco, Hiragino/Migu 2M : font-size=12, -apple-hiragino=1.2</span>
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">2) Inconsolata, Migu 2M     : font-size=14, </span>
                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">3) Inconsolata, Hiragino    : font-size=14, -apple-hiragino=1.0</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Fonts</span>

                  ((font-size 12)
<span style="color: #b22222;">;          </span><span style="color: #b22222;">((font-size 28) ; for mirroring presentation (1440x900)</span>
<span style="color: #b22222;">;           </span><span style="color: #b22222;">(ascii-font "Inconsolata")</span>
                   (ascii-font <span style="color: #8b2252;">"Monaco"</span>)
                   (ja-font <span style="color: #8b2252;">"Migu 2M"</span>))
                <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "Hiragino Maru Gothic Pro")) </span>
                (my-ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size))
                (my-ja-font-setter (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size)))

          <span style="color: #b22222;">;; </span><span style="color: #b22222;">Fix ratio provided by set-face-attribute for fonts display</span>
          (setq face-font-rescale-alist
                        '((<span style="color: #8b2252;">"^-apple-hiragino.*"</span> . 1.0) <span style="color: #b22222;">; </span><span style="color: #b22222;">1.2</span>
                          (<span style="color: #8b2252;">".*Migu.*"</span> . 1.2)
                          (<span style="color: #8b2252;">".*Inconsolata.*"</span> 1.0)
                          (<span style="color: #8b2252;">".*osaka-bold.*"</span> . 1.0)     <span style="color: #b22222;">; </span><span style="color: #b22222;">1.2</span>
                          (<span style="color: #8b2252;">".*osaka-medium.*"</span> . 1.0)   <span style="color: #b22222;">; </span><span style="color: #b22222;">1.0</span>
                          (<span style="color: #8b2252;">".*courier-bold-.*-mac-roman"</span> . 1.0) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
                          <span style="color: #b22222;">;; </span><span style="color: #b22222;">(".*monaco cy-bold-.*-mac-cyrillic" . 1.0)</span>
                          <span style="color: #b22222;">;; </span><span style="color: #b22222;">(".*monaco-bold-.*-mac-roman" . 1.0) ; 0.9</span>
                          (<span style="color: #8b2252;">"-cdac$"</span> . 1.0)))           <span style="color: #b22222;">; </span><span style="color: #b22222;">1.3</span>

          <span style="color: #b22222;">;; </span><span style="color: #b22222;">Space between lines</span>
          (set-default 'line-spacing 1)
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">Anti aliasing with Quartz 2D</span>
          (setq mac-allow-anti-aliasing t)))

   ((eq window-system 'w32) <span style="color: #b22222;">; </span><span style="color: #b22222;">windows7</span>
        (<span style="color: #a020f0;">let</span>
                ((font-size 14)
                 (font-height 100)
                 (ascii-font <span style="color: #8b2252;">"Inconsolata"</span>)
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "Meiryo UI"))</span>
                 (ja-font <span style="color: #8b2252;">"&#12513;&#12452;&#12522;&#12458;"</span>))
          (my-ja-font-setter
           (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size <span style="color: #483d8b;">:height</span> font-height))
          (my-ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size)))
        (setq face-font-rescale-alist '((<span style="color: #8b2252;">".*Inconsolata.*"</span> . 1.0))) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
        (set-default 'line-spacing 1))

   (window-system <span style="color: #b22222;">; </span><span style="color: #b22222;">for SuSE Linux 12.1</span>
        (<span style="color: #a020f0;">let</span>
                ((font-size 14)
                 (font-height 100)
                 (ascii-font <span style="color: #8b2252;">"Inconsolata"</span>)
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ja-font "MigMix 1M")</span>
                 (ja-font <span style="color: #8b2252;">"Migu 1M"</span>))
          (my-ja-font-setter
           (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size <span style="color: #483d8b;">:height</span> font-height))
          (my-ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size)))
        (setq face-font-rescale-alist '((<span style="color: #8b2252;">".*MigMix.*"</span> . 2.0)
                                                                        (<span style="color: #8b2252;">".*Inconsolata.*"</span> . 1.0))) <span style="color: #b22222;">; </span><span style="color: #b22222;">0.9</span>
        (set-default 'line-spacing 1)))
</pre>
</div>
</div>

<div id="outline-container-sec-11-5-1" class="outline-4">
<h4 id="sec-11-5-1"><span class="section-number-4">11.5.1</span> フォントのインストール方法</h4>
<div class="outline-text-4" id="text-11-5-1">
<p>
Linux では次のように処理するだけでよく，意外と簡単．
</p>

<ol class="org-ol">
<li>~/.fonts を作成する
</li>
<li>フォントを1.のディレクトリに置く
</li>
<li>fc-cache -fv を実行
</li>
<li>fc-list でインストールされているかを確認．
</li>
</ol>

<p>
なお，Windows では，フォントファイルを右クリックして，インストールを選択するだけでOK．
</p>
</div>
</div>
<div id="outline-container-sec-11-5-2" class="outline-4">
<h4 id="sec-11-5-2"><span class="section-number-4">11.5.2</span> フォントチェック用コード</h4>
<div class="outline-text-4" id="text-11-5-2">
<p>
サンプルの <a href="http://dl.dropbox.com/u/2440/dokuwiki/font-test.org">orgファイル</a> を作って，見た目をチェックしています．バッファ内の桁数チェックや，ASCIIが漢字の半分の幅になっているかのチェックが楽になります．
</p>
</div>
</div>
</div>
<div id="outline-container-sec-11-6" class="outline-3">
<h3 id="sec-11-6"><span class="section-number-3">11.6</span> フォントサイズを制御する</h3>
<div class="outline-text-3" id="text-11-6">
<p>
以下の設定は，標準のフォントサイズが12ptで，日本語フォントに Migu 2M，英字フォントにMonacoを使う場合の設定です．フォントサイズの「増加」「減少」「初期化」「サイズ指定」が可能です．なお，15ptを超える場合はフレームサイズを15に強制補正するようにしています．手元のモニタを基準にしているので，ここはカスタマイズポイントだと思います．（そのうち変数化する予定です）
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">default-font-size</span> 12)
(setq target-font-size default-font-size)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">increase-font-size</span> ()
  (interactive)
  (setq target-font-size (+ target-font-size 1))
  (set-font-size target-font-size)
  (message <span style="color: #8b2252;">"+1: %s"</span> target-font-size))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">decrease-font-size</span> ()
  (interactive)
  (setq target-font-size (- target-font-size 1))
  (set-font-size target-font-size)
  (message <span style="color: #8b2252;">"-1: %s"</span> target-font-size))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">reset-font-size</span> ()
  (interactive)
  (set-font-size default-font-size)
  (setq target-font-size default-font-size)
  (message <span style="color: #8b2252;">"0: %s"</span> target-font-size))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">set-font-size-input</span> (n)
  (interactive <span style="color: #8b2252;">"nSize: "</span>)
  (setq target-font-size n)
  (set-font-size target-font-size)
  (message <span style="color: #8b2252;">"0: %s"</span> target-font-size))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">set-font-size</span> (arg)
  (interactive <span style="color: #8b2252;">"p"</span>)
  (<span style="color: #a020f0;">let*</span> ((font-size arg)
                (frame-width 80)
                (frame-height (<span style="color: #a020f0;">if</span> (&gt; arg 15) 20 40))
                (ja-font-scale 1.2)
                (ja-font <span style="color: #8b2252;">"Migu 2M"</span>)
                (ascii-font <span style="color: #8b2252;">"Monaco"</span>))

        (my-ascii-font-setter (font-spec <span style="color: #483d8b;">:family</span> ascii-font <span style="color: #483d8b;">:size</span> font-size))
        (my-ja-font-setter (font-spec <span style="color: #483d8b;">:family</span> ja-font <span style="color: #483d8b;">:size</span> font-size))
        (setq face-font-rescale-alist
                  `((<span style="color: #8b2252;">".*Migu.*"</span> . ,ja-font-scale)))
        (set-frame-size (selected-frame) frame-width frame-height)))
</pre>
</div>
</div>

<div id="outline-container-sec-11-6-1" class="outline-4">
<h4 id="sec-11-6-1"><span class="section-number-4">11.6.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-11-6-1">
<p>
以下のキーバインドは，face-remap.el が提供する text-scale-adjust のキーバインドを上書きします．text-scale-adjust をそのまま使うと，日本語フォントが制御されないので，オーバーライドしてしまってもOKだと思います．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #8b2252;">"C-x C-="</span>) 'increase-font-size)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C--"</span>) 'decrease-font-size)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-0"</span>) 'reset-font-size)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-11-7" class="outline-3">
<h3 id="sec-11-7"><span class="section-number-3">11.7</span> 行間を制御する</h3>
<div class="outline-text-3" id="text-11-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">init-line-spacing</span> 1)
(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">max-line-spacing</span> 7)
(setq line-spacing init-line-spacing)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">cycle-line-spacing</span> ()
  (interactive)
  (<span style="color: #a020f0;">if</span> (&lt; line-spacing max-line-spacing)
        (setq line-spacing (+ line-spacing 3))
        (reset-line-spacing))
  (message <span style="color: #8b2252;">"%d"</span> line-spacing))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">reset-line-spacing</span> ()
  (interactive)
  (setq line-spacing init-line-spacing)
  (message <span style="color: #8b2252;">"%d"</span> line-spacing))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-8" class="outline-3">
<h3 id="sec-11-8"><span class="section-number-3">11.8</span> パッチをカラフルに表示する</h3>
<div class="outline-text-3" id="text-11-8">
<p>
Built-in の <a href="http://www.emacswiki.org/emacs/DiffMode">diff-mode.el</a> をカスタマイズします．
</p>

<p>
現在試験中．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ediff-window-setup-function 'ediff-setup-windows-plain)
</pre>
</div>

<p>
<a href="http://d.hatena.ne.jp/syohex/20111228/1325086893">http://d.hatena.ne.jp/syohex/20111228/1325086893</a>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 'diff-mode <span style="color: #8b2252;">"diff-mode"</span> nil t nil   
 '((set-face-attribute 'diff-added-face nil
                                           <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"green"</span>
                                           <span style="color: #483d8b;">:weight</span> 'normal)
   (set-face-attribute 'diff-removed-face nil
                                           <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"firebrick1"</span>
                                           <span style="color: #483d8b;">:weight</span> 'normal)

   (set-face-attribute 'diff-file-header-face nil
                                           <span style="color: #483d8b;">:background</span> nil <span style="color: #483d8b;">:weight</span> 'extra-bold)

   (set-face-attribute 'diff-hunk-header-face nil
                                           <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"chocolate4"</span>
                                           <span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"white"</span> <span style="color: #483d8b;">:weight</span> 'extra-bold
                                           <span style="color: #483d8b;">:inherit</span> nil)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-9" class="outline-3">
<h3 id="sec-11-9"><span class="section-number-3">11.9</span> 背景を黒系色にする</h3>
<div class="outline-text-3" id="text-11-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(custom-set-faces
 '(default ((t
                         (<span style="color: #483d8b;">:background</span> <span style="color: #8b2252;">"black"</span> <span style="color: #483d8b;">:foreground</span> <span style="color: #8b2252;">"#55FF55"</span>)
                         ))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-10" class="outline-3">
<h3 id="sec-11-10"><span class="section-number-3">11.10</span> [rainbow-mode.el] 配色のリアルタイム確認</h3>
<div class="outline-text-3" id="text-11-10">
<p>
M-x rainbow-mode とすると，色指定のコードの背景色を，その指定色にリアルタイム変換してくれる．
</p>

<p>
<a href="http://elpa.gnu.org/packages/rainbow-mode.html">http://elpa.gnu.org/packages/rainbow-mode.html</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 'rainbow-mode <span style="color: #8b2252;">"rainbow-mode"</span> nil t)
</pre>
</div>
</div>

<div id="outline-container-sec-11-10-1" class="outline-4">
<h4 id="sec-11-10-1"><span class="section-number-4">11.10.1</span> 色一覧</h4>
<div class="outline-text-4" id="text-11-10-1">
<p>
<code>0,6,9,C,F</code> の組み合わせ
</p>

<p>
#000000 #000033 #000066 #000099 #0000CC #0000FF
#003300 #003333 #003366 #003399 #0033CC #0033FF
#006600 #006633 #006666 #006699 #0066CC #0066FF
#009900 #009933 #009966 #009999 #0099CC #0099FF
#00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF
#00FF00 #00FF33 #00FF66 #00FF99 #00FFCC #00FFFF
</p>

<p>
#330000 #330033 #330066 #330099 #3300CC #3300FF
#333300 #333333 #333366 #333399 #3333CC #3333FF
#336600 #336633 #336666 #336699 #3366CC #3366FF
#339900 #339933 #339966 #339999 #3399CC #3399FF
#33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF
#33FF00 #33FF33 #33FF66 #33FF99 #33FFCC #33FFFF
</p>

<p>
#660000 #660033 #660066 #660099 #6600CC #6600FF
#663300 #663333 #663366 #663399 #6633CC #6633FF
#666600 #666633 #666666 #666699 #6666CC #6666FF
#669900 #669933 #669966 #669999 #6699CC #6699FF
#66CC00 #66CC33 #66CC66 #66CC99 #66CCCC #66CCFF
#66FF00 #66FF33 #66FF66 #66FF99 #66FFCC #66FFFF
</p>

<p>
#990000 #990033 #990066 #990099 #9900CC #9900FF
#993300 #993333 #993366 #993399 #9933CC #9933FF
#996600 #996633 #996666 #996699 #9966CC #9966FF
#999900 #999933 #999966 #999999 #9999CC #9999FF
#99CC00 #99CC33 #99CC66 #99CC99 #99CCCC #99CCFF
#99FF00 #99FF33 #99FF66 #99FF99 #99FFCC #99FFFF
</p>

<p>
#CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF
#CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF
#CC6600 #CC6633 #CC6666 #CC6699 #CC66CC #CC66FF
#CC9900 #CC9933 #CC9966 #CC9999 #CC99CC #CC99FF
#CCCC00 #CCCC33 #CCCC66 #CCCC99 #CCCCCC #CCCCFF
#CCFF00 #CCFF33 #CCFF66 #CCFF99 #CCFFCC #CCFFFF
</p>

<p>
#FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF
#FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF
#FF6600 #FF6633 #FF6666 #FF6699 #FF66CC #FF66FF
#FF9900 #FF9933 #FF9966 #FF9999 #FF99CC #FF99FF
#FFCC00 #FFCC33 #FFCC66 #FFCC99 #FFCCCC #FFCCFF
#FFFF00 #FFFF33 #FFFF66 #FFFF99 #FFFFCC #FFFFFF
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> フレーム／ウィンドウ制御</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> 起動時の設定</h3>
<div class="outline-text-3" id="text-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">To avoid an error setting up the frame width (only for Emacs23)</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">(set-frame-width (selected-frame) 81)</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">(set-frame-width (selected-frame) 80)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Default window position to show a Emacs frame</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Dynabook UX: top=0, left=0, width=80, height=32</span>
(<span style="color: #a020f0;">cond</span>
 ((eq window-system 'ns) <span style="color: #b22222;">; </span><span style="color: #b22222;">for Macintosh</span>
  (setq initial-frame-alist
                (append
                 '((top . 22)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Y-pos from (0,0) the height of menu bar is 22pix.</span>
                   (left . 0)  <span style="color: #b22222;">; </span><span style="color: #b22222;">X-pos from (0,0) ; 420 is the center for MBP</span>
                   <span style="color: #b22222;">;; </span><span style="color: #b22222;">26 is the setting for Butler's Docklet</span>
                   <span style="color: #b22222;">;; </span><span style="color: #b22222;">837 is the setting for right side for MBP</span>
                   (width . 80) <span style="color: #b22222;">; </span><span style="color: #b22222;">Width  : character count</span>
                   (height . 35)<span style="color: #b22222;">; </span><span style="color: #b22222;">Height : character count</span>
                   (alpha . (100 90))
                   (vertical-scroll-bars . nil)
                   ) initial-frame-alist)))

 ((eq window-system 'x) <span style="color: #b22222;">; </span><span style="color: #b22222;">for Linux</span>
  (setq initial-frame-alist
                (append
                 '((vertical-scroll-bars . nil)
                   (top . 0)
                   (left . 0)
                   (width . 80)
                   (height . 38)
                   ) initial-frame-alist)))

 (t                     <span style="color: #b22222;">; </span><span style="color: #b22222;">for Windows</span>
  (setq initial-frame-alist
                (append
                 '((vertical-scroll-bars . nil)
                   (top . 0)
                   (left . 0)
                   (width . 80)
                   (height . 26)
                   ) initial-frame-alist))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Apply the initial setting to default</span>
(setq default-frame-alist initial-frame-alist)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><span class="section-number-3">12.2</span> [elscreen.el] Emacs バッファをタブ化</h3>
<div class="outline-text-3" id="text-12-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">ElScreen (require apel) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Note: change a string in the elscreen.el from "mac" to "ns"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">2011-10-26: e2wm's perspective (two) mode is more useful for me.</span>
(load <span style="color: #8b2252;">"elscreen"</span> <span style="color: #8b2252;">"ElScreen"</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3"><span class="section-number-3">12.3</span> [e2wm.el] 二画面表示</h3>
<div class="outline-text-3" id="text-12-3">
<ol class="org-ol">
<li><a href="http://github.com/kiwanami/emacs-window-manager/raw/master/e2wm.el">http://github.com/kiwanami/emacs-window-manager/raw/master/e2wm.el</a>
</li>
<li><a href="http://github.com/kiwanami/emacs-window-layout/raw/master/window-layout.el">http://github.com/kiwanami/emacs-window-layout/raw/master/window-layout.el</a>
</li>
</ol>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (autoload-if-found 'e2wm:dp-two <span style="color: #8b2252;">"e2wm"</span> nil t)
  (<span style="color: #a020f0;">eval-after-load</span> <span style="color: #8b2252;">"e2wm"</span>
    '(<span style="color: #a020f0;">progn</span>
       (setq e2wm:c-two-recipe
             '(- (<span style="color: #483d8b;">:lower-size</span> 10)
                 (| left right)
                 sub))
       (setq e2wm:c-two-winfo
             '((<span style="color: #483d8b;">:name</span> left )
               (<span style="color: #483d8b;">:name</span> right )
               (<span style="color: #483d8b;">:name</span> sub <span style="color: #483d8b;">:default-hide</span> t)))
       <span style="color: #b22222;">;; </span><span style="color: #b22222;">left, prev</span>
       (setq e2wm:c-two-right-default 'left)

       <span style="color: #b22222;">;; </span><span style="color: #b22222;">To avoid rebooting issue when using desktop.el and recentf.el</span>
       (add-hook 'kill-emacs-hook 'e2wm:stop-management))))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found 
 'e2wm:dp-two <span style="color: #8b2252;">"e2wm"</span> nil t nil
 '((setq e2wm:c-two-recipe
                 '(- (<span style="color: #483d8b;">:lower-size</span> 10)
                         (| left right)
                         sub))
   (setq e2wm:c-two-winfo
                 '((<span style="color: #483d8b;">:name</span> left )
                   (<span style="color: #483d8b;">:name</span> right )
                   (<span style="color: #483d8b;">:name</span> sub <span style="color: #483d8b;">:default-hide</span> t)))
   <span style="color: #b22222;">;; </span><span style="color: #b22222;">left, prev</span>
   (setq e2wm:c-two-right-default 'left)

   <span style="color: #b22222;">;; </span><span style="color: #b22222;">To avoid rebooting issue when using desktop.el and recentf.el</span>
   (add-hook 'kill-emacs-hook 'e2wm:stop-management)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4"><span class="section-number-3">12.4</span> [frame-ctr.el] キーボードでフレームの場所を移す</h3>
<div class="outline-text-3" id="text-12-4">
<p>
拙作の<a href="https://github.com/takaxp/frame-ctr">frame-ctr.el</a>を使います．e2wm.el と frame-cmds.el に依存しています．
</p>

<p>
frame-ctr.el は，frame-cmds, frame-fns と e2wm.el を利用したアドホックなフレーム管理ツールです．
</p>

<ol class="org-ol">
<li><a href="http://www.emacswiki.org/emacs/download/frame-cmds.el">http://www.emacswiki.org/emacs/download/frame-cmds.el</a>
</li>
<li><a href="http://www.emacswiki.org/emacs/download/frame-fns.el">http://www.emacswiki.org/emacs/download/frame-fns.el</a>
</li>
</ol>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-autoload-if-found
 '(change-frame-width-single
   change-frame-width-double
   reset-frame-height
   frame-ctr-open-height-ring
   move-frame-with-user-specify move-frame-left move-frame-to-center
   move-frame-right move-frame-to-edge-top move-frame-to-edge-bottom)
 <span style="color: #8b2252;">"frame-ctr"</span> nil t nil
 '(
   (<span style="color: #a020f0;">if</span> (equal system-name <span style="color: #8b2252;">"mba.local"</span>)
           (frame-ctr-make-height-ring '(56 20 40))
         (frame-ctr-make-height-ring '(56 68 20 40))))) <span style="color: #b22222;">; </span><span style="color: #b22222;">for Emacs24</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(frame-ctr-make-height-ring '(60 68 20 40))))) ; for Emacs23</span>
</pre>
</div>
</div>

<div id="outline-container-sec-12-4-1" class="outline-4">
<h4 id="sec-12-4-1"><span class="section-number-4">12.4.1</span> キーバインド</h4>
<div class="outline-text-4" id="text-12-4-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to somewhere (default: 0,0)</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-0"</span>) 'move-frame-with-user-specify)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to left side of the current position (require 'frame-cmds)</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-1"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (move-frame-left 200)))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to the center of the window display (require 'frame-ctr)</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-2"</span>) 'move-frame-to-center)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the frame to right side of the current position (require 'frame-cmds)</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-3"</span>) '(<span style="color: #a020f0;">lambda</span> () (interactive) (move-frame-right 200)))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the frame width single size</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">C-u C-x - =&gt; e2wm OFF, single size width and double height, move center</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x -"</span>) 'change-frame-width-single)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set the frame width double size</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">C-u C-x = =&gt; e2wm ON, double size width and height, move to the center</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x ="</span>) 'change-frame-width-double)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the current frame to the top of the window display</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f1&gt;"</span>) 'move-frame-to-edge-top)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Move the current frame to the bottom of the window display</span>
(global-set-key (kbd <span style="color: #8b2252;">"S-&lt;f1&gt;"</span>) 'move-frame-to-edge-bottom)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Cycle heights</span>
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f2&gt;"</span>) 'frame-ctr-open-height-ring)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-12-5" class="outline-3">
<h3 id="sec-12-5"><span class="section-number-3">12.5</span> [popwin.el] ポップアップウィンドウの制御</h3>
<div class="outline-text-3" id="text-12-5">
<p>
<a href="https://github.com/m2ym/popwin-el/">https://github.com/m2ym/popwin-el/</a>
</p>

<p>
popwin:display-buffer を autoload してもうまくいかない．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">popwin</span> nil t)
  (popwin-mode 1)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">for emacs 24.1</span>
  <span style="color: #b22222;">;;      </span><span style="color: #b22222;">(setq special-display-function 'popwin:special-display-popup-window)</span>
  <span style="color: #b22222;">;;      </span><span style="color: #b22222;">(setq display-buffer-function 'popwin:display-buffer)</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">for emacs 24.3</span>
  <span style="color: #b22222;">;;      </span><span style="color: #b22222;">(setq special-display-alist 'popwin:special-display-popup-window)</span>
  <span style="color: #b22222;">;;      </span><span style="color: #b22222;">(setq display-buffer-alist 'popwin:display-buffer)</span>
  (push '(<span style="color: #8b2252;">"*sdic*"</span> <span style="color: #483d8b;">:position</span> top) popwin:special-display-config)
  (setq popwin:special-display-config
                (append
                 '((<span style="color: #8b2252;">"CAPTURE-next.org"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom <span style="color: #483d8b;">:noselect</span> t)
                   (<span style="color: #8b2252;">"CAPTURE-org-ical.org"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom <span style="color: #483d8b;">:noselect</span> t)
                   (<span style="color: #8b2252;">"*Org-todo*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*Calendar*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*wclock*"</span>      <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*Org Agenda*"</span>  <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*Agenda Commands*"</span>  <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*Org Select*"</span>  <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*Occur*"</span>       <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*sdic*"</span>        <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> top)
                   (<span style="color: #8b2252;">"*dict-process*"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*anything*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*anything M-x*"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*anything complete*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*my-anything*"</span> <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   (<span style="color: #8b2252;">"*my-anything-buffer*"</span>    <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom)
                   <span style="color: #b22222;">;;            </span><span style="color: #b22222;">("*cfw-calendar*" :height 40 :position top)</span>
                   (<span style="color: #8b2252;">"*eshell*"</span>      <span style="color: #483d8b;">:height</span> 10 <span style="color: #483d8b;">:position</span> bottom))
                 popwin:special-display-config)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> ユーティリティ関数</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> [pomodoro.el] ポモドーロの実践</h3>
<div class="outline-text-3" id="text-13-1">
<p>
<a href="https://twitter.com/syohex">@syohex</a> さん謹製の <a href="https://github.com/syohex/emacs-utils/blob/master/pomodoro.el">pomodoro.el</a> に少しカスタマイズしたおれおれ <a href="https://github.com/takaxp/emacs-utils/blob/master/pomodoro.el">pomodoro.el</a> を使っています．以下のように設定すると，ポモドーロの残り時間は表示せず，アイコンだけをモードラインに表示できます．残り時間は <code>M-x pomodoro:mode-line-time-display-toggle</code> すれば，いつでも表示できます．
</p>

<p>
<code>pomodoro:finish-work-hook</code> ， <code>pomodoro:finish-rest-hook</code> ， <code>pomodoro:long-rest-hook</code> にそれぞれ結びつけてあるのは，<a href="http://www.mactechlab.jp/products-report/16673.html">Macのスピーチ機能</a>です．この例では，Kyoko さんが指示を出してくれます．
</p>

<p>
<code>M-x pomodoro:start</code> すると，ポモドーロが始まり，8時間後に <code>pomodoro:stop</code> が呼ばれてポモドーロが終了します．<a href="http://www.pomodorotechnique.com/">pomodoro</a> は機械的に仕事をしたい人にピッタリです．人によっては <a href="http://ja.wikipedia.org/wiki/Getting_Things_Done">GTD</a> よりも取っ付きやすいと思います．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (eval-after-autoload-if-found
   'pomodoro:start <span style="color: #8b2252;">"pomodoro"</span> nil t nil
   '(<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;&#32066;&#20102;&#24460;&#12395;&#38283;&#12367;&#12501;&#12449;&#12452;&#12523;&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;</span>
         (setq pomodoro:file nil)

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#9679;&#12384;&#12369;&#12391;&#34920;&#29694;&#12377;&#12427;&#65288;&#27531;&#12426;&#26178;&#38291;&#34920;&#31034;&#12394;&#12375;&#65289;</span>
<span style="color: #b22222;">;;     </span><span style="color: #b22222;">(setq pomodoro:mode-line-time-display nil)</span>

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#38263;&#12356;&#20241;&#25001;&#12395;&#20837;&#12427;&#12414;&#12391;&#12395;&#12509;&#12514;&#12489;&#12540;&#12525;&#12377;&#12427;&#22238;&#25968;</span>
         (setq pomodoro:iteration-for-long-rest 2)

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;&#38306;&#36899;</span>
         (setq pomodoro:work-time 120     <span style="color: #b22222;">; </span><span style="color: #b22222;">&#20316;&#26989;&#26178;&#38291;</span>
                   pomodoro:rest-time 20      <span style="color: #b22222;">; </span><span style="color: #b22222;">&#20241;&#25001;&#26178;&#38291;</span>
                   pomodoro:long-rest-time 60 <span style="color: #b22222;">; </span><span style="color: #b22222;">&#38263;&#12356;&#20241;&#25001;&#26178;&#38291;</span>
                   pomodoro:max-iteration 16) <span style="color: #b22222;">; </span><span style="color: #b22222;">&#12509;&#12514;&#12489;&#12540;&#12525;&#12377;&#12427;&#22238;&#25968;</span>

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#12479;&#12452;&#12510;&#12540;&#12398;&#34920;&#31034;&#12434;&#12494;&#12540;&#12510;&#12523;&#12501;&#12455;&#12452;&#12473;&#12395;&#12377;&#12427;</span>
         (set-face-bold-p 'pomodoro:timer-face nil)

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20316;&#26989;&#20013;&#65288;&#36196;&#65289;&#65292;&#20241;&#25001;&#20013;&#65288;&#38738;&#65289;&#65292;&#38263;&#12356;&#20241;&#25001;&#20013;&#65288;&#32209;&#65289;&#12395;&#12377;&#12427;</span>
         (set-face-foreground 'pomodoro:work-face <span style="color: #8b2252;">"#F53838"</span>)
         (set-face-foreground 'pomodoro:rest-face <span style="color: #8b2252;">"#3869FA"</span>)
         (set-face-foreground 'pomodoro:long-rest-face <span style="color: #8b2252;">"#00B800"</span>)

         (<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">my-pomodoro-speak</span> nil)
         (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-pomodoro-speak-toggle</span> ()
           (interactive)
           (setq my-pomodoro-speak (not my-pomodoro-speak)))

         <span style="color: #b22222;">;; </span><span style="color: #b22222;">Mac &#12518;&#12540;&#12470;&#21521;&#12369;&#65294;Kyoko&#12373;&#12435;&#12395;&#25351;&#31034;&#12375;&#12390;&#12418;&#12425;&#12358;</span>
         (add-hook 'pomodoro:finish-work-hook
                           (<span style="color: #a020f0;">lambda</span> ()
                                 (<span style="color: #a020f0;">let</span> ((script (concat <span style="color: #8b2252;">"say -v Kyoko "</span>
                                                          (number-to-string (floor pomodoro:rest-time))
                                                          <span style="color: #8b2252;">"&#20998;&#38291;&#65292;&#20241;&#25001;&#12375;&#12429;"</span>)))
                                   (<span style="color: #a020f0;">if</span> my-pomodoro-speak
                                           (shell-command-to-string script)
                                         (message <span style="color: #8b2252;">"%s"</span> script)))))

         (add-hook 'pomodoro:finish-rest-hook
                           (<span style="color: #a020f0;">lambda</span> ()
                                 (<span style="color: #a020f0;">let</span> ((script (concat <span style="color: #8b2252;">"say -v Kyoko "</span>
                                                        (number-to-string (floor pomodoro:work-time))
                                                        <span style="color: #8b2252;">"&#20998;&#38291;&#65292;&#20316;&#26989;&#12375;&#12429;"</span>)))
                                   (<span style="color: #a020f0;">if</span> my-pomodoro-speak
                                           (shell-command-to-string script)
                                         (message <span style="color: #8b2252;">"%s"</span> script)))))

         (add-hook 'pomodoro:long-rest-hook
                           (<span style="color: #a020f0;">lambda</span> ()
                                 (<span style="color: #a020f0;">let</span> ((script (concat <span style="color: #8b2252;">"say -v Kyoko &#12371;&#12428;&#12363;&#12425;"</span>
                                                        (number-to-string (floor pomodoro:long-rest-time))
                                                        <span style="color: #8b2252;">"&#20998;&#38291;&#12398;&#20241;&#25001;&#12391;&#12377;"</span>)))
                                   (<span style="color: #a020f0;">if</span> my-pomodoro-speak
                                           (shell-command-to-string script)
                                         (message <span style="color: #8b2252;">"%s"</span> script)))))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2"><span class="section-number-3">13.2</span> [utility.el] 自作してテスト中の便利関数群</h3>
<div class="outline-text-3" id="text-13-2">
<p>
関数定義を<a href="http://pastelwill.jp/wiki/doku.php?id=emacs:utility.el">別ファイル</a>に分離して，Emacs起動の高速化を図っています．各関数を autoload の管理下において，必要なときにロードするように設定しています．
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">when</span> (eval-after-autoload-if-found
           '(eval-org-buffer
                 kyoko-mad-mode-toggle org2dokuwiki-cp-kill-ring
                 open-current-directory set-alarms-from-file takaxp:open-file-ring
                 show-org-buffer get-random-string init-auto-install
                 add-itemize-head insert-formatted-current-date
                 insert-formatted-current-time insert-formatted-signature
                 export-timeline-business export-timeline-private reload-ical-export
                 browse-url-chrome count-words-buffer do-test-applescript
                 my-window-resizer)
           <span style="color: #8b2252;">"utility"</span> nil t)

  (global-set-key (kbd <span style="color: #8b2252;">"&lt;f12&gt;"</span>) 'takaxp:open-file-ring)
  (global-set-key (kbd <span style="color: #8b2252;">"M-4"</span>) 'my-window-resizer))
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Editing with a rectangle region</span>
(global-set-key (kbd <span style="color: #8b2252;">"C-x r C-SPC"</span>) 'rm-set-mark)
(global-set-key (kbd <span style="color: #8b2252;">"C-x r C-x"</span>) 'rm-exchange-point-and-mark)
(global-set-key (kbd <span style="color: #8b2252;">"C-x r C-w"</span>) 'rm-kill-region)
(global-set-key (kbd <span style="color: #8b2252;">"C-x r M-w"</span>) 'rm-kill-ring-save)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> provide</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #a020f0;">provide</span> '<span style="color: #008b8b;">init</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr class="postamble"><span class="center">
               <p class="author">Takaaki Ishikawa</p><p class="date">2014-03-20 Thu 15:24</p>
               </span>
</div>
</body>
</html>